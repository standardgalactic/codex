



Part IIntroduction










© Springer International Publishing AG 2018

Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers


https://doi.org/10.1007/978-3-319-66062-2_1





1. Overview



Thant Zin Oo1 , 
Nguyen H. Tran1, 
Shaolei Ren2 and 

Choong Seon Hong
1




(1)
Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)


(2)
Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, CA, USA

 



Abstract
This chapter gives a high-level overview of multi-tenant data centers which are an important part of the data center industry. Their efficiency has fallen behind that of owner-operated data centers due to the use of an uncoordinated model. Coordinated power management is proposed as a solution to improve the efficiency of multi-tenant data centers. To achieve coordinated power management, the operators must address the dynamic natures of both the supply and demand sides of the multi-tenant data center (in terms of computation which is a function of energy consumption). The supply side comprises the grid, on-site renewables, storage (batteries), and backup generator, whereas the demand side comprises the sum of individual demands from tenants.


Keywords
Multi-tenant data center
Coordinated power management
Resource allocation



The scale of data centers has been expanding with the exponential growth of generated data and cloud computing services [9-11]. The energy demand of data centers has also been increasing with this expansion. The data centers in the USA alone consumed an estimated 70 billion kWh in 2014 (1.8% of total US consumption) and are projected to consume 73 billion kWh in 2020 as shown in Fig. 1.1 [11, 12]. At present, most of the electricity generation in the world is carbon-intensive [13, 14], and the electricity price is rising for the so-called brown energy. As a part of the smart grid, large industrial consumers are encouraged to optimize their energy efficiency. Since the data center electricity usage has reached the large industrial consumer status, they are required to efficiently manage their electricity consumption [15, 16]. Although, Fig. 1.1 shows that the power management of data centers is quickly progressing, the focus is centered around large owner-operated data centers (e.g., Google). Multi-tenant data centers (also known as colocations) are an important segment of the data center industry, and their management is much less studied (e.g., Equinix) [1]. Recently, most of the capacity increases in data centers are in cloud computing servers, many of which are housed in multi-tenant data centers [10, 11].Fig. 1.1Historical and projected annual electricity consumption of data centers. Source: Berkeley Lab [11, 12]

From an economic perspective, Fig. 1.2a shows the percentage of revenues the multi-tenant data receives from each industry in 2013 [17]. Furthermore, the total size of this market is projected to grow from $25.70 billion in 2015 to $54.13 billion by 2020, at a compound annual growth rate of 16.1% [9]. From a technical viewpoint, NRDC reported that multi-tenant data centers consumed 18% of estimated electricity usage by US data centers in 2011 as shown in Fig. 1.2b [18]. In addition, Uptime institute reported that businesses are moving more of their IT assets to the multi-tenant data centers and cloud as shown in Fig. 1.2c [19]. Hence, we believe more research should be focused on multi-tenant data centers. Figure 1.1 clearly shows that power management for data centers can be further improved and we hope this survey encourages researchers to further increase the efficiency of multi-tenant data centers. Fig. 1.2(a) Revenue of multi-tenant data centers by vertical market [17]. (b) Estimated electricity usage by US data centers in 2011 [18]. (c) Estimated proportion of corporate IT assets [19]


1.1 Importance of Multi-Tenant Data Centers
Multi-tenant data centers, by definition, house multiple communication networks together with their associated hardware infrastructure in a single facility. There are two entities involved in their operations: the operator who rents out resources, and the tenants who lease the resources. Multi-tenant data centers differ from traditional purpose-built owner-operated data centers in that tenants can keep full control of their IT resources without the hassle of managing the non-IT support infrastructures [20].

1.1.1 Operator's Perspective
For an operator, the multi-tenant data centers1 rent resources to multiple tenants and provide shared infrastructure support. The resources can be 
physical resources (i.e., physical space, reliable electricity supply, and cooling for physical server tenancy), and
IT resources (i.e., network bandwidth).

In contrast, an owner-operated data center operator is responsible for the complete management of both IT computing resources and the support facilities. This difference significantly affects the power management and coordination of multi-tenant data centers. In other words, an owner-operated data center can be thought of as a dictatorship, whereas the multi-tenant data center can be likened to a democracy.
From operation perspective, the major difference in power management of multi-tenant data centers is the split incentives between the operators and their tenants. Note that cloud providers2 can be considered as multi-tenant data center that purely provides IT resources such as computing and storage.


1.1.2 Tenants' Perspective
As with other services, IT service demands (both private and commercial) are concentrated around major cities. Furthermore, even the top-brand IT companies cannot afford to build their own data centers in every major population center. Thus, multi-tenant data centers play a unique role as a critical and integral segment of the data center industry and are usually located near major cities.
For the tenants, the advantages of multi-tenant data centers provide obvious economic benefits [20]. Tenants can outsource their exact infrastructure needs (e.g., computing power, storage capacity, network bandwidth, etc.) without over- or under-spending.Building new data centers involves huge capital expenses (CapEx). Outsourcing can greatly increase implementation efficiency and the shared infrastructure allows costs to be spread over multiple tenants.
Operational efficiency also increases due to economies of scale and shared operation costs (OpEx).Tenants achieve agility (i.e., scalability and reliability) and can quickly respond to dynamically changing business environment.


First, the tenants include companies that do not want to build self-owned data centers (e.g., Twitter [23], due to economic concerns and uncertain needs) or companies that do not want to completely outsource IT demands to public cloud providers (due to concerns with privacy, losing control of data, and/or lack of technical skills). Even large IT companies, such as Amazon and Microsoft, house some servers in multi-tenant data centers to achieve "global presence," thereby improving performance and/or complementing their own data center infrastructure [22, 24]. Google and Microsoft have recently leased large capacities in multi-tenant data centers for global service expansion, while Apple houses about 25% of its servers in multi-tenant data centers [25, 26].

Second, multi-tenant data centers are indispensable for cloud computing services hosting physical servers. These include private/hybrid clouds that are operated by individual enterprises and public cloud services offered by small/medium-scale cloud providers (e.g., Salesforce, Box) that are not large enough to build their own data centers [27]. For instance, Switch operates a Las Vegas multi-tenant data center that houses over 40 cloud providers (including VMware) [28]. Furthermore, a significant portion of the Internet traffic is physically supported by the multi-tenant data centers as they are usually located very close to large-traffic demand areas. Cisco announced that content delivery network (CDN) providers handled 36% of Internet traffic in 2013, which is forecast to grow to 55% in 2018 [10, 29]. Moreover, most CDN providers are housed in multi-tenant data centers due to their close proximity to user bases in order to reduce delays in performance.
As recently noted by Google [30], "most large data centers are built to host servers from multiple companies (often called colocation, or 'colos')." More than 1400 multi-tenant data centers are located within the USA, and the total power demand by such facilities in the New York City area is estimated to exceed 400 MW, which is comparable to Google's global data center power demand [31]. In 2015, the multi-tenant data center market size is estimated at $25.70 billion, and this market is projected to grow 16.1% annually, reaching $54.13 billion by 2020 [9]. Figure 1.2 shows importance of the multi-tenant DC market which has been growing with the momentum generated from Internet and cloud services.



1.2 State-of-the-Art Research on Data Centers
In this work, we focus on the operational efficiency, especially power management which is unique due to the split incentives between the operator and its tenants. Consider the following scenario. On the one hand, the operator might want to reduce electricity consumption due to high electricity price or a demand response situation. On the other hand, its tenants are operating at full capacity to meet high demands from their customers and cannot cut electricity usage. Since most of the power management solutions for owner-operated data centers are not designed to cope with this split incentives, they cannot be applied to multi-tenant data centers [32-38].
Many studies have focused on the optimization of data center operation, and we provide an overview as follows. Energy efficiency is an important issue; thus, achieving "power proportionality" through dynamically turning on/off servers has been extensively studied [39-45]. Another important issue is geographical load balancing in geo-distributed data centers where location diversities are exploited to achieve cost minimization [46-50] and "brown energy" reduction [51-57]. Furthermore, thermal-aware server management and scheduling [58-63], battery management [64-68], peak power budgeting/allocation [69-71], and virtual machine (VM) resource allocation [72-77] have also been well studied. More recently, data center demand response has become a popular research topic due to its potential in improving the power grid stability and increasing the incorporation of intermittent renewables [78-84].
There have been many proposed solutions for power management to optimize data center operation. However, most of them focus on owner-operated data centers where operators have full control, i.e., both the IT systems and the facility support systems (e.g., cooling and power supply systems). Thus, facility management such as workload scheduling for these owner-operated data centers is relatively straightforward [43, 69, 74, 80]. On the other hand, multi-tenant data centers are managed in an uncoordinated manner where the operator3 manages the facility support systems and the tenants individually manage their own servers and workload. Hence, the underlying uncoordinated model of multi-tenant data centers and the operator's lack of control over tenants' servers invalidate many of the existing power management solutions for owner-operated data centers. Thus, the present efficiency of multi-tenant data centers is significantly lower than that of owner-operated data centers [85-88]. Further, the existing power management techniques [51-71] only focus on individual aspects, overlooking the necessary system integration of coordinated power management.


1.3 Potential of Coordinated Power Management
We recognize that multi-tenant data centers play an integral role in the data center industry. Nevertheless, their efficiency has fallen behind that of owner-operated data centers due to the use of an uncoordinated model. Coordinated power management is proposed as a solution to improve the efficiency of multi-tenant data centers. In short, the dynamic natures of both the supply and demand sides of the multi-tenant data center must be addressed. The supply side comprises the grid, on-site renewables, storage (batteries), and backup generator, whereas the demand side comprises the sum of individual demands from tenants.

1.3.1 Importance of Coordinated Power Management
Currently, multi-tenant data centers use a power-based pricing model, where tenants are billed based on the subscribed/reserved power (with a unit of dollars/kW/month) regardless of their actual energy consumption [46, 52, 67, 89]. There are other applicable fees that are not relevant to power management, for example, space and network connectivity. It is clear that power-based pricing leads to inefficiency problems in multi-tenant data centers since tenants have no incentives to save energy. In light of this issue, some multi-tenant data centers have adopted energy-based pricing that charges the tenants based on their actual energy usage [90]. Nonetheless, multi-tenant data centers face inefficiency problems since tenants still individually control their servers and manage power consumption in an uncoordinated manner. To clearly show why coordinated power management is critical for multi-tenant data centers, we present two scenarios.
Scenario #1: Coordination for reducing multi-tenant data centers' peak power demand. Since multi-tenant data centers are commercial customers, they are charged by power utilities not only based on energy consumption, but also based on peak power demand during a billing cycle (e.g., the maximum average power consumption measured over each 15-min interval) [50, 91-94]. The peak power demand charge, typically at a rate of over US 10 $/kW, is usually higher than energy usage, which is approximately US 10 cents/kWh, and thus can represent more than 50% of the total electricity bill [50, 92, 93]. However, even if the multi-tenant data center adopts an energy-based pricing model, tenants do not have incentives to avoid power consumption during peak power periods. Thus, for multi-tenant data center demand reduction, coordinated power management is necessary to manage tenant power usage and significantly reduce the cost for the operator.
Scenario #2: Coordination for maximizing utilization of on-site renewables. An increasing number of data centers have installed on-site renewables (e.g., solar PV panels), which generate green but highly intermittent energy [21, 54, 95, 96]. Naturally, to fully utilize the renewables, the data centers prefer to "follow the renewables," i.e., by deferring some non-urgent workloads, tenants consume less energy when there is less renewable energy generated [56, 96, 97]. Nonetheless, if tenants are not coordinated or given proper incentives, they have no motivation to "follow the renewables" under either an energy-based or power-based pricing model. Furthermore, the costs of renewables and batteries have been falling, and "green energy" is projected to be cheaper than "brown energy" in the near future [98-106]. Hence, more data centers are expected to incorporate on-site renewables and storage systems. Thus, the coordinated power management must be provisioned to handle high variabilities of both energy supply and demand.


1.3.2 Coordinated Power Management in Multi-Tenant Data Centers
Due to their origin in economics, market-based approaches arise as natural solutions to address the uncoordinated server power management in multi-tenant data centers. On the one hand, the operator reduces electricity cost by coordinating cost-conscious tenants' power management in a desired way; hence, they can return a portion of electricity cost savings as incentives. On the other hand, tenants receive financial rewards if they participate in coordinated power management. Thus, the proposed incentive mechanism creates a "win-win" situation. Furthermore, governments, environmental organizations, and/or corporate social responsibility have also pressured more and more tenants to be committed to sustainability [15, 16, 23, 85, 107-109]. Thus, the proposed incentive approach acts as an economic stimulus to tenants' engagement in managing their servers in an energy-efficient and coordinated manner, as desired by the multi-tenant data center operator.



1.4 Research Directions for Multi-Tenant Data Centers
Since multi-tenant data centers have not received much attention from the research community, there remain a myriad of new research problems that parallel those in the context of owner-operated data centers. As illustrated in Fig. 1.3, we show two interrelated yet distinct research directions that are closely related to power management. Fig. 1.3Research directions for multi-tenant data centers



1.5 Sustainable Multi-Tenant Data Centers
This research direction is motivated by the following facts. First, the "brown" electricity cost is increasing [88, 110], whereas the "green" electricity cost has been decreasing significantly [98-106]. Second, the multi-tenant data centers are lagging far behind owner-operated data centers in sustainability [23, 88]. In 2014, Greenpeace (a global environmental organization) published a sustainability report "Clicking Clean." In this report, Greenpeace covered the large multi-tenant data centers for the first time and showed that they have very "dirty" energy portfolios [23]. The same report also said that a few top-brand owner-operated data centers (e.g., Google) are much more environmentally conscious [23]. Due to close proximity to large population centers, global presence, and scale, the multi-tenant data centers are "big" players in the data center industry. Thus, they exert a tremendous impact on construction of a green Internet, even more so than current sustainability leaders such as Google [86]. Third, multi-tenant data center operators are well motivated to maximize the use of renewable energy in pursuit of utility incentives [111] and green certifications (e.g., LEED, which provides tax benefits and/or improves public image) [112]. They are also compelled by more stringent compliance codes [109, 113] and pro-sustainability tenants (e.g., Apple and Akamai [85, 108]) to become sustainable. Thus, we are at a critical point to transform multi-tenant data centers in order to build a green digital economy.


1.6 Multi-Tenant Data Center Demand Response

1.6.1 What is Data Center Demand Response?
In addition to greenness, enabling multi-tenant data center demand response is another important challenge. Demand response is a market-based program that extracts flexibility of electricity usage on the consumer side in response to power supply conditions in order to improve grid efficiency, reliability, and sustainability [114]. It has been adopted as a national strategic plan for power grid innovation in the USA. [15, 16, 107]. Data centers, unlike other large electricity consumers, have flexible power demands that can be managed via resource management. Hence, data centers are valuable demand response participants that can create "win-win" situations for themselves and the utility providers [115-117]. First, data center flexibility can help reduce costs for the utility provider by managing power in response to real-time electricity prices [46, 47]. Second, a data center's huge and flexible power demand serves as an "energy buffer" for the power grid, helping to stabilize the power grid and increase adoption of renewables by balancing grid supply demand at runtime [115, 117].
Among various benefits of data center demand response, the enhancement of power grid reliability has proven to be the most important. In particular, emergency demand response (e.g., when extreme weather conditions occur) coordinates many large energy consumers (including data centers) for power demand reduction.
This serves as the last line of defense for the power grid before cascading blackouts that can lead to economic losses in the order of billions of dollars [118, 119]. The US EPA has identified data centers as valuable assets for emergency demand response [116]. In particular, on April 21 and 22, 2015, hundreds of data centers participated in an emergency demand response and contributed by cutting their electricity consumption before a nation-wide blackout occurred in the USA and Canada [118, 119].


1.6.2 Why Multi-Tenant Data Center Demand Response?
In contrast to the existing studies on owner-operated data centers, we focus on multi-tenant data center demand response for two reasons [78-80, 83, 117, 120]. First, multi-tenant data centers are an integral segment of the data center industry, and "most large data centers" are built to house multiple tenants [30]. Second, many large multi-tenant data centers are located in densely populated metropolitan areas (e.g., Silicon Valley [121]) where emergency demand response is particularly desired for peak grid load shaving. In contrast, many mega-scale owner-operated data centers (e.g., Google) are often located in rural areas with low population densities [16, 80, 116].
At present, multi-tenant data centers participate in emergency demand response using on-site energy storage and generation devices (e.g., UPS, diesel generators) to temporarily offset electricity usage. However, this method is neither cost-effective nor environmentally friendly. Studies on owner-operated data centers have shown promising results for optimizing power management for data center demand response [80, 81, 83]. Similarly, there exists a huge potential for investigation into coordinated power management of multi-tenant data center emergency demand response. While many hurdles remain to be overcome, we believe that coordinated power management can greatly shift the way multi-tenant data centers are performing emergency demand response. This research direction has the potential to significantly increase the power grid reliability and transform the multi-tenant data centers' huge power demand from a nightmare into a highly valuable asset.



References


1.
Ren, S. & Islam, M. A. (2014, June). Colocation demand response: Why do I turn off my servers? In 11th international conference on autonomic computing (pp. 201-208). Philadelphia, PA: USENIX Association. [Online]. Available: https://​goo.​gl/​DT5tmP.


9.
Data Center Colocation Market by Service Types (Retail, Wholesale), Industry Verticals (Banking & Insurance, IT & Telecom, Healthcare, Government & Public, Energy), End Users (SMEs, Large Enterprises) & by Regions - Global Forecast to 2020. (2016, January). Research and markets, Tech. Rep. [Online]. Available: http://​goo.​gl/​GA3mwG.


10.
Cisco. (2016, April). Cisco Global Cloud Index: Forecast and Methodology, 2014-2019 White Paper. Tech. Rep. [Online]. Available: http://​goo.​gl/​DOfl54.


11.
Shehabi, A., Smith, S. J., Sartor, D. A., Brown, R. E., Herrlin, M., Koomey, J. G., et al. (2016, June). United States Data Center Energy Usage Report. [Online]. Available: http://​goo.​gl/​Y93L9t.


12.
Chao, J. (2016, June). Data centers continue to proliferate while their energy use plateaus. Berkeley Lab News Center Website. [Online]. Available: https://​goo.​gl/​5T3Hxf.


13.
Electricity in the U.S. Webpage. [Online]. Available: http://​goo.​gl/​xR3p6L.


14.
Wikipedia, Electricity Generation. Wikipedia Website. [Online]. Available: https://​goo.​gl/​EL4e8o.


15.
U.S. Federal Energy Regulatory Commission. (2010, June). National action plan on demand response. Tech. Rep. [Online]. Available: http://​goo.​gl/​v0MPVe.


16.
U.S. Federal Energy Regulatory Commission. (2012, December). Assessment of demand response and advanced metering. Tech. Rep. [Online]. Available: http://​goo.​gl/​cvg8qy.


17.
dePreaux, J. (2013). Wholesale and Retail Data Centers - North America and Europe - 2013, IHS, Tech. Rep. [Online]. Available: https://​goo.​gl/​soiFoh.


18.
Whitney, J. & Delforge, P. (2014, August). Scaling up energy efficiency across the data center industry: Evaluating key drivers and barriers. NRDC and Anthesis, Tech. Rep. [Online]. Available: http://​goo.​gl/​cYHNIW.


19.
Stansberry, M. (2016). 2016 Data Center Industry Survey, Uptime Institute, Tech. Rep. [Online]. Available: https://​goo.​gl/​j6gero.


20.
CoreSite. (2012). Improving IT efficiencies: Four advantages of multi-tenant data centers. Tech. Rep. white Paper. [Online]. Available: https://​goo.​gl/​UMgamU.


21.
Equinix Website. [Online]. Available: http://​www.​equinix.​com/​.


22.
Amazon.com. Amazon Web Services: Global Infrastructure. Amazon.com Website. [Online]. Available: https://​goo.​gl/​YuRsRs.


23.
Cook, G., Dowdall, T., Pomerantz, D., & Wang, Y. (2014, April). Clicking clean: How companies are creating the green internet. Greenpeace, Tech. Rep. [Online]. Available: http://​goo.​gl/​IF58Bz.


24.
Microsoft. Microsoft: Global infrastructure. Microsoft Website. [Online]. Available: https://​goo.​gl/​MLGIcP.


25.
Kerrigan, J. (2016, January). January 2016 Report: 2015 Year in Review. North American Data Centers, Tech. Rep. [Online]. Available: https://​goo.​gl/​SFgTzy.


26.
Kerrigan, J. (2016, April). NewsleNews - Spotlight on NorNorth Virginia. North American Data Centers, Tech. Rep. [Online]. Available: https://​goo.​gl/​s3CKWT.


27.
CyrusOne. (2012). Colocation: The logical home for the cloud. Computer World, Tech. Rep. [Online]. Available: http://​goo.​gl/​vsa26h.


28.
Miller, R. (2014, February). Inside SuperNAP 8: Switch's Tier IV Data Fortress. Data Center Knowledge Website. [Online]. Available: http://​goo.​gl/​nVEecc.


29.
Shen, Y. (2014, September). The shift to content delivery networks (CDNs) supports more and better customer video experiences. Website, cisco. [Online]. Available: http://​goo.​gl/​s7SgXh.


30.
Barroso, L. A., Clidaras, J., & Hoelzle, U. (2013). In M. D. Hill (Ed.), The datacenter as a computer: An introduction to the design of warehouse-scale machines (2nd ed.). San Rafael, CA: Morgan and Claypool Publishers. [Online]. Available: http://​goo.​gl/​GPHC3U.


31.
Telegeography Website. [Online]. Available: https://​www.​telegeography.​com/​.


32.
Kong, F. & Liu, X. (2014, November). A survey on green-energy-aware power management for datacenters. ACM Computing Surveys, 47(2), 30:1-30:38. [Online]. Available: http://​goo.​gl/​8JaPk1.


38.
Hammadi, A. & Mhamdi, L. (2014). A survey on architectures and energy efficiency in data center networks. Computer Communications, 40, 1-21. [Online]. Available: http://​www.​sciencedirect.​com/​science/​article/​pii/​S014036641300272​7.


39.
Amur, H., Cipar, J., Gupta, V., Ganger, G. R., Kozuch, M. A., & Schwan, K. (2010). Robust and flexible power-proportional storage. In 1st ACM Symposium on Cloud Computing, ser. SoCC '10 (pp. 217-228). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​OHbPql.


43.
Lin, M., Wierman, A., Andrew, L., & Thereska, E. (2011, April). Dynamic right-sizing for power-proportional data centers. In IEEE INFOCOM (pp. 1098-1106). [Online]. Available: http://​goo.​gl/​QoqujE.


45.
Xu, Z., Wang, X., & cheng Tu, Y. (2013). Power-aware throughput control for database management systems. In 10th international conference on autonomic computing, (ICAC 13) (pp. 315-324). San Jose, CA: USENIX. [Online]. Available: https://​goo.​gl/​nuaiXn.


46.
Qureshi, A., Weber, R., Balakrishnan, H., Guttag, J., & Maggs, B. (2009). Cutting the electric bill for internet-scale systems. In ACM SIGCOMM Conference on Data Communication, ser. SIGCOMM '09 (pp. 123-134). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​aV7dMs.


47.
Rao, L., Liu, X., Xie, L., & Liu, W. (2010, March). Minimizing electricity cost: Optimization of distributed internet data centers in a multi-electricity-market environment. In IEEE INFOCOM (pp. 1-9). [Online]. Available: http://​goo.​gl/​ccIfXf.


50.
Xu, H. & Li, B. (2014). Reducing electricity demand charge for data centers with partial execution. In 5th international conference on future energy systems, ser. e-Energy '14 (pp. 51-61). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​Li8eq5.


51.
Aksanli, B., Venkatesh, J., Zhang, L., & Rosing, T. (2011). Utilizing green energy prediction to schedule mixed batch and service jobs in data centers. In 4th workshop on power-aware computing and systems, ser. HotPower '11 (pp. 5:1-5:5). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​jYY4PF.


52.
Deng, N., Stewart, C., Gmach, D., Arlitt, M., & Kelley, J. (2012). Adaptive green hosting. In 9th international conference on autonomic computing, ser. ICAC '12 (pp. 135-144). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​Ha9wWT.


54.
Goiri, I., Le, K., Nguyen, T. D., Guitart, J., Torres, J., & Bianchini, R. (2012). GreenHadoop: Leveraging green energy in data-processing frameworks. In 7th ACM European conference on computer systems, ser. EuroSys '12 (pp. 57-70). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​CE5FC2.


56.
Liu, Z., Lin, M., Wierman, A., Low, S. H., & Andrew, L. L. (2011). Greening geographical load balancing. In ACM SIGMETRICS joint international conference on measurement and modeling of computer systems, ser. SIGMETRICS '11 (pp. 233-244). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​DHgS7v.


57.
Zhang, Y., Wang, Y., & Wang, X. (2011). GreenWare: Greening cloud-scale data centers to maximize the use of renewable energy. In 12th ACM/IFIP/USENIX international conference on middleware, ser. Middleware'11 (pp. 143-164). Berlin/Heidelberg: Springer. [Online]. Available: http://​goo.​gl/​3zAgMu.


58.
Chen, J., Tan, R., Wang, Y., Xing, G., Wang, X., Wang, X., et al. (2012, December). A high-fidelity temperature distribution forecasting system for data centers. In IEEE 33rd real-time systems symposium, (RTSS) (pp. 215-224). [Online]. Available: http://​goo.​gl/​tssu9a.


63.
Tang, Q., Gupta, S., & Varsamopoulos, G. (2007, September). Thermal-aware task scheduling for data centers through minimizing heat recirculation. In IEEE international conference on cluster computing (pp. 129-138). [Online]. Available: http://​goo.​gl/​maseGi.


64.
Govindan, S., Wang, D., Sivasubramaniam, A., & Urgaonkar, B. (2012). Leveraging stored energy for handling power emergencies in aggressively provisioned datacenters. In 17th international conference on architectural support for programming languages and operating systems, ser. ASPLOS XVII (pp. 75-86). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​6kTnGL.


67.
Palasamudram, D. S., Sitaraman, R. K., Urgaonkar, B., & Urgaonkar, R. (2012). Using batteries to reduce the power costs of internet-scale distributed networks. In 3rd ACM symposium on cloud computing, ser. SoCC '12 (pp. 11:1-11:14). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​fGH9ts.


68.
Urgaonkar, R., Urgaonkar, B., Neely, M. J., & Sivasubramaniam, A. (2011). Optimal power cost management using stored energy in data centers. In ACM SIGMETRICS joint international conference on measurement and modeling of computer systems, ser. SIGMETRICS '11 (pp. 221-232). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​HKg8vj.


69.
Gandhi, A., Harchol-Balter, M., Das, R., & Lefurgy, C. (2009). Optimal power allocation in server farms. In 11th international joint conference on measurement and modeling of computer systems, ser. SIGMETRICS '09 (pp. 157-168). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​HOOx9P.


71.
Wang, D., Ren, C., & Sivasubramaniam, A. (2013). Virtualizing power distribution in datacenters. In 40th annual international symposium on computer architecture, ser. ISCA '13 (pp. 595-606). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​p9AViH.


72.
Liu, H., Xu, C.-Z., Jin, H., Gong, J., & Liao, X. (2011). Performance and energy modeling for live migration of virtual machines. In 20th international symposium on high performance distributed computing, ser. HPDC '11 (pp. 171-182). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​t7bh5K.


74.
Urgaonkar, R., Kozat, U., Igarashi, K., & Neely, M. (2010, April). Dynamic resource allocation and power management in virtualized data centers. In IEEE network operations and management symposium, (NOMS) (pp. 479-486). [Online]. Available: http://​goo.​gl/​mBdOhd.


77.
Yang, C.-T., Wang, K.-C., Cheng, H.-Y., Kuo, C.-T., & Chu, W. C. C. (2011). Green power management with dynamic resource allocation for cloud virtual machines. In IEEE international conference on high performance computing and communications, ser. HPCC '11 (pp. 726-733). Washington, DC, USA: IEEE Computer Society. [Online]. Available: http://​goo.​gl/​WUSfsB.


78.
Aikema, D., Simmonds, R., & Zareipour, H. (2012, June). Data centers in the ancillary services market. In International green computing conference, (IGCC) (pp. 1-10). [Online]. Available: https://​goo.​gl/​JwZ8q6.


80.
Ghatikar, G., Ganti, V., Matson, N., & Piette, M. A. (2012, August). Demand response opportunities and enabling technologies for data centers: Findings from field studies. Berkeley Lab, Berkeley, CA, Tech. Rep. LBNL-5763E. [Online]. Available: http://​goo.​gl/​Z953FG.


81.
Li, S., Brocanelli, M., Zhang, W., & Wang, X. (2013, July). Data center power control for frequency regulation. In IEEE power and energy society general meeting, (PES) (pp. 1-5). [Online]. Available: http://​goo.​gl/​E7A9IO.


83.
Liu, Z., Liu, I., Low, S., & Wierman, A. (2014). Pricing data center demand response. In ACM international conference on measurement and modeling of computer systems, ser. SIGMETRICS '14 (pp. 111-123). New York, NY, USA: ACM. [Online]. Available: https://​goo.​gl/​4U2Ihs.


84.
Wang, H., Huang, J., Lin, X., & Mohsenian-Rad, H. (2014, January). Exploring smart grid and data center interactions for electric power load balancing. SIGMETRICS Performance Evaluation Review, 41(3), 89-94. [Online]. Available: http://​goo.​gl/​Fn1Dny.


85.
Apple. (2016). Environmental Responsibility Report 2016, Tech. Rep. [Online]. Available: http://​goo.​gl/​iffeRQ.


86.
Jones, P. (2014, April). Greenpeace gives digital realty, equinix low grades on renewable energy. Data Center Dynamics Website. [Online]. Available: http://​goo.​gl/​lQofPp.


88.
Novet, J. (2013, November). Colocation providers, customers trade tips on energy savings. Data Center Knowledge Website. [Online]. Available: http://​goo.​gl/​BygHRY.


89.
Verizon. Pricing plan. Verizon Website. [Online]. Available: http://​goo.​gl/​NsyAbu.


90.
Miller, R. (2011, February). Analysis: Colocation pricing trends. Data Center Knowledge Website. [Online]. Available: http://​goo.​gl/​NvOjLl.


91.
PG&E. Pacific gas and electric company. PG&E Website. [Online]. Available: http://​www.​pge.​com/​.


92.
Liu, Z., Wierman, A., Chen, Y., Razon, B., & Chen, N. (2013, June). Data center demand response: Avoiding the coincident peak via workload shifting and local generation. SIGMETRICS Performance Evaluation Review, 41(1), 341-342. [Online]. Available: http://​goo.​gl/​rvenlD.


93.
Wang, C., Urgaonkar, B., Wang, Q., & Kesidis, G. (2014, September). A hierarchical demand response framework for data center power cost optimization under real-world electricity pricing. In IEEE 22nd international symposium on modelling, analysis simulation of computer and telecommunication systems, (MASCOTS) (pp. 305-314). [Online]. Available: http://​goo.​gl/​ootCBH.


94.
Yao, J., Liu, X., He, W., & Rahman, A. (2012, June). Dynamic control of electricity cost with power demand smoothing and peak shaving for distributed internet data centers. In IEEE 32nd international conference on distributed computing systems (pp. 416-424). [Online]. Available: http://​goo.​gl/​15pNSh.


95.
Apple. Environmental responsibility. Apple Website. [Online]. Available: http://​goo.​gl/​syQ0Pz.


96.
Li, C., Hu, Y., Zhou, R., Liu, M., Liu, L., Yuan, J., et al. (2013). Enabling datacenter servers to scale out economically and sustainably. In 46th annual IEEE/ACM international symposium on microarchitecture, ser. MICRO-46 (pp. 322-333). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​x3xA1z.


97.
Le, K., Bianchini, R., Nguyen, T., Bilgir, O., & Martonosi, M. (2010, August). Capping the brown energy consumption of internet services at low cost. In International green computing conference (pp. 3-14). [Online]. Available: http://​goo.​gl/​mvrGSQ.


98.
International Renewable Energy Agency. (2012, June). Renewable energy cost analysis - solar photovoltaics. Tech. Rep. [Online]. Available: http://​goo.​gl/​NNNJCw.


106.
Muenzel, V., Mareels, I., de Hoog, J., Vishwanath, A., Kalyanaraman, S., & Gort, A. (2015, February). PV generation and demand mismatch: Evaluating the potential of Residential Storage. In Innovative smart grid technologies conference (ISGT), 2015 IEEE Power Energy Society (pp. 1-5). [Online]. Available: http://​goo.​gl/​CymZ50.


107.
U.S. Government. (2015, March). U.S. Federal Leadership on Climate Change and Environmental Sustainability - EXECUTIVE ORDER 13693. Whitehouse Website. [Online]. Available: https://​goo.​gl/​05Rj04.


108.
Akamai. Environmental sustainability policy. Akamai Website. [Online]. Available: https://​goo.​gl/​Mdwb8D.


109.
Califonia energy efficiency potential and goals studies. Calfonia Government Website. [Online]. Available: http://​goo.​gl/​7jkPXa.


110.
Greenberg, A., Hamilton, J., Maltz, D. A., & Patel, P. (2008, December). The cost of a cloud: Research problems in data center networks. SIGCOMM Computer Communication Review, 39(1), 68-73. [Online]. Available: http://​goo.​gl/​IOPy6d.


111.
U.S. EPA. (2012, November). Utility guide for designing incentive programs focused on data center efficiency measures. Tech. Rep. [Online]. Available: https://​goo.​gl/​E91etC.


112.
U.S. Green Building Council Std. Leadership in energy & environmental design. [Online]. Available: http://​goo.​gl/​jqGiox.


113.
Whitehouse. (2009, October). U.S. Federal leadership in environmental, energy, and economic performance - EXECUTIVE ORDER 13514 Whitehouse Website.


114.
wikipedia. Demand response. Wikipedia Website. [Online]. Available: https://​goo.​gl/​RCEpe8.


115.
Brown, R. E., Masanet, E. R., Nordman, B., Tschudi, W. F., Shehabi, A., Stanley, J., et al. (2008, June). Report to congress on server and data center energy efficiency: Public law 109-431. Berkeley Lab, Berkeley, CA, Tech. Rep. LBNL-363E. [Online]. Available: https://​goo.​gl/​Vi8IS7.


116.
EnerNOC. (2013). Ensuring U.S. grid security and reliability: U.S. EPAs proposed emergency backup generator rule. Tech. Rep. [Online]. Available: https://​goo.​gl/​Pzj5pE.


117.
Wierman, A., Liu, Z., Liu, I., & Mohsenian-Rad, H. (2014, November). Opportunities and challenges for data center demand response. In IEEE international green computing conference, Dallas, TX. [Online]. Available: http://​goo.​gl/​HDdXXH.


118.

Demand response. PJM Website. [Online]. Available: https://​goo.​gl/​GtU2sR.


119.
PJM. (2015, December). Load Management Performance Report - 2014/2015. PJM, Tech. Rep. [Online]. Available: https://​goo.​gl/​2CfzHo.


120.
Aksanli, B. & Rosing, T. (March 2014). Providing regulation services and managing data center peak power budgets. In Design, automation and test in Europe conference and exhibition, (DATE) (pp. 1-4). [Online]. Available: http://​goo.​gl/​3UYoOk.


121.
Data Center Map: Colocation, U.S.A.. Data Center Map Website. [Online]. Available: http://​goo.​gl/​JkV6tg.




Footnotes


1


For instance, the world's largest (retail) multi-tenant data center for physical resources is Equinix [21].

 



2


Cloud providers themselves can be tenants of multi-tenant data centers with physical resources, e.g., Amazon Web Services house some servers in multi-tenant data centers around the world to reduce latency [22].

 



3


Hereafter, we use multi-tenant data center operator and operator interchangeably.

 













© Springer International Publishing AG 2018

Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers


https://doi.org/10.1007/978-3-319-66062-2_2





2. Preliminaries



Thant Zin Oo1 , 
Nguyen H. Tran1, 
Shaolei Ren2 and 

Choong Seon Hong
1




(1)
Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)


(2)
Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, CA, USA

 



Abstract
This chapter gives the background on multi-tenant data centers focusing on the electrical systems, energy supply and demand, energy pricing, and other key performance indicators such as power usage coefficient (PUE), carbon footprint, and inconvenience cost. Moreover, this chapter discusses the responsibilities of the stakeholders, i.e., the utility provider, the operator and the tenants, and their split incentive issue between the stakeholders.


Keywords
Multi-tenant data center
PUE
Carbon footprint
Energy pricing
Stakeholders



In this chapter, we discuss the operations of a multi-tenant data center focusing on the system components, the stakeholders, and the key performance indicators (KPIs).

2.1 Multi-Tenant Data Center
In a multi-tenant data center, the operator provides or rents facility space to its tenants to house their servers. As shown in Fig. 2.1, the operator provides necessary IT (e.g., networking infrastructure) and non-IT (e.g., cooling, electricity supply) services for its tenants. Almost all of these services (e.g., cooling and networking) consume significant amount of electricity. The tenants house their servers at the multi-tenant data center, and the operator bills the services according to applicable fees for a billing cycle, which is usually 1 month. The billing cycle (usually 1 month) is divided into time slots, t ∈ {1, ..., T}, to account for time-varying workloads of tenants and decision-making epochs. We focus on the electricity fee since it encompasses the major portion of the tenants' monthly payments of different services [93, 122, 123]. The electricity charges can be power-based [46, 52, 67, 89] and/or energy-based [90] and vary over time.Fig. 2.1A typical multi-tenant data center and its system components

Consider a multi-tenant data center with N tenants housing their servers. Each tenant pays a monthly bill to the operator for the services provided. The operator pays a monthly electricity bill to the grid (utility provider). A significant portion of the electricity bill can be the peak power demand charge. Thus, the operator wants to reduce energy consumption to minimize the electricity bill. However, tenants have no incentives to reduce electricity usage or peak power demand. Hence, the operator pays incentives (usually monetary) to the tenants to reduce their electricity usage as opposed to paying the grid for the electricity consumed by the tenants [124-126]. The operator itself may receive incentive payments for reduced electricity consumption from the grid [1, 5, 7, 127, 128].


2.2 Electrical Systems
The electrical systems of a multi-tenant data center are shown in Fig. 2.1. The system components include electricity demand generators (e.g., servers, cooling equipment, network equipment), electricity supply sources (e.g., grid, on-site renewable sources, on-site generators), and electricity storage systems (e.g., batteries). The major electricity consumers in a multi-tenant data center are its tenants, who pay monthly electricity bill to the operator. However, it is difficult to exactly determine the electricity consumption of non-IT services (e.g., cooling) for each tenant. Hence, the data center uses a coefficient, power usage effectiveness (PUE), to calculate each tenant's electricity consumption [129, 130]. The operator purchases the majority of the electricity needed from the grid which, at present, is the principal electricity supply. The operator can install on-site renewable sources (e.g., solar PV panels, wind turbines) to reduce its electricity bill, as well as backup generators and batteries to provide emergency power supply. In the near future, the on-site renewable sources together with advance battery technology will supply the majority of the electricity needs of the multi-tenant data center [32, 131]. Note that owner-operated data centers can be considered as a special case of multi-tenant data center hosting only a single tenant (e.g., Google).

2.2.1 Power Usage Effectiveness
Power usage effectiveness (PUE) is defined as the ratio of the total energy consumed by the entire data center facility to the energy consumed by the IT systems [129, 130]. Partial PUE (pPUE), denoted by γ(t), is similarly defined for each module of the data center facility. Since pPUE can separately model each tenant or module, it reflects the real operational environment of multi-tenant data centers. The pPUE varies with the ambient temperature, and a typical value ranges from 1.1 to 2.0, as shown in Fig. 2.2 and Table 2.1 (Fig. 2.3). Fig. 2.2pPUE variation with outside ambient temperature [132, 133]
Fig. 2.3Weekly Summer and Winter pPUE in San Francisco, CA, in 2013
Table 2.1pPUE versus ambient dry bulb temperature (DBT)[132]Outdoor ambient DBT (∘F)Return air DBT (∘F)Cooling modepPUE9085Compressor1.317085Compressor1.216085Mixed1.175085Pump1.102585Pump1.05



2.2.2 Electricity Supply
The net electricity supply for a multi-tenant data center at time slot t is  (2.1)
where E

j
(t) denotes the electricity sources which are: (1) grid, (2) on-site renewable sources, (3) on-site generators, and (4) on-site batteries. Detail notations are described in Table 2.4. Moreover, a battery is an electricity source while it is discharging and an electricity demand while it is charging. Hence, E
4(t) can be in one of the two states:  (2.2)



2.2.3 Electricity Demand
If tenant i houses a total of  servers in a multi-tenant data center, its maximum electricity demand (i.e., the electricity consumption without reduction) is . For a tenant to reduce its energy consumption, it must turn off some of its servers. If tenant i turns off m

i
 servers, its energy demand reduction is Δe

i
(t) = m

i
 ⋅ p

i

0. Hence, tenant i's net energy consumption is [43, 46, 138]  (2.3)
where p

i

0 and p

i

1 are the static and dynamic powers, and λ

i
 and μ

i
 are the workload arrival and service rates of tenant i, respectively. Since electricity supply must equal its demand, the amount of electricity the operator purchases from the grid is  (2.4)



2.2.4 Electricity Bill
For every unit of electricity not produced on-site, the operator purchases one unit from the grid. Electricity charges paid by a multi-tenant data center consist of two components [92, 135, 139]: 
the peak charge, determined by the peak electricity demand within a billing cycle, e.g., the maximum average power consumption measured over each time slot (e.g., 15 min interval) [139],
the volume charge, based on total electricity consumption in the billing cycle.

Table 2.2 summarizes several electricity rate plans available in North America. The volume charge is relatively intuitive. The rationale behind the peak charge is that peak consumption shedding is critical to the grid (utility provider). During peak hours, the grid needs to utilize peaking power plants, which usually burn natural gas or diesel oil and operate only in peak hours with higher cost. Even a small reduction in peak demand can provide significant cost savings and reduce greenhouse gas emission for the grid. In practice, the peak charge component can account for over 30% of the total electricity bill [92, 139]. 
Table 2.2Electricity rates in North America [126]Utility providerContract typePeak charge ($/kW)Volume charge (/kW)[91] PG&EE20 primary17.5415.0930[134] Duke energyLGS-TOU-2816.994.7240[135] BC hydroLGS9.954.8600[136] GeorgiaPLH-816.900.5679[137] Mid AmericanRate GD7.075.4330

Hence, the operational cost of the multi-tenant data center at time t is [124]  (2.5)
where π(t) is the unit volume price for electricity ($/kWh), E(t) is the electricity consumption, r

i
(t) is the incentive or reward to tenant i, and x

i
(t) shows whether an incentive to tenant i is paid (i.e., x

i
(t) = 1) or not (i.e., x

i
(t) = 0). The monthly electricity bill for the multi-tenant data center is  (2.6)
where  is the unit peak demand price ($/kW), and  is the peak electricity demand during the billing cycle. If the grid does not charge peak power charge, then . On the other hand, if the utility is environmental or efficiency conscious, it charges for peak demand, which is designed to reduce the carbon footprint via market dynamics, i.e., . 



2.3 Carbon Footprint
Electricity is generated from many sources [140, 141]. Thus, depending on the fuel type used, it has different carbon emission rates, as shown in Table 2.3. Since it is not possible to differentiate how the electricity was generated once it enters the grid, the average carbon efficiency (with a unit of g/kWh) is calculated as [53]: , where ϕ

k
 is the carbon efficiency of fuel type k and E

k
 is the total electricity generated from fuel type k. Hence, the carbon emission of a multi-tenant data center for time slot t is expressed as:  (2.7)
where respective carbon efficiencies are given in Table 2.4. Due to time-varying energy fuel mixes to satisfy different demands, ϕ
1(t) also varies over time. 
Table 2.3US carbon efficiencies for fuel types (g/kWh) [53, 142]WindSolarNuclearCoalGasImportsHydro22.5461596844056213.5
Table 2.4Table of notationsNotationDescription
t ∈ {1, 2, ..., T}Discrete time slot and billing cycle

Set of multi-tenant data centers

Set of tenants
j ∈ {1, 2, 3, 4}Set of electricity supplies: (1) grid, (2) renewables, (3) generators, (4) batteriesOperatorTenant 
E

j
(t) 
j-th electricity supply
ϕ

j
(t) Carbon efficiency of j-th electricity supply
π(t) Unit electricity price at time t (¢/kWh)

 Unit peak power demand price ($/kW)
γ(t) Power usage effectiveness (PUE)/partial PUE (pPUE)
E(t) Electricity drawn from the grid
E
max
 Peak electricity demand

 Operating budget for a billing cycle
G(t) Operating cost at time t

G
bill
 Total bill for a billing cycle
D(t)
d

i
(t)Original electricity demand without reduction
ΔE(t)
Δe

i
(t)Energy reduction
R(t)
r

i
(t)Reward/compensation received


ɛ(t)Compensation rate offered for pricing approach 
p

i

0
Idle/static server power 
p

I

1
Dynamic server power 

Total number of servers 
m

i

Number of servers switched off 
λ

i

Workload arrival rate 
μ

i

Workload service rate 
ω

i

delay
Performance delay cost 
ω

i

0
Other inconvenience cost, e.g., wear and tear 
h

i
(Δe

i
)Inconvenience cost incurred 
x

i
(t) ∈ {0, 1}Decision variable for winner determination



2.4 Inconvenience to Tenants
Each tenant can reduce its electricity demand via turning servers off which may induce inconveniences or costs. Hence, each tenant is offered a financial reward or compensation to reduce its energy demand. The tenant cost, h

i
(m

i
), is modeled as a monotonically increasing function in terms of the number of servers turned off, m

i
. The cost function can have different forms (e.g., discrete, non-linear, etc.) and each tenant can formulate the most suitable cost function for itself. However, in general, there are two specific types of costs: delay performance cost and server unavailability cost [1, 43, 47, 124].

2.4.1 Delay Performance Cost
Many Internet services hosted in data centers are sensitive to response/delay time. By consolidating workloads and turning off some unused servers, tenants' applications may experience performance degradation causing tenants to violate their Service Level Agreements (SLAs) [1, 43, 47, 124]. The queuing model has been widely used as a reasonable approximation for the actual service process [69, 143].
Using the M/M/1 queue, the average response time of each tenant i's workload is  (2.8)

Furthermore, the delay cost is incurred only when the average delay exceeds a soft threshold, δ

i
th. Thus, we can express the delay cost of tenant i as  (2.9)



2.4.2 Other Costs
In addition to delay performance, tenants experience other inconveniences when turning off servers [1, 43, 124]. These include Tenants take a longer time in response to unexpected traffic spike.Tenants incur wear-and-tear costs switching/toggling servers on and off.

These inconveniences are collectively referred to as other costs. Since the number of turned-off servers is proportional to inconveniences, these costs are modeled as a linearly increasing function m

i
 ⋅ ω

i

0, where ω

i

0 > 0 is a scaling factor.
For tenant i, both the delay performance and other costs can be combined into the total cost of turning off m

i
 servers and reducing energy demand by Δe

i
 as:  (2.10)
where ω

i

delay (e.g., $/ms) and ω

i

0 are monetary weights.



References


1.
Ren, S. & Islam, M. A. (2014, June). Colocation demand response: Why do I turn off my servers? In 11th international conference on autonomic computing (pp. 201-208). Philadelphia, PA: USENIX Association. [Online]. Available: https://​goo.​gl/​DT5tmP.


5.
Ahmed, K., Islam, M. A., & Ren, S. (2015). A contract design approach for colocation data center demand response. In IEEE/ACM international conference on computer-aided design, ser. ICCAD '15 (pp. 635-640). Piscataway, NJ, USA: IEEE Press. [Online]. Available: http://​goo.​gl/​0ZTul9.


7.
Tran, N., Do, C., Ren, S., Han, Z., & Hong, C. (2015, December). Incentive mechanisms for economic and emergency demand responses of colocation datacenters. IEEE Journal on Selected Areas in Communications, 33(12), 2892-2905. [Online]. Available: http://​goo.​gl/​nmU1e8.


32.
Kong, F. & Liu, X. (2014, November). A survey on green-energy-aware power management for datacenters. ACM Computing Surveys, 47(2), 30:1-30:38. [Online]. Available: http://​goo.​gl/​8JaPk1.


43.
Lin, M., Wierman, A., Andrew, L., & Thereska, E. (2011, April). Dynamic right-sizing for power-proportional data centers. In IEEE INFOCOM (pp. 1098-1106). [Online]. Available: http://​goo.​gl/​QoqujE.


46.
Qureshi, A., Weber, R., Balakrishnan, H., Guttag, J., & Maggs, B. (2009). Cutting the electric bill for internet-scale systems. In ACM SIGCOMM Conference on Data Communication, ser. SIGCOMM '09 (pp. 123-134). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​aV7dMs.


47.
Rao, L., Liu, X., Xie, L., & Liu, W. (2010, March). Minimizing electricity cost: Optimization of distributed internet data centers in a multi-electricity-market environment. In IEEE INFOCOM (pp. 1-9). [Online]. Available: http://​goo.​gl/​ccIfXf.


52.
Deng, N., Stewart, C., Gmach, D., Arlitt, M., & Kelley, J. (2012). Adaptive green hosting. In 9th international conference on autonomic computing, ser. ICAC '12 (pp. 135-144). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​Ha9wWT.


53.
Gao, P. X., Curtis, A. R., Wong, B., & Keshav, S. (2012). It's not easy being green. In ACM SIGCOMM conference on applications, technologies, architectures, and protocols for computer communication, ser. SIGCOMM '12 (pp. 211-222). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​izD15u.


67.
Palasamudram, D. S., Sitaraman, R. K., Urgaonkar, B., & Urgaonkar, R. (2012). Using batteries to reduce the power costs of internet-scale distributed networks. In 3rd ACM symposium on cloud computing, ser. SoCC '12 (pp. 11:1-11:14). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​fGH9ts.


69.
Gandhi, A., Harchol-Balter, M., Das, R., & Lefurgy, C. (2009). Optimal power allocation in server farms. In 11th international joint conference on measurement and modeling of computer systems, ser. SIGMETRICS '09 (pp. 157-168). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​HOOx9P.


89.
Verizon. Pricing plan. Verizon Website. [Online]. Available: http://​goo.​gl/​NsyAbu.


90.
Miller, R. (2011, February). Analysis: Colocation pricing trends. Data Center Knowledge Website. [Online]. Available: http://​goo.​gl/​NvOjLl.


91.
PG&E. Pacific gas and electric company. PG&E Website. [Online]. Available: http://​www.​pge.​com/​.


92.
Liu, Z., Wierman, A., Chen, Y., Razon, B., & Chen, N. (2013, June). Data center demand response: Avoiding the coincident peak via workload shifting and local generation. SIGMETRICS Performance Evaluation Review, 41(1), 341-342. [Online]. Available: http://​goo.​gl/​rvenlD.


93.
Wang, C., Urgaonkar, B., Wang, Q., & Kesidis, G. (2014, September). A hierarchical demand response framework for data center power cost optimization under real-world electricity pricing. In IEEE 22nd international symposium on modelling, analysis simulation of computer and telecommunication systems, (MASCOTS) (pp. 305-314). [Online]. Available: http://​goo.​gl/​ootCBH.


122.
Koomey, J. (2011). Growth in data center electricity use 2005 to 2010. Analytics Press, Oakland, CA, Tech. Rep. [Online]. Available: http://​goo.​gl/​efxT61.


123.
Venkatraman, A. (2012, October). Global census shows datacedata power demand grew 63% in 2012. ComputerWeekly.com, Tech. Rep. [Online]. Available: http://​goo.​gl/​boLrWo.


124.
Islam, M., Ren, S., & Wang, X. (2014, November). GreenColo: A novel incentive mechanism for minimizing carbon footprint in colocation data center. In International green computing conference, (IGCC) (pp. 1-8). [Online]. Available: http://​goo.​gl/​f9nr8F.


126.
Zhang, L., Li, Z., Wu, C., & Ren, S. (2015, December). Online electricity cost saving algorithms for co-location data centers. IEEE Journal on Selected Areas in Communications, 33(12), 2906-2919. [Online]. Available: http://​goo.​gl/​45QUdf.


127.
Chen, N., Ren, X., Ren, S., & Wierman, A. (2015, September). Greening multi-tenant data center demand response. SIGMETRICS Performance Evaluation Review, 43(2), 36-38. [Online]. Available: http://​goo.​gl/​HmcRnU.


128.
Zhang, L., Ren, S., Wu, C., & Li, Z. (2015, April). A truthful incentive mechanism for emergency demand response in colocation data centers. In IEEE INFOCOM, Hong Kong, China (pp. 2632-2640). [Online]. Available: http://​goo.​gl/​9KqeBv.


129.
Brady, G. A., Kapur, N., Summers, J. L., & Thompson, H. M. (2013, December). A case study and critical assessment in calculating power usage effectiveness for a data center. Energy Conversion and Management, 76, 155-161. [Online]. Available: http://​goo.​gl/​Gtt3M1.


130.
Yuventi, J. & Mehdizadeh, R. (2013, September). A critical analysis of power usage effectiveness and its use in communicating data center energy consumption. Energy and Buildings, 64, 90-94. [Online]. Available: http://​goo.​gl/​jQli1H.


131.
Tesla Energy. Website. [Online]. Available: https://​goo.​gl/​4AjjgC.


132.
Emerson. Liebert DSE Precision Cooling System. Website. [Online]. Available: http://​goo.​gl/​nUEeen.


133.
Xu, H., Feng, C., & Li, B. (2015, June). Temperature aware workload management in geo-distributed data centers. IEEE Transactions on Parallel and Distributed Systems, 26(6), 1743-1753. [Online]. Available: http://​goo.​gl/​lsVqho.


134.
Duke Energy Progress North Carolina Rates & Tariffs. Duke Energy Website. [Online]. Available: http://​www.​duke-energy.​com/​.


135.
BC Hydro. Website. [Online]. Available: https://​www.​bchydro.​com/​.


136.
Georgia Power: Electric Service Tariff. Website.


137.
Mid American Energy Electric Tariffs. Website. [Online]. Available: https://​goo.​gl/​iOGMmw.


138.
Fan, X., Weber, W.-D., & Barroso, L. A. (2007). Power provisioning for a warehouse-sized computer. In 34th annual international symposium on computer architecture, ser. ISCA '07 (pp. 13-23). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​SLA9l8.


139.
Deliso, R. (2013, August). Understanding peak demand charges. Website. [Online]. Available: http://​goo.​gl/​BP1BO5.


140.
Califonia ISO. Califonia ISO Website. [Online]. Available: http://​www.​caiso.​com/​.


141.
U.S. Department of Energy. DoE Website. [Online]. Available: http://​energy.​gov/​.


142.
Spadaro, J. V., Langlois, L., & Hamilton, B. (2000, February). Greenhouse gas emissions of electricity generation chains: Accessing the difference. IAEA Bulletin. [Online]. Available: https://​goo.​gl/​qGo6Io.


143.
Liu, Z., Lin, M., Wierman, A., Low, S. H., & Andrew, L. L. (2011, December). Geographical load balancing with renewables. SIGMETRICS Performance Evaluation Review, 39(3), 62-66. [Online]. Available: http://​goo.​gl/​y9BaEl.











Part IISustainable Multi-Tenant Data Center










© Springer International Publishing AG 2018

Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers


https://doi.org/10.1007/978-3-319-66062-2_3





3. Background



Thant Zin Oo1 , 
Nguyen H. Tran1, 
Shaolei Ren2 and 

Choong Seon Hong
1




(1)
Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)


(2)
Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, CA, USA

 



Abstract
Multi-tenant data center has become large energy consumers due to the increasingly popular cloud computing services. However, their efficiency is lower that of owner-operated data centers. This is due to the split incentives of the stakeholders, i.e., the operator and its tenants, are not aligned. This part of the book explains the motivations, issues, and challenges. Then, it surveys the formulated problems and corresponding proposed solutions.


Keywords
Multi-tenant data center
Sustainability
Pricing
Randomized auction




3.1 Motivation
Cloud computing services and user generated data have been growing exponentially [9-11]. Taking advantage of the economy of scale, more large-scale data centers are built to meet the computing demand. As a consequence, the electricity demand and its associated carbon footprint of data centers have been increasing [11, 122].
Consequently, numerous efforts have been made to improve the "greenness" of data centers, including energy usage and carbon footprint reduction [43, 53, 55, 57], carbon-neutral capacity provisioning and VM resource allocation [144-147], thermal-aware scheduling and cooling optimization [148-150], and joint design of pricing and scheduling in cloud computing [151-154]. However, these works only consider owner-operated data centers and largely overlook multi-tenant data centers, which are an integral part of the data center industry. Furthermore, the expected growth of the multi-tenant data center market foretells an increase in associated electricity consumption and carbon footprint [9, 30, 31, 121]. This expected growth is further facilitated by simplified management and scalability of recent modular data center design where the operator only needs to plug-and-play a few extra pods to accommodate a new tenant. In addition, multi-tenant data center model is generic since owner-operated data centers can be seen as multi-tenant data centers with a single tenant.
Hence, we survey and compile works that address efficiency in terms of economic and environmental perspectives of multi-tenant data centers [124-126]. For instance, consider a multi-tenant data center located in British Columbia, Canada, powered by BC Hydro with 24 MW peak demand and 15 MW average demand, as shown in Table 2.​2 In this case, the peak charge accounts for 31% of the total monthly payment of US$763,680. Under the same consumption pattern as in the British Columbia case, the peak charge of a multi-tenant data center located in Georgia accounts for 87% of the total monthly payment of US$466,933. This suggests that a well designed algorithm for shaping the power consumption profile and controlling the peak demand has great potential to help reduce electricity cost and carbon footprint for a multi-tenant data center.



3.2 Issues
The major issue of the multi-tenant data center is the "split incentive" between the operator and its tenants. The operator has no direct control on which servers are on/of since its role is to provide basic services such as power supply and cooling. The individual tenants manage their own servers and control the corresponding power consumption. On the one hand, the data center operator has a strong incentive to reduce peak consumption and therefore reduce cost and carbon footprint. On the other hand, its tenants may or may not share that same interest, depending on the contract between the two sides [53, 90, 155]. The tenants have little or no incentive to reduce their electricity usage by shutting down under-utilized servers or by modulating their consumption pattern via shifting computing jobs in the temporal domain to reduce peak consumption rate. To solve the "split incentive" problem, [124-126] proposed mechanisms on how to reduce carbon footprint subject to the operator's cost constraint. By providing (monetary) incentives or rewards to tenants, [124-126] align the interests of the operator and tenants, allowing coordinated power management for "greenness."


3.3 Challenges
As adopted by many prior studies [52, 57, 97, 146], we consider "greenness" as capping the "brown" energy (i.e., carbon-intensive electricity usage). The objective is to cap the long-term brown energy consumption. The time period of interest (e.g., a billing cycle) is divided into multiple time slots, each corresponding to one decision epoch (e.g., 5 min) to account for tenants' time-varying workloads. There are two major challenges in providing incentives to tenants: uncertainty and on-line coordination of power management.


3.4 Uncertainty
There are many time-varying dynamic variables, for example, grid electricity price, grid carbon efficiency, pPUE, on-site renewable sources, tenant's electricity demand, and reduction. Moreover, they are inter-dependent, and the multi-tenant data center operator has no control over them. The operator must balance the energy demand with supply, and these uncertainties exacerbate the problem. The operator must predict these possibly highly dynamic variables since they are not provided by the grid or tenants. Hence, the challenge is how to accurately predict the uncertain variables necessary in coordinated power management.


3.5 On-line Coordination
Another major challenge is the on-line nature of the problem. The objective is to make an optimal decision over a billing cycle. However, at time t, the operator cannot know the future information in advance. The challenge is further exacerbated by the fact that a major portion of the multi-tenant data center's electricity cost is peak power demand charge [50, 91-94]. Thus, the challenge is how to coordinate power management on-line without a priori knowledge of future information.


References


9.
Data Center Colocation Market by Service Types (Retail, Wholesale), Industry Verticals (Banking & Insurance, IT & Telecom, Healthcare, Government & Public, Energy), End Users (SMEs, Large Enterprises) & by Regions - Global Forecast to 2020. (2016, January). Research and markets, Tech. Rep. [Online]. Available: http://​goo.​gl/​GA3mwG.


11.
Shehabi, A., Smith, S. J., Sartor, D. A., Brown, R. E., Herrlin, M., Koomey, J. G., et al. (2016, June). United States Data Center Energy Usage Report. [Online]. Available: http://​goo.​gl/​Y93L9t.


30.
Barroso, L. A., Clidaras, J., & Hoelzle, U. (2013). In M. D. Hill (Ed.), The datacenter as a computer: An introduction to the design of warehouse-scale machines (2nd ed.). San Rafael, CA: Morgan and Claypool Publishers. [Online]. Available: http://​goo.​gl/​GPHC3U.


31.
Telegeography Website. [Online]. Available: https://​www.​telegeography.​com/​.


43.
Lin, M., Wierman, A., Andrew, L., & Thereska, E. (2011, April). Dynamic right-sizing for power-proportional data centers. In IEEE INFOCOM (pp. 1098-1106). [Online]. Available: http://​goo.​gl/​QoqujE.


50.
Xu, H. & Li, B. (2014). Reducing electricity demand charge for data centers with partial execution. In 5th international conference on future energy systems, ser. e-Energy '14 (pp. 51-61). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​Li8eq5.


52.
Deng, N., Stewart, C., Gmach, D., Arlitt, M., & Kelley, J. (2012). Adaptive green hosting. In 9th international conference on autonomic computing, ser. ICAC '12 (pp. 135-144). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​Ha9wWT.


53.
Gao, P. X., Curtis, A. R., Wong, B., & Keshav, S. (2012). It's not easy being green. In ACM SIGCOMM conference on applications, technologies, architectures, and protocols for computer communication, ser. SIGCOMM '12 (pp. 211-222). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​izD15u.


55.
Le, K., Bianchini, R., Zhang, J., Jaluria, Y., Meng, J., & Nguyen, T. D. (2011). Reducing electricity cost through virtual machine placement in high performance computing clouds. In International conference for high performance computing, networking, storage and analysis, ser. SC '11 (pp. 22:1-22:12). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​rZ5eyU.


57.
Zhang, Y., Wang, Y., & Wang, X. (2011). GreenWare: Greening cloud-scale data centers to maximize the use of renewable energy. In 12th ACM/IFIP/USENIX international conference on middleware, ser. Middleware'11 (pp. 143-164). Berlin/Heidelberg: Springer. [Online]. Available: http://​goo.​gl/​3zAgMu.


90.
Miller, R. (2011, February). Analysis: Colocation pricing trends. Data Center Knowledge Website. [Online]. Available: http://​goo.​gl/​NvOjLl.


91.
PG&E. Pacific gas and electric company. PG&E Website. [Online]. Available: http://​www.​pge.​com/​.


94.
Yao, J., Liu, X., He, W., & Rahman, A. (2012, June). Dynamic control of electricity cost with power demand smoothing and peak shaving for distributed internet data centers. In IEEE 32nd international conference on distributed computing systems (pp. 416-424). [Online]. Available: http://​goo.​gl/​15pNSh.


97.
Le, K., Bianchini, R., Nguyen, T., Bilgir, O., & Martonosi, M. (2010, August). Capping the brown energy consumption of internet services at low cost. In International green computing conference (pp. 3-14). [Online]. Available: http://​goo.​gl/​mvrGSQ.


121.
Data Center Map: Colocation, U.S.A.. Data Center Map Website. [Online]. Available: http://​goo.​gl/​JkV6tg.


122.
Koomey, J. (2011). Growth in data center electricity use 2005 to 2010. Analytics Press, Oakland, CA, Tech. Rep. [Online]. Available: http://​goo.​gl/​efxT61.


124.
Islam, M., Ren, S., & Wang, X. (2014, November). GreenColo: A novel incentive mechanism for minimizing carbon footprint in colocation data center. In International green computing conference, (IGCC) (pp. 1-8). [Online]. Available: http://​goo.​gl/​f9nr8F.


126.
Zhang, L., Li, Z., Wu, C., & Ren, S. (2015, December). Online electricity cost saving algorithms for co-location data centers. IEEE Journal on Selected Areas in Communications, 33(12), 2906-2919. [Online]. Available: http://​goo.​gl/​45QUdf.


144.
Islam, M., Ren, S., & Quan, G. (2013, August). Online energy budgeting for virtualized data centers. In IEEE 21st international symposium on modeling, analysis simulation of computer and telecommunication systems, (MASCOTS) (pp. 424-433). [Online]. Available: http://​goo.​gl/​aCBIf3.


146.
Mahmud, A. H. & Ren, S. (2013, June). Online resource management for data center with energy capping. In 8th international workshop on feedback computing. San Jose, CA: USENIX.


147.
Ren, S. & He, Y. (2013, November). COCA: Online distributed resource management for cost minimization and carbon neutrality in data centers. In International conference for high performance computing, networking, storage and analysis (pp. 1-12).


148.
Islam, M. A., Ren, S., Pissinou, N., Mahmud, H., & Vasilakos, A. V. (2013, June). Distributed resource management in data center with temperature constraint. In International green computing conference, iGCC'13 (pp. 1-10).


150.
Polverini, M., Cianfrani, A., Ren, S., & Vasilakos, A. (January 2014). Thermal-aware scheduling of batch jobs in geographically distributed data centers. IEEE Transactions on Cloud Computing, 2(1), 71-84. [Online]. Available: http://​goo.​gl/​hBZ5z6.


151.
Liu, S., Ren, S., Quan, G., Zhao, M., & Ren, S. (2013). Profit aware load balancing for distributed cloud data centers. In International parallel and distributed processing symposium (pp. 611-622). [Online]. Available: https://​goo.​gl/​AQbgeV.


154.
Ren, S. & van der Schaar, M. (2014, October) Dynamic scheduling and pricing in wireless cloud computing. IEEE Transactions on Mobile Computing, 13(10), 2283-2292.


155.
Qureshi, A., Weber, R., Balakrishnan, H., Guttag, J., & Maggs, B. (2009, August). Cutting the electric bill for internet-scale systems. SIGCOMM Computer Communication Review, 39(4), 123-134. [Online]. Available: http://​goo.​gl/​lux454.














© Springer International Publishing AG 2018

Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers


https://doi.org/10.1007/978-3-319-66062-2_4





4. System Model



Thant Zin Oo1 , 
Nguyen H. Tran1, 
Shaolei Ren2 and 

Choong Seon Hong
1




(1)
Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)


(2)
Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, CA, USA

 



Abstract
Multi-tenant data center has become large energy consumers due to the increasingly popular cloud computing services. However, their efficiency is lower that of owner-operated data centers. This is due to the split incentives of the stakeholders, i.e., the operator and its tenants, are not aligned. This part of the book explains the motivations, issues, and challenges. Then, it surveys the formulated problems and corresponding proposed solutions.


Keywords
Multi-tenant data center
Sustainability
Pricing
Randomized auction



We consider a multi-tenant data center hosting a set of tenants . The billing cycle of the multi-tenant data center can be divided into T time slots, i.e., t ∈ {1, 2, ..., T}. Other key performance indicators (KPIs) and metrics are mentioned in Chap. 2


4.1 Problem Formulation
We can formulate the green multi-tenant data center problem in two possible ways [124-126].

4.1.1 Minimizing the Operating Cost
In the first approach, we minimize the operating cost subject to a brown energy usage budget, i.e.,  (4.1a)
 (4.1b)
 (4.1c)
 (4.1d)
where γ(t) denotes the PUE, x

i
(t) ∈ {0, 1} denotes the decision variable for the bid of tenant i, Δe

i
(t) denotes electricity demand that tenant i is willing to reduce, D(t) denotes the total electricity demand of data center without reduction, and E(t) denotes the electricity the data center has to buy from the grid. E
max is the maximum of E(t) over time, i.e., . Furthermore, π(t) denotes the price for volume of electricity (i.e., $/kWh),  denotes the price for peak power demand (i.e., $/kW), and r

i
(t) denotes the monetary reward submitted by tenant i.


4.1.2 Minimizing the Energy Consumption
In the second approach, we minimize the long-term brown energy consumption subject to a billing budget constraint, i.e.,  (4.2a)
 (4.2b)
where E

j
(t) denotes electricity supply j, ϕ

j
(t) denotes the corresponding carbon footprint, G(t) denotes net operating cost of data center, and  denotes the operating budget for a billing cycle. Moreover, j ∈ {1, 2, 3, 4} corresponds to electricity grid, on-site renewable sources (i.e., solar PV or wind turbines), on-site generators, and on-site batteries, respectively. Each tenant submits amount of electricity it is willing to reduce, Δe

i
(t) and the corresponding expected reward, r

i
(t) to the operator. The detailed explanations are presented in Chap. 2

Equation (4.2) focuses on an environmental perspective with a given budget of multi-tenant data center for a billing cycle [124]. The intuition is to reduce the carbon footprint whenever possible as long as the budget constraint for the billing cycle is met. Furthermore, (4.2) considers only the volume of electricity consumption since the total carbon emission of multi-tenant data center is directly proportional to its energy consumption. This intrinsically conveys that the multi-tenant data center takes responsibility for its own carbon footprint where the utility does not charge peak demand, i.e., . On the other hand, more environmental or efficiency conscious utilities charge for peak demand which is designed to reduce carbon footprint via market dynamics, i.e., . Equation (4.1) addresses this scenario and focuses on reducing its operational cost subject to an upper limit on brown electricity consumption in a billing cycle [125, 126].



References


124.
Islam, M., Ren, S., & Wang, X. (2014, November). GreenColo: A novel incentive mechanism for minimizing carbon footprint in colocation data center. In International green computing conference, (IGCC) (pp. 1-8). [Online]. Available: http://​goo.​gl/​f9nr8F.


125.
Islam, M., Mahmud, H., Ren, S., & Wang, X. (2015, February). Paying to save: Reducing cost of colocation data center via rewards. In IEEE 21st international symposium on high performance computer architecture, (HPCA) (pp. 235-245). [Online]. Available: http://​goo.​gl/​G6zoeJ.


126.
Zhang, L., Li, Z., Wu, C., & Ren, S. (2015, December). Online electricity cost saving algorithms for co-location data centers. IEEE Journal on Selected Areas in Communications, 33(12), 2906-2919. [Online]. Available: http://​goo.​gl/​45QUdf.














© Springer International Publishing AG 2018

Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers


https://doi.org/10.1007/978-3-319-66062-2_5





5. Solutions



Thant Zin Oo1 , 
Nguyen H. Tran1, 
Shaolei Ren2 and 

Choong Seon Hong
1




(1)
Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)


(2)
Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, CA, USA

 



Abstract
Multi-tenant data center has become large energy consumers due to the increasingly popular cloud computing services. However, their efficiency is lower that of owner-operated data centers. This is due to the split incentives of the stakeholders, i.e., the operator and its tenants, are not aligned. This part of the book explains the motivations, issues, and challenges. Then, it surveys the formulated problems and corresponding proposed solutions.


Keywords
Multi-tenant data center
Sustainability
Pricing
Randomized auction



The solutions for (4.1) and (4.2) must address the previously mentioned challenges of uncertainty and on-line coordination. The authors of [124-126] advocate a reward-based incentive mechanism that can be either the pricing approach [125, 126] or the auction approach [124, 126]. The tenants' participation is voluntary and not enforced. The procedures for the pricing and auction approaches are similar and involve three simple steps, as shown in Fig. 5.1. The difference between the two approaches is that the pricing approach has a fixed unit price for incentives across all tenants, whereas the auction approach uses different unit prices for tenants' incentives.Fig. 5.1Steps in coordinated power management: pricing approach (PA) and auction approach (AA)

Although the procedure involved is simple, the optimal solution for (4.1) or (4.2) cannot be easily achieved. The objective of the operator is to optimize (4.1) or (4.2) in these three steps. This requires the operator to accurately predict how tenants would respond to the offered incentive or solicitation of bids; however, in reality, tenants' response information cannot be known a priori and is also time varying.

Pricing Approaches 
For multi-tenant data centers, a reward-based pricing mechanism is more suitable than the widely studied dynamic pricing models (e.g., in smart grid [156]) where all tenants are forced to participate. There are three basic steps in the pricing approach, as shown in Fig. 5.1. First, the operator proactively offers a reward rate (price) $/kWh for tenants' energy reduction. Second, tenants voluntarily decide whether or not to reduce energy. Third, participating tenants receive rewards for energy reduction (upon verification using power meters), while non-participating tenants are not affected. When offered a reward, participating tenants can apply various energy saving techniques [40, 43, 157]. We present two similar yet different pricing approaches in detail in Sect. 5.1 [125] and Sect. 5.3 [126, Sect. IV].

Auction Approaches 
In auction approaches [124], [126, Sect. V], the operator conducts a reverse auction (i.e., procurement auction), as shown in Fig. 5.1. First, the operator requests bids from its tenants. Since the request is voluntary, its tenants can choose not to participate. Second, each participating tenant submits a bid that includes the amount of energy to shed and the amount of remuneration demanded. Since only the individual tenants can control their servers, they are responsible for calculating the number of servers to turn off in the upcoming time slot. Third, the operator then conducts a reverse auction to determine winning bids along with their corresponding payments. This includes solving an on-line optimization problem and then notifying the tenants of the bidding outcome. If its bid is accepted, the tenant will turn off its servers to shed power as specified in the bid and will receive the corresponding payment from the operator. Power metering tools in multi-tenant data center can be leveraged to verify that servers are turned off.

5.1 Reducing Cost via Rewards
Islam et al. considered problem (4.1) and proposed a pricing approach named Reducing Cost via Rewards (RECO) [125]. To solve (4.1), the authors need to know the peak power demand, E
max during a billing cycle. However, the peak power demand can only be determined at the end of a billing cycle and it cannot be perfectly known at runtime. Hence, RECO keeps track of the peak power demand value, Q

j
(t), which indicates the j-th type of peak power demand up to the beginning of time slot t. Intuitively, if the new power demand in the upcoming time slot is expected to exceed Q

j
(t), the operator needs to offer a higher reward rate to better encourage tenants' energy saving for reducing demand charge. The operator updates Q

j
(t) on-line, if time t belongs to the time interval for type-j peak power demand, as follows:  (5.1)
where  is the average power demand during time t. The tracked power demand value Q

j
(t) serves as a feedback value to determine whether it is necessary for the operator to offer a high reward rate, ɛ(t), to reduce the peak power demand.

5.1.1 Feedback-Based On-Line Optimization
Next, the original off-line problem (4.1) is broken down into an on-line optimization problem for each time slot as follows:  (5.2)
where  indicates the type j peak demand charge (e.g., 10 $/kW [50, 92, 158]) and  indicates whether the new predicted power demand during t will exceed the currently tracked value of Q

j
(t) for type-j demand charge, and  is the indicator function equal to one if and only if time t falls into the time interval  for type-j demand charge.
At the beginning of each time slot t, RECO takes the tracked peak power demand Q

j
(t), electricity price π(t), predicted tenants' response function and on-site electricity generation as inputs, and yields the reward rate ɛ(t) in $/kW by solving (5.2). At the end of each time slot, RECO updates the peak demand queues Q

j
(t) using the actual power consumption. RECO also records the actual response of the tenants to the reward d(t), and updates the corresponding response function with the new observation. The whole process is repeated until the end of a billing cycle. We summarize the procedure of RECO in each time slot as follows:
1.Inputs: tracked peak power demand, Q

j
(t),predicted tenants' response function (i.e., electricity reduction),the electricity price π(t).
 2.Solve the optimization problem (5.2) to obtain the reward rate ɛ(t). 3.Measure actual total energy reduction, ΔE(t). 4.Measure on-site electricity storage and generations, E

j
(t),  j ∈ {2, 3, 4}. 5.Update peak power demand Q

j
(t) using (5.1). 6.Update tenants' response function {ɛ(t), Δe

i
(t)}. 

On the operator side, RECO can be implemented as a complementary/additional control module alongside any existing control systems (e.g., cooling control). Tenants, on the other hand, only need a very lightweight software to communicate with the operator for receiving the reward rate on-line. Upon receiving the reward information, tenants can decide at their own discretion whether and how to reduce energy subject to SLA for rewards.


5.1.2 Simulation and Results
The authors performed a trace-based simulation to evaluate RECO [125]. The authors consider a multi-tenant data center located in San Francisco, California (a major market serving Silicon Valley) [121].

5.1.2.1 Simulation Settings
The data center has 15 tenants, each having 2000 servers and a peak power subscription of 500 kW. The traces used in the simulation can be found in [125] and the references therein. The authors use a discrete-time simulator which simulates the operator's decision and tenants' responses at runtime. The simulations are done for 1 year and each time slot is 15-min, matching PG&E's peak power demand accounting [91].
Two benchmarks are considered to compare RECO with. 
BASELINE: In this case, the multi-tenant data center does not offer any rewards and the tenants keep all their servers running. This is equivalent to power-based pricing.
Electricity price-based reward (EPR): In this case, the operator directly offers electricity price as reward, without accounting for time-varying cooling efficiency or on-site electricity generation. This is equivalent to energy-based pricing.



5.1.2.2 Tenants' Response
Upon receiving the reward information, as shown in Fig. 5.2, tenants can voluntarily choose their power management, depending on workloads and Service Level Agreements (SLAs). The authors assume that tenants will dynamically switch off servers (a variant of AutoScale [40]) while ensuring that their active servers' utilization will not exceed 50% for satisfying SLA. To model the decision making of tenants, the authors use the Sigmoid function  (5.3)
for tenants' response where ɛ is the reward rate chosen by the operator, κ is the annealing factor, and k
1, k
2 are constants. As shown in Fig. 5.3, the Sigmoid function exhibits two interesting properties: (1) given a low reward, tenants are reluctant to commit energy reduction; and (2) when the energy reduction approaches their maximum possible amount, tenants become less willing to reduce resource provisioning and energy. Fig. 5.2On-line coordination of power management using feedback control
Fig. 5.3Response function for a day's first time slot



5.1.2.3 Simulation Results
The operator runs RECO to minimize the cost by optimally choosing the reward rate based on the response function. Due to the prediction error (as shown by error bar in Fig. 5.3), the actual energy reduction may be different from the predicted value. However, Fig. 5.4 shows that the average deviation between the actual and predicted energy reduction for the whole year is less than 1%. Fig. 5.4Predicted and actual power reduction

Figures 5.5 and 5.6 show a snapshot of the multi-tenant data center's grid power consumption and reward rates, respectively. In Fig. 5.5, we see that BASELINE has the highest grid power consumption because tenants have no incentives to reduce electricity consumption. In contrast, RECO and EPR provide incentives to the tenants which reduce their electricity consumption saving 41% and 54% of average power consumption, respectively, compared to BASELINE. Figure 5.6 shows the reward rates provided to tenants by the operator. Since RECO is optimizing the reward rate to minimize the operator's cost, we observe that RECO offers lower reward rates (average 7 cent/kWh) compared to EPR (average 9.7 cent/kWh). Although providing a higher reward will increase energy reduction, the corresponding reward cost will increase the overall cost incurred by the operator. Hence, power consumption of RECO is higher than EPR, but the overall cost is reduced.Fig. 5.5Grid power with different algorithms
Fig. 5.6Reward rates with different algorithms

Figures 5.7 and 5.8 show the cost savings of EPR and RECO, compared to BASELINE that offers no reward, respectively. The error bars in Fig. 5.8 represent the range of tenants' cost savings. We see that RECO has a more than 19% cost saving compared to BASELINE, while reaching up to 27% during the summer months. The increased cost savings during summer months are because PG&E has higher energy and demand charges during summer, thus increasing the potential of cost saving via rewards. In contrast, EPR has a cost saving of around 15% during winter and 20% during summer. While RECO—saves more than EPR in terms of operator's costs, it gives less reward to tenants and keeps some energy cost saving for the operator. Nonetheless, tenants can still save an average of more than 15% of their costs. Fig. 5.7Average monthly cost savings for the operator
Fig. 5.8Average monthly cost savings for the tenants

To demonstrate that RECO can adapt to large changes in tenants' power management, the value of κ in Sigmoid function is increased for all the tenants' responses at the start of May, making the tenants less willing to reduce energy. Then, κ is changed back to its initial value at the start of September. Figure 5.9 shows the impact caused by the sudden changes in tenants' behaviors on the response function. The sudden spikes in energy reduction prediction errors can be seen when the changes occur, and then the error gradually goes down, showing the adaptability of RECO. The similar pattern occurs again when the response setting is changed back to its initial value. Positive prediction error indicates over-prediction of energy reduction, while negative prediction error indicates under-prediction. It can also be observed that higher reward rate is offered when the tenants become less willing to participate in RECO. However, as shown in Fig. 5.10, the tenants also have lower savings when they are less willing to reduce energy and correspondingly, cost saving for the operator also decreases.Fig. 5.9Prediction error in energy reduction and reward rate
Fig. 5.10Monthly cost savings for the operator and tenants

Next, the authors run simulations on traces of multi-tenant data centers in different locations. Figures 5.11 and 5.12 show cost savings by RECO and EPR, compared to BASELINE, in different US multi-tenant data center markets. The error bar indicates the range of different tenants' cost savings. The results are consistent with the previous findings shown in Figs. 5.5, 5.6, 5.7, 5.8. By using RECO, the operator achieves the lowest cost, while tenants are also able to save some costs. The variations in cost savings across locations are mainly because of the location-specific electricity rates and multi-tenant data center rental rates.Fig. 5.11Cost savings in different locations for the operator
Fig. 5.12Cost savings in different locations for the tenants




5.1.3 Experiment
The authors build a prototype to demonstrate that RECO can effectively reduce the multi-tenant data center's (a.k.a. colocation) cost by more than 10%. The tenants can save their colocation rental cost without violating SLAs, while the colocation can save on both energy and demand charges.

5.1.3.1 Colocation Testbed

Hardware: The authors construct a scaled-down test bed with five Dell PowerEdge R720 rack servers. Each server has one Intel Xeon E5-2620 Processor with 6-cores, 32 GB RAM, and four 320 GB hard drives in RAID 0 configuration. One server (called "I/O Server") is equipped with a second processor and four additional hard disks, and used to host the database VMs. The authors use Xen Server 6 as the virtualization platform and Ubuntu Server 12.04.4 as the hosted operating system in each VM. As a rule of thumb, at least one physical core is allocated to each VM. The authors use a separate HP tower server to implement RECO and communicate with tenants using Java sockets. WattsUp Pro power meters are used to monitor power consumption of the tenants' Dell PowerEdge servers.

Tenants: The prototype has two tenants, one running delay-tolerant Hadoop jobs and the other one processing key-value store (KVS) workload which resembles a realistic multi-tiered website such as social networking. The Hadoop system is built on 12 VMs hosted on two servers. The authors configure 11 worker nodes and 1 master node for the Hadoop system. A custom control module is used to consolidate and/or reconfigure the Hadoop servers to trade performance for energy. For Hadoop workload, the authors perform sort benchmark on randomly generated files of different sizes using Random-TextWriter (Hadoop's default).
The implementation of KVS workloads has four tiers: frontend load balancer, application, memory cache, and database. The load balancer receives jobs from the generator and routes the requests to the application servers. The application tier processes the key and sends request to back-end database to get values. The back-end database is implemented in two tiers: replicated memory cache and database. The authors use three Memcached VMs and three database VMs, and put them in the I/O server. There are 15 application VMs in total (12 on two application servers and the other three on the I/O server). There are 100 million key-value entries in the database, and each key-value request returns multiple keys and the process repeats until the exit condition (e.g., number of iteration) is met. The KVS tenant can reconfigure the cluster and switch off up to two application servers (hosting 12 application VMs) to reduce energy.

Other settings: The workload traces from Microsoft Research (MSR) are used as Hadoop workloads [159], and Gmail workload traces are used as KVS workloads [160]. Figure 5.13 shows the workload traces of the tenants normalized to their maximum processing capacity. Length of each time slot in the experiment is set to 15 min, and the experiment is run for 192 time slots (48 h). The authors use the electricity price of PG&E [91]. Due to the relatively short experiment, RECO is considered to have already learned the response function before the experiment starts. Due to prototype's limitation, cooling efficiency or availability of solar energy is not considered. Fig. 5.13Workload traces normalized to maximum capacity



5.1.3.2 Tenants' Response
The Hadoop tenant has a SLA on job's maximum completion time of 15 min, while the KVS tenant has a SLA of 500 ms on the 95% delay. Each server is set to have three power states: high speed (H), low speed (L), and deep sleep/shut down (Z). High and low speed settings correspond to all CPU cores running at 2 and 1.2 GHz, respectively. There are five combinations of power states for the Hadoop tenant with two servers, and the authors index the power states from 0 to 4. The KVS tenant with three servers also has five possible power states, since the database server hosting the Memcached and database VMs are kept unchanged. The first two servers are application servers and the last one is the I/O server. Note that, power state 0 corresponds to lowest speed and thus maximum energy reduction, while power state 4 means the system is running at its maximum capacity. Figures 5.14 and 5.15 show tenants' processing capacities subject to SLA constraints under different power states. Note that power state 3 for both tenants has a lower processing capacity but consumes more power. Fig. 5.14Processing capacity under different power states for Hadoop tenant
Fig. 5.15Processing capacity under different power states for KVS tenant

Figure 5.16 shows the energy consumption of the Hadoop tenant during a time slot. The same file consumes more energy when processed in a higher power state, indicating a waste of energy when the system has a low workload. Large files (e.g., 4 GB) cannot be processed at low power states because of the SLA constraint. Figure 5.17 shows the energy consumption by KVS tenant's servers for different request rates. Similar to that of Hadoop tenant, low request rates can be processed at a low power state with low energy consumption, while high request rates (e.g., 60 requests/s) require the use of higher power states and also more energy. The key observation in Figs. 5.16 and 5.17 is the energy saving opportunity for processing workloads subject to SLA.Fig. 5.16Energy consumption under different power states for Hadoop tenant
Fig. 5.17Energy consumption under different power states for KVS tenant

Figures 5.18 and 5.19 show the tenants' response to different rewards under different workload conditions. Because of less capacity but more power/energy at power state 3, tenants do not use this state. Because of SLAs, tenants cap their energy reduction given high incoming workloads and do not run their systems in very low power states (thus low capacity). The KVS tenant can use power state 0 for non-zero workloads, because it has three application VMs hosted on the I/O server that is always on. Fig. 5.18Response to reward under different workloads for Hadoop tenant
Fig. 5.19Response to reward under different workloads for KVS tenant



5.1.3.3 Experimental Results
First, the performance of the tenants' workloads is compared in Figs. 5.20, 5.21, 5.22. Both tenants can reduce energy without SLA violation, showing the potential of RECO in real-life systems. Figure 5.22 shows the energy consumption, demonstrating that RECO and EPR have a significantly lower energy consumption compared to BASELINE. In some time slots, EPR has lower energy consumption than RECO, because EPR provides a higher reward equal to electricity price. Fig. 5.20Job completion time for Hadoop tenant
Fig. 5.2195% delay of KVS tenant
Fig. 5.22Energy consumption of different algorithms

Throughout the evaluation, the focus is on the comparison of the operator's cost (including energy cost, peak power demand cost, and reward cost if applicable).1 Figure 5.23 shows the operator's total cost for different algorithms. As the experiment is run for 48 h, the monthly demand charge by PG&E is scaled down to 48 h based on a pro-rated charge. RECO has the lowest total cost. BASELINE does not incur any reward cost, but has significantly higher energy and demand costs. EPR has the lowest energy and demand charges, but gives a significant portion of the cost saving as reward, thus resulting a total cost higher than RECO.Fig. 5.23The operator's cost under different algorithms

Figure 5.24 shows the total cost savings of the operator and tenants by using RECO and EPR compared to BASELINE. RECO has more than 10% cost saving, and the Hadoop tenant and KVS tenant save 6.5% and 3.5% of their colocation rental cost,2 respectively. EPR only saves less than 3% of the total cost for the operator, although both tenants save around 10% of their rental costs.





5.2 Minimizing Carbon Footprint in Colocation Data Center (GreenColo)
Islam et al. proposed an auction-based approach called GreenColo in [124]. The authors consider the environmental perspective and choose to solve (4.2) which is to decide winning bids to keep the long-term operational cost of the multi-tenant data center under budget. At the end of a billing cycle (e.g., a month), with the benefit of hindsight, the operator has complete information (e.g., tenants' bids, electricity price, carbon efficiency, time-varying fuel mixes, availability of on-site renewable sources, etc.). However, this information is not available during the decision point in a billing cycle.
To address the lack of information, the authors proposed an on-line algorithm called GreenColo based on Lyapunov technique [161]. GreenColo replaces the constraint (4.2b) by introducing a dynamic virtual budget deficit queue. This decouples the long-term optimization decisions and present an approximate on-line problem formulation with a bounded deviation from optimal off-line solution. Hence, GreenColo only requires the currently available solution and approximates solves (5.4).  (5.4)
where V is the carbon parameter, and q(t) is the virtual budget deficit queue which is given as:  (5.5)
The queue length q(t) indicates the multi-tenant data center's operational cost surplus over the allocated budget thus far [161]. Equation (5.5) tracks the runtime deviation from the desired long-term budget target. The queue acts as the weighting parameter for cost saving relative to carbon reduction. A positive queue length implies that the operator incurs a higher cost than the budgeted amount. Hence, the queue length grows and pushes the optimization problem (5.4) towards cost saving in consecutive time slots to mitigate the budget deficit. Hence, the budget deficit queue dynamically guides on-line winning bids decision towards satisfying the long-term budget constraint. The carbon parameter V governs the impact of queue length on the optimization outcome. A larger V causes the queue length to have less impact on the optimization, and thus, the potential deviation from long-term budget may be larger and mitigated over a greater number of time slots, and vice versa. We summarize the procedure of GreenColo as follows:
1.Inputs: for each tenant i, the number of servers to turn off, m

i
(t),the amount of electricity demand to reduce, Δe

i
(t),the reward requested for reduction, r

i
(t),the carbon footprints, ϕ

j
(t),  j ∈ {1, 2, 3, 4},the electricity price π(t), andon-site electricity storage and generations, E

j
(t),  j ∈ {2, 3, 4}.
 2.The operator solves (5.4) to decide winning bids. 3.The operator updates the carbon parameter, q(t) according to (5.5). 

This procedure is repeated until at the end of the billing cycle.

5.2.1 Simulation and Results
To evaluate GreenColo, the author performed a trace-based simulation. The authors considered a multi-tenant data center with three large (consolidated) tenants, each of which has 10,000 servers and may represent multiple tenants in practice. The three tenants run highly delay-sensitive, moderately delay-sensitive, and delay-tolerant workloads, respectively.

5.2.1.1 Simulation Settings
The modeling parameters for tenants are shown in the below table. Parameters: The parameter ω

i

dealy converts delay performance to monetary value and quantifies the delay cost for every 106 requests when average delay exceeds the software threshold by 1 ms [43]. The parameter ω

i

0 specifies the server unavailability cost for switching off each server for 1 h. Moreover, the authors consider the peak power-based pricing model [43, 162]. Service rates indicate the average number of jobs that can be processed, the soft delay threshold indicates the desired average delay below which users are indifferent with the service quality, and average delay constraint specifies the acceptable service quality. TenantsTenant #1Tenant #2Tenant #3Delay cost, ω

i

delay (cent/ms/106 jobs)75505
ω

i

0 (cent/sever/h)333Power cost ($/kW/month)145145145Service rates (jobs/h)360,000180,00030Soft threshold on average delay12 ms24 ms175 sAverage delay constraint20 ms40 ms300 s


Operator constraints: Without the loss of generality, each server is assumed to have an idle power of 150 W and peak power of 250 W. The budgeting period for the simulation is set to 1 year with each time slot of 1 h. The annual budget constraint is set to 1.27 million US dollars, which is the total cost of the multi-tenant data center without any electricity demand reduction by its tenants. The peak power of the multi-tenant data center is 12 MW and its PUE is set as 1.6 [21].

Workload traces for each tenant is setup as follows: Tenant #1 is running "Hotmail" taken from a 48-h trace of 8 servers of Hotmail [159].Tenant #2 is running "Wikipedia" taken from [163], which contain 10% of all user requests to Wikipedia from a 30-day period of September 2007.Tenant #3 is running "MSR" taken a 1-week I/O trace of 6 RAID volumes at Microsoft Research Cambridge [159].

Due to lack of available traces for the entire budgeting period, the authors add up to 30% random variations and extend the available traces to get the 1-year trace. The workloads are normalized to corresponding tenant's maximum processing capacity and, by default, scaled to have an average utilization of 20% for tenants #1 and #2 and 30% for tenant #3.

Electricity price for business customers is taken from PG&E [91]. The electricity price is time varying depending on "Time-of-Use" rates, which have three different periods: off-peak, partial-peak, and peak. The electricity price also differs from Winter (November to April) and Summer (May to October). Furthermore, solar power generation data from [140] for California for the year 2013 is taken to be used as trace for on-site renewable energy generation. The on-site renewable energy generation is set to be 10% of the multi-tenant data center's maximum peak energy.

Carbon emission rate: The authors collect the fuel mix data from California ISO [140] for the year of 2013, and use the carbon emission rate for energy fuel types presented in Table 2.​3 in the simulation.
Three benchmarks are considered to evaluate GreenColo. 
No Incentive (N-inc) is the baseline case in which there is no reduction in electricity demand.In Direct Incentive (D-inc), the operator directly forwards the current electricity price (multiplied by an annualized PUE) to the tenants as an incentive for energy saving. D-inc does not exploit the time-varying nature of carbon emission efficiencies.
Optimal off-line (OPT) uses the complete information at the end of billing cycle to solve (4.2) with the benefit of hindsight. This provides a lower bound on the carbon footprint that can be possibly achieved by GreenColo.



5.2.1.2 Execution of GreenColo

Figures 5.25 and 5.26 show the impact of control parameter V on the performance of GreenColo, where N-inc is the no-incentive baseline case. The operational cost of N-inc is set as the budget constraint. It can be seen that V governs the trade-off between carbon footprint reduction and budget constraint satisfaction: when V increases, GreenColo focuses more on reducing carbon footprint while caring less about operational cost, and vice versa. When V ≈ 150, the desired budget constraint is satisfied, while the carbon footprint is significantly reduced compared to N-inc. Fig. 5.25Impact of V on carbon footprint
Fig. 5.26Impact of V on operational cost



5.2.1.3 Tenant Costs
Figure 5.27 shows that GeenColo can significantly reduce tenants' cost. Tenant cost saving varies for each tenant where tenants #1 and #3 achieving the least and highest cost savings, respectively. This is due to differences between the tenants' delay tolerance levels: unlike tenant #1 running delay-sensitive workloads, tenant #3 runs delay-tolerant jobs and has a low delay cost, as well as a high average delay constraint. As a result, as shown in Figs. 5.28 and 5.29, tenant #3 can shut down many servers without substantially affecting application performances. Tenant #1, on the other hand, turns down fewer number of servers to ensure that the resulting impact on application performance is negligible. Furthermore, Fig. 5.29 shows that all the tenants' application performances when using incentive mechanism (i.e., GreenColo, OPT, D-inc) are nearly the same as those in the N-inc case. This is because tenants typically accept cost saving and green practices, only when application performance is not compromised: tenants set a sufficiently high delay performance cost parameter ω

i

delay to ensure that application performance is not significantly degraded.Fig. 5.27Tenant cost saving
Fig. 5.28Servers turned off
Fig. 5.29Delay performance



5.2.1.4 Carbon Footprint Reduction
Next, the operational cost and carbon reduction under different algorithms are compared. Figure 5.30 shows that all the algorithms result in the same operational cost as N-inc, which is used as the baseline reference. Moreover, GreenColo rewards a greater incentive payment to tenants than D-inc, because GreenColo is able to perform a joint optimization across all tenants by taking the advantage of tenant heterogeneity (e.g., tenant #3 voluntarily requests less payment than tenant #1 for reducing the same amount of energy). Figure 5.31 shows the carbon footprint reductions achieved by different tenants under different incentive mechanisms, compared to N-inc. It is observed that, although tenant #3 has the highest average utilization (i.e., 30%), it contributes the most to carbon footprint reduction, because its workloads are delay-tolerant in our simulation. Further, GreenColo achieves a much higher carbon footprint reduction than D-inc by encouraging tenants to turn off more servers. More importantly, the carbon footprint reduction achieved by GreenColo is fairly close to that by OPT (18.2% versus 21.5%). Hence, GreenColo demonstrates that it can effectively reduce carbon footprint with in real-time (i.e., on-line optimization), with close-to-optimal results.
Fig. 5.30Operational cost
Fig. 5.31Carbon reduction





5.3 Randomization for Pricing and Auction

5.3.1 Randomized Pricing Approach
Zhang et al. consider problem (4.1) and presented a pricing-based approach in [126, Sect. IV]. Equation (4.1) is a social cost minimization problem where r

i
(t) = ɛ(t) Δe

i
(t) is substituted for the pricing approach. The challenge is that the peak power demand, , can only be determined at the end of the billing cycle and it cannot be known in advance. If E
max is assumed to be known in advance, (4.1) can be simplified into a linear integer program.

5.3.1.1 An Off-Line Approximation Algorithm
Hence, to approximate E
max, the authors introduced a linear program relaxation to (4.1), i.e., x

i
(t) ∈ [0, 1]. Then, they performed analysis of E
max with respect to the objective of (4.1) and the optimal E
max
∗ is computed as  (5.6)
where .
Based on the above analysis, authors design an off-line approximation algorithm for the linear integer program (4.1). At each time slot t, the total amount of energy reduction by the tenants is determined once E
max
∗ is decided. Hence, [126] solves the following sub-problem for each time slot t:  (5.7a)
 (5.7b)
 (5.7c)
where ɛ(t) denotes the reward rate, γ(t) denotes the PUE, x

i
(t) ∈ {0, 1} denotes the decision variable for the bid of tenant i, Δe

i
(t) denotes electricity demand that tenant i is willing to reduce, D(t) denotes the total electricity demand of data center without reduction, and E(t) denotes the electricity the data center has to buy from the grid. The proposed off-line approximation algorithm to solve (4.1) is given in Algorithm 1. The optimization problem (5.7) is solved using the primal-dual approach [164].

Algorithm 1: Off-line approximation algorithm for pricing approach





Theorem 5.1

Algorithm 
1
  is a polynomial-time 2-approximation algorithm to  (4.1).


Proof
The proof of Theorem5.1 can be found in [126, Sect. IV]. ■




5.3.1.2 An On-Line Algorithm
Next, based on the off-line formulation, the authors proposed an on-line pricing algorithm. The idea behind the on-line pricing algorithm is that upon receiving a new request, it calculates and updates the optimal E
max
∗ based on all information received so far. Then the amount of energy that the multi-tenant data center needs to draw from the grid E(t) is determined as well. The on-line pricing algorithm is given in Algorithm 2.

Algorithm 2: On-line algorithm for pricing approach





Theorem 5.2

Algorithm 
2
  is (1 + 2(κ + 1)∕ρ + 2)-competitive.



Proof
The proof of Theorem5.2 can be found in [126, Sect. IV]. ■


Values of κ and ρ are positive constants related to system settings [126, Sect. IV]. Note that, if full information is known, and then the on-line Algorithm 2 degrades into the off-line Algorithm 1 whose approximation ratio is 2. The competitive ratio (1 + 2(κ + 1)∕ρ + 2) as two separate components. The first component, (1 + 2(κ + 1)∕ρ term is due to challenges from the on-line nature of the problem, while the second component 2 results from computational challenges associated with linear integer optimization.



5.3.2 Randomized Auction Approach
Zhang et al. also present an auction-based approach for problem (4.1) which is a social cost minimization problem [126, Sect. V]. As in their pricing approach, the authors introduce  to transform (4.1) into an integer linear program.

5.3.2.1 An On-Line Algorithm
First, the integer linear program (4.1) is relaxed into a linear program, i.e., x

i
(t) ∈ {0, 1} ⇒ x

i
(t) ∈ [0, 1]. However, a straightforward relaxation may lead to an unbounded integrality gap. Hence, the authors apply the technique of redundant linear programming constraints [165, 166] to bound the integrality gap. As a consequence, valid inequalities that satisfy all mixed integer solutions of (4.1) are introduced. This bound is important for auction design.
Let  be a subset of bids submitted at time slot t. Let  denote the remaining amount of energy when all bids in  are accepted for energy reduction. Let  be the contribution of an additional bid i in making up the difference. Then, the enhanced linear programming relaxation of (4.1) is  (5.8a)
 (5.8b)
 (5.8c)
 (5.8d)

Next the dual linear program of (5.8), by introducing dual variables α and β corresponding to primal constraints (5.8b) and (5.8c), respectively. The dual variable  is unit energy price in set , while the dual variable β(t) reflects how much power the multi-tenant data center wants to draw from the grid. When E(t) is already too high, any additional increase in E(t) may lead to a high peak charge. Hence, a higher β(t) is usually used to limit the data center from drawing more electricity from the grid. Instead, the operator can use power reduction from the tenants. The dual linear program of (5.8) is given as  (5.9a)
 (5.9b)
 (5.9c)
 (5.9d)

The authors design a primal-dual on-line algorithm based on the dual problem (5.9) in Algorithm 3. For each time slot t, Algorithm 3 initializes an empty set  as a candidate tenant set, from which the operator purchases energy reduction to reduce its total energy consumption. During each iteration, the dual variable  increases continuously. Once constraint (5.9b) becomes tight, the operator rewards its tenants for energy reduction. On the other hand, when constraint (5.9c) becomes tight, the operator purchases energy from the grid. The peak demand price,  is allocated equally over all T time slots, i.e., β(t).

Algorithm 3: Primal-dual on-line algorithm for auction approach





Lemma 5.1

Algorithm 

3

computes feasible solutions to both primal linear program  (5.8) and dual linear program  (5.9).


Lemma 5.2

Algorithm 

3

 produces result

such that:

, where G

OPT

is the cost of the optimal off-line solution.



Lemma 5.3

Algorithm 

3

 produces a solution  that: ∑

t

π(t) E(t) + ∑

t

∑

i

x

i
(t) r

i
(t) ≤ 2 G

OPT

.


Proof
The proofs of Lemmas5.1, 5.2, and 5.3 can be found in [126, Sect. V]. ■



Theorem 5.3

Algorithm 

3

 is

-competitive.



Proof
From Lemmas5.2 and 5.3, we have . Therefore, the competitive ratio is . ■


The values of ξ and ρ depend on the specific system settings [126, Sect. V].


5.3.2.2 A More Intelligent On-Line Algorithm
In Algorithm 3, the current energy demand E
max is not tracked, which makes it less intelligent to the fluctuating power demand D(t) as well as unknown tenants' bids [r

i
(t), Δe

i
(t)]. Hence, the authors introduce Algorithm 4 with a better performance guarantee.

Theorem 5.4

Algorithm 

4

 is (2 + c)-competitive, where  (5.10)



Proof
The proof of Theorem5.4 can be found in [126, Sect. V]. ■


The value of c depends on system configuration.



5.3.3 Randomized Truthful Auction Mechanism
Next, the authors design a randomized truthful auction mechanism based on Algorithm 4 to elicit truthful bids from tenants for each time slot. Although Vickrey-Clarke-Groves (VCG) mechanism is known to be truthful [167], it requires solving social cost minimization multiple times, and is hence computationally expensive. The proposed mechanism is based on the polynomial-time Algorithm 4, and inherits a competitive ratio close to that of Algorithm 4.

Algorithm 4: Smart primal-dual on-line algorithm for auction approach




In each time slot, Algorithm 4 decides E
max that is the maximum amount of energy drawn from the grid. If E
max = D(t), the operator does not need to ask tenants to submit energy reduction bids. Otherwise, the energy reduction target is D(t)E
max. Then the optimization problem (4.1) can be decomposed into:  (5.11a)
 (5.11b)
 (5.11c)
And the enhance linear programming relaxation of (5.11) becomes  (5.12a)
 (5.12b)
 (5.12c)
where . The corresponding problem of (5.12) is  (5.13a)
 (5.13b)
 (5.13c)
Equations (5.12) and (5.13) are simplified versions of (5.8) and (5.9), respectively. Hence, Algorithm 5 is designed based on Algorithms 3 and 4 to solve (5.12) and (5.13).

Algorithm 5: Primal-dual on-line algorithm for (5.11)





Theorem 5.5
Algorithm 5 is a polynomial-time 2-approximation algorithm to the linear integer program  (5.11), and verifies an integrality gap of two as well.



Proof
The proof of Theorem5.5 is similar to the first case in Lemma5.3. ■


The authors then convert Algorithm 5 into a truthful auction by applying a randomized convex decomposition technique [128, 167, 168]. The detailed steps of Truthful Auction Mechanism are explained below.
1.
Compute the optimal fractional solution by solving (5.12) using a stand linear programming solution method such as the simplex algorithm or interior-point algorithm to obtain . 2.
Decompose fractional solution into integer solutions using a randomized convex decomposition technique to a set of integer solutions. That is, to find the combination weight  where , such that  where  is the set of all feasible integer solutions to (5.11). The exact decomposition assures the sufficient and necessary condition of truthfulness. 3.
Determine winning tenants and calculate payment: After decomposing the fractional solution into a series of integer solutions, an integer solution  is randomly picked with its corresponding combination weight ν

k
 as its probability. 


Theorem 5.6
[169, 170
], a randomized auction with bids  and payment  is truthful in expectation if and only if for any bidder i, 
P

i
(r

i
) is monotonically non-increasing in ;
;
The expected payment satisfies: 
.


For the second step, convex decomposition, the following linear program is solved to find :  (5.14a)
 (5.14b)
 (5.14c)
 (5.14d)
Since  has an exponential number of elements, (5.14) has an exponential number of variables which make directly (5.14) difficult. Hence, the dual problem of (5.14), which has an exponential number of constraints, is considered.  (5.15a)
 (5.15b)
 (5.15c)
where  and η are dual variables corresponding to constraints (5.14b) and (5.14c), respectively. The ellipsoid method [168] can solve the dual problem (5.15) efficiently in polynomial time, though it has exponentially many constraints.
For the third step, winner determination, the payments are computed according to the following sufficient and necessary condition of truthfulness. Let P

i
(r

i
) be the probability that tenant i wins the bidding and receives reward r

i
. Let  be all the bids except [r

i
, Δe

i
]. Then, by [169, 170], a randomized auction with bids  and payment  is truthful in expectation if and only if for any bidder i, (i) P

i
(r

i
) is monotonically non-increasing in r

i
; (ii) ∫
0

∞

P

i
(r

i
)dr < ∞; (iii) . These three conditions are examined as follows:
1.Since x

i
 is a binary variable, . For (5.12), increasing r

i
 makes the corresponding x

i

∗ non-increase. Thus, min {2x

i

∗, 1} in non-increasing in r

i
 and so P

i
(r

i
) is monotonically non-increasing in r

i
. 2.Any bid with asking reward higher than  will be removed from the candidate set at the very beginning. Hence, . 3.The payments for tenants are calculated as 


 (5.16)


Theorem 5.7

The randomized auction mechanism is truthful in expectation and achieves a (2 + 2c)-approximation ratio, where c is defined in  (5.10).


Proof
As the randomized auction satisfies the sufficient and necessary conditions in Theorem5.6, it is truthful in expectation. The expected social cost: 
where G
OPT(D(t) − E
max) is the optimal cost of (5.12) when the target is D(t) − E
max. The last inequality is due to the dual fitting in Theorem5.4. ■




5.3.4 Simulation and Results

5.3.4.1 Simulation Setup
The authors consider a practical scenario of a multi-tenant data center located in Vancouver, Canada, with 15 participating tenants. The maximum power demand of the data center is 21 MW. The data center is powered by BC Hydro with a peak charge of 9.95 $/kW and a volume charge of 4.86 /kW. A series of time-varying volume charge rate π(t) is generated by adding randomness to the volume charge.
Next, the hourly ambient temperature in Vancouver is collected for July 1-31, 2014 [171]. Based on the ambient temperature, the pPUE is fitted according to formula given in Fig. 2.​2 Figure 5.32 shows the time-varying pPUE curve for July 1-7, 2014. The Hotmail and MSR workload traces [43] and the Wikipedia workload trace [172], which are 24 h long, are used to drive the simulation. Since the trace data is limited, they are duplicated with randomness of up to 20% to generate the 15 tenants' workloads for 30 days. All workloads are normalized with respect to each tenant's maximum service capacity. Figure 5.33 shows the three traces for a 48-h period.Fig. 5.32Generated pPUE traces based on climate history of Vancouver, July 1-7, 2014
Fig. 5.33Normalized workload traces

Based on the workload traces, the authors generate the power demand D(t). The tenants can reduce their energy consumption by consolidating low workload machines and shutting down idle machines. The authors assumed that the machines in idle status consume up to 50% energy of their peak power, therefore the possible energy reduction is , where W is the normalized workload and  is the peak power demand when W = 1. A tenant's cost is proportional to its total energy reduction. The unit price for tenants is randomly generated between 5 ∼ 8. 5  which is higher than the volume charge α(t).



5.3.4.2 Algorithms for Pricing Approach
The price offered by the operator is set to ɛ(t) = κ α(t), where by default κ = 3. If r

i
(t)∕Δe

i
(t) ≤ ɛ(t), then tenant i will participate in the energy reduction by submitting Δe

i
(t) to the operator, where r

i
(t) is tenant i's true cost. Figure 5.34 compares Algorithm 1 with the off-line optimum and shows that Algorithm 1 achieves almost the same E
max as the off-line optimum does. Algorithm 1 draws the same amount of energy from the grid in most time slots, which verifies the correctness of (5.6). Figure 5.35 compares Algorithm 1 with Algorithm 2. Two key observations can be made: (i) Algorithm 1 smooths the energy demand evenly by the help of tenants; (ii) Algorithm 2 is unlike to draw high energy, E(t).Fig. 5.34Comparison between Algorithm 1 and off-line optimum
Fig. 5.35Energy drawn from the grid, July 1-3, 2014

Next, the overall cost for 1 month under BC Hydro's pricing scheme [135] is compared in Table 5.1. The authors compare the volume charge, peak charge, and the payments to tenants among Algorithms 1, 2, and off-line optimum. The costs achieved by Algorithms 1 and 2 are close to the off-line optimum, and are much lower than their respective theoretically proven approximation bounds. Specifically, the competitive ratio of Algorithm 2 is 1.09 which is noticeably better than the theoretical bound of 1 + (2(κ + 1)∕ρ) + 2 = 6. 2, where κ = 3 and ρ = 2. 5. 
Table 5.1Cost comparison under BC Hydro's pricing scheme [135] for pricing approaches Volume charge ($)Peak charge ($)Payments to tenants ($)Total ($)Algorithm 1
385,000146,73712,365544,102Algorithm 2
314,811146,694130,026591,531Off-line optimum384,697146,75712,560544,014No scheme412,417185,5680597,985

Moreover, comparisons under various pricing schemes used in Duke Energy [134], PG&E [91], Mid American Energy [137], and Georgia Power [136] are performed and the results are shown in Figs. 5.36, 5.37, 5.38, 5.39, respectively. Both Algorithms 1 and 2 achieve close-to-optimal performance as compared with the off-line optimum, under all pricing schemes. Algorithm 2 incurs higher costs than Algorithm 1 because of the lack of future information. Note that the peak charge is the dominant cost under Georgia Power's pricing scheme because the volume charge of Georgia Power is an order of magnitude cheaper than other utility providers.
Fig. 5.36Cost comparison under Duke Energy's pricing scheme [134]
Fig. 5.37Cost comparison under PG&E's pricing scheme [91]
Fig. 5.38Cost comparison under Mid American Energy's pricing scheme [137]
Fig. 5.39Cost comparison under Georgia Power's pricing scheme [136]

Next, the authors compare the energy drawn from the grid by Algorithm 1 under various κ, ranging from 1.4 to 4.4. Results are shown in Fig. 5.40. When κ is small, i.e., the operator offers a low unit reward price ɛ(t), the system has to draw a large amount of energy from the grid due to tenants not willing to offer energy reduction. As κ increases, the amount of energy drawn from the grid decreases. A similar trend for Algorithm 2 can be seen in Fig. 5.41.Fig. 5.40Energy drawn from grid for Algorithm 1

Fig. 5.41Energy drawn from grid for Algorithm 2




5.3.4.3 Algorithms for Auction Approach
In Fig. 5.42, Algorithm 3 saves more energy than the off-line optimum does to lower the peak demand by spending more money in paying tenants' energy reduction at most time slots. But Algorithm 3 does not track the maximum demand so far, so the amount of energy drawn from the grid is not stable over time. Further, the pattern of the amount of energy drawn from the grid by Algorithm 3 exactly follows power demand D(t), i.e., it goes high as D(t) goes high, and it drops as D(t) drops. This reveals that Algorithm 3 is not intelligent and flexible enough to adapt to shift the energy demand D(t).Fig. 5.42Comparison between Algorithm 3 and off-line optimum

In Fig. 5.43, the amount of energy drawn from the grid by Algorithm 4 is compared with that by the off-line optimum. E
max in Algorithm 4 approaches E
max
∗ as t increases. Algorithm 4 keeps tracking the maximum demand so far, and resorts to the energy reduction from tenants only when it would exceed the maximum demand so far. Results show that Algorithm 4 does act more intelligently than Algorithm 3 by keeping the energy drawn from the grid relatively stable as shown in Fig. 5.43.
Fig. 5.43Comparison between Algorithm 4 and off-line optimum

The randomized truthful auction mechanism is run for 20 times to obtain the average results. Figure 5.44 shows the amount of energy drawn from the grid by the randomized auction compared to Algorithm 4. It follows the curve by Algorithm 4 with a bit of fluctuation, which results from the randomized selection of integer solutions in the auction.Fig. 5.44Comparison between Algorithm 4 and truthful auction

Next, the monthly costs in each payment component, i.e., volume charge, peak charge, and payment to tenants, are compared and the results are shown in Fig. 5.45 and Table 5.2. Algorithm 3 performs the worst among them, but still achieves 1.104 times the off-line optimum, which is much better than the theoretical worst-case competitive ratio of , where ξ = 1. 2, ρ = 2. 5. Algorithm 4 and the randomized truthful auction both have a competitive ratio of 1.01, better than the theoretical worst-case competitive ratios of (2 + c) = 3. 49 and (2 + 2c) = 4. 98, respectively, where c ≈ 1. 49.Table 5.2Cost comparison under BC Hydro's pricing scheme [135] for auction approaches Volume charge ($)Peak charge ($)Payments to tenants ($)Total ($)Algorithm 3
282,561160,195157,084599,840Algorithm 4
353,078153,32342,728549,129Truthful auction351,119153,32343,695548,137Off-line optimum302,776135,452104,894543,122
Fig. 5.45Cost comparison under BC Hydro's pricing scheme for auction approaches





References


21.
Equinix Website. [Online]. Available: http://​www.​equinix.​com/​.


40.
Gandhi, A., Harchol-Balter, M., Raghunathan, R., & Kozuch, M. A. (2012, November). AutoScale: Dynamic, robust capacity management for multi-tier data centers. ACM Transactions on Computer Systems, 30(4), 14:1-14:26. [Online]. Available: http://​goo.​gl/​lxamQz.


43.
Lin, M., Wierman, A., Andrew, L., & Thereska, E. (2011, April). Dynamic right-sizing for power-proportional data centers. In IEEE INFOCOM (pp. 1098-1106). [Online]. Available: http://​goo.​gl/​QoqujE.


50.
Xu, H. & Li, B. (2014). Reducing electricity demand charge for data centers with partial execution. In 5th international conference on future energy systems, ser. e-Energy '14 (pp. 51-61). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​Li8eq5.


91.
PG&E. Pacific gas and electric company. PG&E Website. [Online]. Available: http://​www.​pge.​com/​.


92.
Liu, Z., Wierman, A., Chen, Y., Razon, B., & Chen, N. (2013, June). Data center demand response: Avoiding the coincident peak via workload shifting and local generation. SIGMETRICS Performance Evaluation Review, 41(1), 341-342. [Online]. Available: http://​goo.​gl/​rvenlD.


121.
Data Center Map: Colocation, U.S.A.. Data Center Map Website. [Online]. Available: http://​goo.​gl/​JkV6tg.


124.
Islam, M., Ren, S., & Wang, X. (2014, November). GreenColo: A novel incentive mechanism for minimizing carbon footprint in colocation data center. In International green computing conference, (IGCC) (pp. 1-8). [Online]. Available: http://​goo.​gl/​f9nr8F.


125.
Islam, M., Mahmud, H., Ren, S., & Wang, X. (2015, February). Paying to save: Reducing cost of colocation data center via rewards. In IEEE 21st international symposium on high performance computer architecture, (HPCA) (pp. 235-245). [Online]. Available: http://​goo.​gl/​G6zoeJ.


126.
Zhang, L., Li, Z., Wu, C., & Ren, S. (2015, December). Online electricity cost saving algorithms for co-location data centers. IEEE Journal on Selected Areas in Communications, 33(12), 2906-2919. [Online]. Available: http://​goo.​gl/​45QUdf.


128.
Zhang, L., Ren, S., Wu, C., & Li, Z. (2015, April). A truthful incentive mechanism for emergency demand response in colocation data centers. In IEEE INFOCOM, Hong Kong, China (pp. 2632-2640). [Online]. Available: http://​goo.​gl/​9KqeBv.


134.
Duke Energy Progress North Carolina Rates & Tariffs. Duke Energy Website. [Online]. Available: http://​www.​duke-energy.​com/​.


135.
BC Hydro. Website. [Online]. Available: https://​www.​bchydro.​com/​.


136.
Georgia Power: Electric Service Tariff. Website.


137.
Mid American Energy Electric Tariffs. Website. [Online]. Available: https://​goo.​gl/​iOGMmw.


140.
Califonia ISO. Califonia ISO Website. [Online]. Available: http://​www.​caiso.​com/​.


156.
Mohsenian-Rad, A.-H., Wong, V., Jatskevich, J., Schober, R., & Leon-Garcia, A. (2010, December). Autonomous demand-side management based on game-theoretic energy consumption scheduling for the future smart grid. IEEE Transactions on Smart Grid, 1(3), 320-331. [Online]. Available: http://​goo.​gl/​rqjo6k.


157.
Wu, Q. (2014, August). Making Facebooks software infrastructure more energy efficient with Autoscale. facebook.com, Tech. Rep. [Online]. Available: https://​goo.​gl/​aQjYl4.


158.
STEM. Demand charges. Website. [Online]. Available: http://​goo.​gl/​GZXepT.


159.
Thereska, E., Donnelly, A., & Narayanan, D. (2009). Sierra: A power-proportional, distributed storage system. Microsoft Research, Cambridge, U.K., Tech. Rep. [Online]. Available: https://​goo.​gl/​ICu7jt.


160.
Google Transparency Report: Browse real-time traffic to Google products and services. Google Website, 2017. [Online]. Available: https://​goo.​gl/​GQnPhX.


161.
Neely, M. J. (2010, January). Stochastic network optimization with application to communication and queueing systems. Synthesis Lectures on Communication Networks, 3(1), 1-211. [Online]. Available: http://​goo.​gl/​CZQn2P.


162.
Enaxis Consulting. (2009). Pricing Data Center Co-location Services. Enaxis Consulting. Tech. Rep. [Online]. Available: http://​www.​enaxisconsulting​.​com/​.


163.
Urdaneta, G., Pierre, G., & van Steen, M. (2009, July). Wikipedia workload analysis for decentralized hosting. Computer Networks, 53(11), 1830-1845. [Online]. Available: https://​goo.​gl/​ttJFmW.


164.
Boyd, S. & Vandenberghe, L. (2004). Convex optimization. New York, NY: Cambridge University Press. [Online]. Available: http://​goo.​gl/​3YTKaJ.


165.
Carr, R. D., Fleischer, L. K., Leung, V. J., & Phillips, C. A. (2000). Strengthening integrality gaps for capacitated network design and covering problems. In Proceedings of the eleventh annual ACM-SIAM symposium on discrete algorithms, ser. SODA '00 (pp. 106-115). Philadelphia, PA, USA: Society for Industrial and Applied Mathematics. [Online]. Available: http://​goo.​gl/​1ohyvw.


166.
Carnes, T. & Shmoys, D. (2008). Primal-dual schema for capacitated covering problems (pp. 288-302). Berlin/Heidelberg: Springer. [Online]. Available: http://​goo.​gl/​7F4KO1.


167.
Lavi, R. & Swamy, C. (2005, October). Truthful and near-optimal mechanism design via linear programming. In 46th annual IEEE symposium on foundations of computer science (pp. 595-604). [Online]. Available: http://​goo.​gl/​aY0rB4.


168.
Carr, R. & Vempala, S. (May 2002). Randomized metarounding. Random Structures & Algorithms, 20(3), 343-352. [Online]. Available: http://​goo.​gl/​VAEqaa.


169.
Archer, A. & Tardos, E. (2001). Truthful mechanisms for one-parameter agents. In 42nd IEEE symposium on foundations of computer science, ser. FOCS '01 (pp. 482-491). Washington, DC, USA: IEEE Computer Society. [Online]. Available: http://​dl.​acm.​org/​citation.​cfm?​id=​874063.​875583.


170.
Myerson, R. B. (1981, February). Optimal auction design. Mathematics of Operations Research, 6(1), 58-73. [Online]. Available: http://​dx.​doi.​org/​10.​1287/​moor.​6.​1.​58.


171.
Canadian climate data. (2014). [Online]. Available: http://​climate.​weather.​gc.​ca/​.


172.
Vasudevan, V., Phanishayee, A., Shah, H., Krevat, E., Andersen, D. G., Ganger, G. R., et al. (2009, August). Safe and effective fine-grained TCP retransmissions for datacenter communication. SIGCOMM Computer Communication Review, 39(4), 303-314. [Online]. Available: http://​doi.​acm.​org/​10.​1145/​1594977.​1592604.




Footnotes


1


The commonly used power-based pricing is considered as the baseline case, and RECO is applied on top of this baseline. Hence, the colocation's revenue, i.e., tenants' power-based rent (excluding power-irrelevant bandwidth charges, etc.), is pre-determined.

 



2


The rental cost is calculated based on pro-rated for 48 h with a rental rate of 147 $/kW per month, considering that Hadoop and KVS tenants have power subscriptions of 240 and 340 W, respectively.Fig. 5.24Cost savings under different algorithms


 













© Springer International Publishing AG 2018

Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers


https://doi.org/10.1007/978-3-319-66062-2_6





6. Summary



Thant Zin Oo1 , 
Nguyen H. Tran1, 
Shaolei Ren2 and 

Choong Seon Hong
1




(1)
Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)


(2)
Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, CA, USA

 



Abstract
Multi-tenant data center has become large energy consumers due to the increasingly popular cloud computing services. However, their efficiency is lower that of owner-operated data centers. This is due to the split incentives of the stakeholders, i.e., the operator and its tenants, are not aligned. This part of the book explains the motivations, issues, and challenges. Then, it surveys the formulated problems and corresponding proposed solutions.


Keywords
Multi-tenant data center
Sustainability
Pricing
Randomized auction



We have studied sustainable multi-tenant data center in this chapter. We have identified the following ingredients of the problem of sustainability in multi-tenant data centers: Stakeholders: the operator and tenants;Major challenges: split incentives and on-line decision making;Objectives: improve energy efficiency and reduce carbon footprint;

This chapter surveys and compiles the solutions from [124-126] which address the above items.
To solve the sustainability problem, pricing- or auction-based approaches can be used to (financially) reward tenants who voluntarily reduce their electricity consumption. Further, to solve the formulated problems (4.1) or (4.2), the following on-line optimization approaches are applied: Kalman filter [173],randomized convex decomposition [128, 167, 168],Lyapunov technique [161].

The authors then designed the on-line algorithms that let the operator dynamically selects the winning bids and rewards its tenants who, in turn, reduce their electricity consumption. Their respective simulations and results show that it is indeed possible to improve sustainability (i.e., reduce energy demand, electricity cost, and carbon footprint). In doing so, they have also shown the economic benefits for operational cost savings of both the operator and its tenants.

References


124.
Islam, M., Ren, S., & Wang, X. (2014, November). GreenColo: A novel incentive mechanism for minimizing carbon footprint in colocation data center. In International green computing conference, (IGCC) (pp. 1-8). [Online]. Available: http://​goo.​gl/​f9nr8F.


126.
Zhang, L., Li, Z., Wu, C., & Ren, S. (2015, December). Online electricity cost saving algorithms for co-location data centers. IEEE Journal on Selected Areas in Communications, 33(12), 2906-2919. [Online]. Available: http://​goo.​gl/​45QUdf.


128.
Zhang, L., Ren, S., Wu, C., & Li, Z. (2015, April). A truthful incentive mechanism for emergency demand response in colocation data centers. In IEEE INFOCOM, Hong Kong, China (pp. 2632-2640). [Online]. Available: http://​goo.​gl/​9KqeBv.


161.
Neely, M. J. (2010, January). Stochastic network optimization with application to communication and queueing systems. Synthesis Lectures on Communication Networks, 3(1), 1-211. [Online]. Available: http://​goo.​gl/​CZQn2P.


167.
Lavi, R. & Swamy, C. (2005, October). Truthful and near-optimal mechanism design via linear programming. In 46th annual IEEE symposium on foundations of computer science (pp. 595-604). [Online]. Available: http://​goo.​gl/​aY0rB4.


168.
Carr, R. & Vempala, S. (May 2002). Randomized metarounding. Random Structures & Algorithms, 20(3), 343-352. [Online]. Available: http://​goo.​gl/​VAEqaa.


173.
Gandhi, A., Dube, P., Karve, A., Kochut, A., & Zhang, L. (2014). Adaptive, model-driven autoscaling for cloud applications. In 11th international conference on autonomic computing. USENIX, (ICAC 14) (pp. 57-64). [Online]. Available: https://​goo.​gl/​72q7vj.











Part IIIMulti-Tenant Data Center Demand Response










© Springer International Publishing AG 2018

Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers


https://doi.org/10.1007/978-3-319-66062-2_7





7. Background



Thant Zin Oo1 , 
Nguyen H. Tran1, 
Shaolei Ren2 and 

Choong Seon Hong
1




(1)
Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)


(2)
Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, CA, USA

 



Abstract
For smart grid, multi-tenant data centers play a major part in the demand response program due to their large energy demand. Emergency demand response is critical in preserving the electrical infrastructure (i.e., the grid) in emergency situations, such as extreme weather events. Further economic demand response programs can stabilize the energy market by shifting the electricity demand to off-peak durations. This part of the book examines the motivations, issues, and challenges involved in multi-tenant data center demand response. Further, it summarizes the formulated problems and the possible solutions.


Keywords
Multi-tenant data center
Demand response
Pricing
Randomized auction
Stackelberg game
Nash bargaining
Contract theory
Alternative direction method of multipliers (ADMM)



The structural components of the electrical grid have remained unchanged since the widespread adoption of alternating current (AC) for power transmission. In the grid, the electricity demand (usage) must be in constant balance with electricity supply (generation). Thus, the electrical grid has played an ongoing balancing act for the past century, which makes the grid very fragile, where a single node failure in the grid can crash the whole grid [174]. Demand response mutually benefits multi-tenant data centers and the entire power grid by exploiting the data center's power demand flexibility [117]. Multi-tenant data center demand response could potentially transform its huge power demand from a nightmare to a valuable social asset.


7.1 Motivation

Demand Response (DR) is a market-based program that extracts flexibility of electricity usage on the consumer side in response to power supply condition in order to improve grid efficiency, reliability, and sustainability. Hence, the US government has adopted demand response programs for power grid innovation [16]. In a typical demand response program, the participating customers reduce their electricity demands upon the request of the utilities. In return, the utilities provide incentives (usually monetary) to the participating customers. Demand response programs can be either emergency demand response (EDR) [128] or economic demand response [7, 175]. Emergency demand response accounts for 87% demand reduction capability [176] and is mandatory for the participants, while economic demand response is voluntary. For example, during an emergency situation, the EDR is performed to prevent the grid from experiencing cascading failures. On the other hand, economic demand response is performed during peak hours to reduce the operational cost of the utility.
Data centers are ideal participants for demand response programs because of their huge yet flexible electricity consumption (via resource management) [80, 116, 117, 177, 178]. Data centers consume 2% of the global electricity usage [122]. Moreover, the current estimated multi-tenant data centers market of US$25.7 billion is expected to grow to US$54.13 billion by 2020 [9]. On the one hand, data center flexibility opens up new opportunities for cost saving by managing power in response to real-time electricity prices [46, 47]. On the other hand, data center's huge and flexible power demand serves as an "energy buffer" for the power grid, helping stabilize the power grid and increase adoption of renewables by balancing the grid's supply demand at runtime [117]. As a result, the participation of multi-tenant data centers in the demand response programs is not only desirable, but also critical in terms of both security of the grid and economic perspectives.
Some previous studies have also investigated data center demand response. In [46, 47, 56, 133, 145, 151, 179], data center demand response for reducing data center electricity cost has been investigated. In [81, 117, 178], the authors have studied data center demand response to improve the power grid operation. These studies on data center demand response have focused on owner-operated data centers, and the proposed centralized management techniques are not directly applicable to demand response of multi-tenant data centers. Hence, we survey research works on coordinated power management for multi-tenant data center demand response [1, 2, 4, 5, 7, 8, 127, 128, 180-182].


7.2 Issues
As mentioned in Chap. 2, multi-tenant data centers suffer from "split incentives" of the data center operator and its tenants. Furthermore, tenants' direct participation in demand response is not feasible, since the grid cannot directly measure individual tenant's power consumption. The demand response program introduces another external factor, which is the grid or utility provider, as shown in Fig. 9.​1 Generally, the utility provider's interest is aligned with that of the data center operator, where cost reduction of the data center is correlated to the demand reduction for the utility provider. However, the data center operator must satisfy the strict demand reduction requirement of the utility provider. If the operator fails to do so, it will be penalized (financially). Hence, the utility provider's reduction requirement heavily influences the decision of the data center operator, which, in turn, affects tenants' actions (i.e., whether to participate in demand response) [1, 2, 4, 5, 7, 8, 127, 128, 180, 182]. Another issue is the tenants' fairness in demand response under peak-based pricing by the utility. As mentioned in Sect. 1, the peak charge can account for the major portion of the electric bill [50, 92, 93]. Due to quantities used in pricing by the utility (i.e., mean and peak) and the complex statistics of the coincident peak itself, fair pricing of tenants is more complex than proportional or max-min fairness. To understand this issue clearly, Nasiriani et al. pose the following question [182]: how should an operator subject to peak-based pricing for its electric power consumption recover these costs from its tenants?" For volume-based charging, the operator can simply charge each tenant for its own electricity consumption. At present, the operator distributes the peak-based charge among tenants in proportion to their electricity consumption. This allocation can be considered unfair, as shown by the example in Fig. 7.1. The three tenants approximately consume the same amount of energy during the observation period. However, their contribution to the peak power (demand) charge differs significantly, as shown in Fig. 7.1. Tenant 1 has the lowest variability and thus contributes the least to the peak demand charge, whereas Tenant 3 has the highest variability and contributes the most to the peak demand charge. Similar unfairness can be seen in the demand response where the demand reduction of each tenant is considered [182].
Fig. 7.1Electricity demand traces of three tenants for a 12-h period



7.3 Challenges
The objective of demand response is to reduce the electricity demand (consumption) of the multi-tenant data center when the utility provider (grid) sends the demand response signal which involves a two-level incentive structure. The utility provider gives incentives to multi-tenant data centers to participate in demand response, and the data center operator, in turn, provides incentives to its tenants. Thus, the objective of the data center operator is to induce demand reduction of its tenants such that it meets the target set by the utility provider and does not need to compensate tenants out of its own pocket. Hence, the problem to be solved by the operator is how to coordinate power management for EDR.


References


1.
Ren, S. & Islam, M. A. (2014, June). Colocation demand response: Why do I turn off my servers? In 11th international conference on autonomic computing (pp. 201-208). Philadelphia, PA: USENIX Association. [Online]. Available: https://​goo.​gl/​DT5tmP.


2.
Niu, L., Guo, Y., Li, H., & Pan, M. (2016, December). A nash bargaining approach to emergency demand response in colocation data centers. In 2016 IEEE global communications conference (GLOBECOM) (pp. 1-6). [Online]. Available: https://​goo.​gl/​okffPu.


4.
Zhao, Z., Wu, F., Ren, S., Gao, X., Chen, G., & Cui, Y. (2016, August). Tech: A thermal-aware and cost efficient mechanism for colocation demand response. In 2016 45th international conference on parallel processing (ICPP) (pp. 464-473. [Online]. Available: https://​goo.​gl/​OUepr1.


5.
Ahmed, K., Islam, M. A., & Ren, S. (2015). A contract design approach for colocation data center demand response. In IEEE/ACM international conference on computer-aided design, ser. ICCAD '15 (pp. 635-640). Piscataway, NJ, USA: IEEE Press. [Online]. Available: http://​goo.​gl/​0ZTul9.


7.
Tran, N., Do, C., Ren, S., Han, Z., & Hong, C. (2015, December). Incentive mechanisms for economic and emergency demand responses of colocation datacenters. IEEE Journal on Selected Areas in Communications, 33(12), 2892-2905. [Online]. Available: http://​goo.​gl/​nmU1e8.


8.
Sun, Q., Ren, S., Wu, C., & Li, Z. (2016, June). An online incentive mechanism for emergency demand response in geo-distributed colocation data centers. In International conference on future energy systems, ser. e-Energy '16 (pp. 3:1-3:13). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​3PNA2Q.


9.
Data Center Colocation Market by Service Types (Retail, Wholesale), Industry Verticals (Banking & Insurance, IT & Telecom, Healthcare, Government & Public, Energy), End Users (SMEs, Large Enterprises) & by Regions - Global Forecast to 2020. (2016, January). Research and markets, Tech. Rep. [Online]. Available: http://​goo.​gl/​GA3mwG.


16.
U.S. Federal Energy Regulatory Commission. (2012, December). Assessment of demand response and advanced metering. Tech. Rep. [Online]. Available: http://​goo.​gl/​cvg8qy.


46.
Qureshi, A., Weber, R., Balakrishnan, H., Guttag, J., & Maggs, B. (2009). Cutting the electric bill for internet-scale systems. In ACM SIGCOMM Conference on Data Communication, ser. SIGCOMM '09 (pp. 123-134). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​aV7dMs.


47.
Rao, L., Liu, X., Xie, L., & Liu, W. (2010, March). Minimizing electricity cost: Optimization of distributed internet data centers in a multi-electricity-market environment. In IEEE INFOCOM (pp. 1-9). [Online]. Available: http://​goo.​gl/​ccIfXf.


50.
Xu, H. & Li, B. (2014). Reducing electricity demand charge for data centers with partial execution. In 5th international conference on future energy systems, ser. e-Energy '14 (pp. 51-61). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​Li8eq5.


56.
Liu, Z., Lin, M., Wierman, A., Low, S. H., & Andrew, L. L. (2011). Greening geographical load balancing. In ACM SIGMETRICS joint international conference on measurement and modeling of computer systems, ser. SIGMETRICS '11 (pp. 233-244). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​DHgS7v.


80.
Ghatikar, G., Ganti, V., Matson, N., & Piette, M. A. (2012, August). Demand response opportunities and enabling technologies for data centers: Findings from field studies. Berkeley Lab, Berkeley, CA, Tech. Rep. LBNL-5763E. [Online]. Available: http://​goo.​gl/​Z953FG.


81.
Li, S., Brocanelli, M., Zhang, W., & Wang, X. (2013, July). Data center power control for frequency regulation. In IEEE power and energy society general meeting, (PES) (pp. 1-5). [Online]. Available: http://​goo.​gl/​E7A9IO.


92.
Liu, Z., Wierman, A., Chen, Y., Razon, B., & Chen, N. (2013, June). Data center demand response: Avoiding the coincident peak via workload shifting and local generation. SIGMETRICS Performance Evaluation Review, 41(1), 341-342. [Online]. Available: http://​goo.​gl/​rvenlD.


93.
Wang, C., Urgaonkar, B., Wang, Q., & Kesidis, G. (2014, September). A hierarchical demand response framework for data center power cost optimization under real-world electricity pricing. In IEEE 22nd international symposium on modelling, analysis simulation of computer and telecommunication systems, (MASCOTS) (pp. 305-314). [Online]. Available: http://​goo.​gl/​ootCBH.


116.
EnerNOC. (2013). Ensuring U.S. grid security and reliability: U.S. EPAs proposed emergency backup generator rule. Tech. Rep. [Online]. Available: https://​goo.​gl/​Pzj5pE.


117.
Wierman, A., Liu, Z., Liu, I., & Mohsenian-Rad, H. (2014, November). Opportunities and challenges for data center demand response. In IEEE international green computing conference, Dallas, TX. [Online]. Available: http://​goo.​gl/​HDdXXH.


122.
Koomey, J. (2011). Growth in data center electricity use 2005 to 2010. Analytics Press, Oakland, CA, Tech. Rep. [Online]. Available: http://​goo.​gl/​efxT61.


127.
Chen, N., Ren, X., Ren, S., & Wierman, A. (2015, September). Greening multi-tenant data center demand response. SIGMETRICS Performance Evaluation Review, 43(2), 36-38. [Online]. Available: http://​goo.​gl/​HmcRnU.


128.
Zhang, L., Ren, S., Wu, C., & Li, Z. (2015, April). A truthful incentive mechanism for emergency demand response in colocation data centers. In IEEE INFOCOM, Hong Kong, China (pp. 2632-2640). [Online]. Available: http://​goo.​gl/​9KqeBv.


133.
Xu, H., Feng, C., & Li, B. (2015, June). Temperature aware workload management in geo-distributed data centers. IEEE Transactions on Parallel and Distributed Systems, 26(6), 1743-1753. [Online]. Available: http://​goo.​gl/​lsVqho.


145.
Mahmud, A. H. & Ren, S. (2013, August). Online capacity provisioning for carbon-neutral data center with demand-responsive electricity prices. SIGMETRICS Performance Evaluation Review, 41(2), 26-37. [Online]. Available: https://​goo.​gl/​V1TCAc.


151.
Liu, S., Ren, S., Quan, G., Zhao, M., & Ren, S. (2013). Profit aware load balancing for distributed cloud data centers. In International parallel and distributed processing symposium (pp. 611-622). [Online]. Available: https://​goo.​gl/​AQbgeV.


174.
Wikipedia. Cascading failure. Wikipedia Website. [Online]. Available: https://​goo.​gl/​lhjBBj.


175.
EnerNOC. (2009). Demand response: A multi-purpose resource for utilities and grid operations. Tech. Rep. [Online]. Available: http://​goo.​gl/​atcj5N.


176.
Managan, K. (2014, February). Demand response: A market overview. Institute for Building Efficiency, Tech. Rep. [Online]. Available: http://​goo.​gl/​mOEjRI.


177.
Ghamkhari, M. & Mohsenian-Rad, H. (2013, June). Energy and performance management of green data centers: A profit maximization approach. IEEE Transactions on Smart Grid, 4(2), 1017-1025. [Online]. Available: http://​goo.​gl/​0chcuz.


178.
Liu, Z., Liu, I., Low, S., & Wierman, A. (2014, June). Pricing data center demand response. SIGMETRICS Performance Evaluation Review, 42(1), 111-123. [Online]. Available: http://​goo.​gl/​3K7Nca.


179.
Tran, N., Ren, S., Han, Z., Jang, S. M., Moon, S. I., & Hong, C. S. (2014, June). Demand response of data centers: A real-time pricing game between utilities in smart grid. In 9th international workshop on feedback computing, (Feedback Computing 14). Philadelphia, PA: USENIX Association. [Online]. Available: https://​goo.​gl/​5MOj4x.


180.
Guo, Y. & Pan, M. (2015, November). Coordinated energy management for colocation data centers in smart grids. In 2015 IEEE international conference on smart grid communications, (SmartGridComm) (pp. 840-845).


182.
Nasiriani, N., Wang, C., Kesidis, G., Urgaonkar, B., Chen, L. Y., & Birke, R. (2015). On fair attribution of costs under peak-based pricing to cloud tenants. IEEE 23rd international symposium on modeling, analysis and simulation of computer and telecommunication systems, (MASCOTS) (pp. 51-60). [Online]. Available: https://​goo.​gl/​K3Ni6y.














© Springer International Publishing AG 2018

Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers


https://doi.org/10.1007/978-3-319-66062-2_8





8. System Model



Thant Zin Oo1 , 
Nguyen H. Tran1, 
Shaolei Ren2 and 

Choong Seon Hong
1




(1)
Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)


(2)
Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, CA, USA

 



Abstract
For smart grid, multi-tenant data centers play a major part in the demand response program due to their large energy demand. Emergency demand response is critical in preserving the electrical infrastructure (i.e., the grid) in emergency situations, such as extreme weather events. Further economic demand response programs can stabilize the energy market by shifting the electricity demand to off-peak durations. This part of the book examines the motivations, issues, and challenges involved in multi-tenant data center demand response. Further, it summarizes the formulated problems and the possible solutions.


Keywords
Multi-tenant data center
Demand response
Pricing
Randomized auction
Stackelberg game
Nash bargaining
Contract theory
Alternative direction method of multipliers (ADMM)



In demand response of multi-tenant data centers, there are three stakeholders involved: the utility provider, the data center operators, and the tenants. The multi-tenant data centers host a set of tenants . Other key performance indicators (KPIs) and metrics are mentioned in Chap. 2 Since demand response focuses on the present, KPIs are considered for only current time slot instead of the whole billing cycle. Hence, the time index is omitted from notations as in [80, 177, 178], e.g., x

i
(t) ⇒ x

i
.

8.1 Problem Formulations

8.1.1 Maximizing the Total Energy Demand Reduction [1]

 (8.1a)
 (8.1b)
 (8.1c)
 (8.1d)
where  is the unit monetary reward rate the utility provider offers the data center and other notations are given in Table 2.​4



8.1.2 Minimizing the Social Cost of a Multi-Tenant Data Center

8.1.2.1 Mixed Integer Programming Problem [127, 128]

 (8.2a)
 (8.2b)
 (8.2c)
 (8.2d)
where  is the energy demand reduction target set by the utility provider and other notations are given in Table 2.​4



8.1.2.2 Linear Programming Problem [180]
Let u

i
(m

i
) denote the cost incurred when tenant i turns off m

i
 servers. The load curtailment cost function u

i
(⋅ ) can take various forms depending on different goals of tenant i. For instance, it may include switching cost and delay cost [1]. Here, the cost function u

i
(⋅ ) is only assumed to be non-negative, increasing, convex, and u

i
(0) = 0.
The performance degradation due to turning off servers is modeled via M/G/1/PS (processor sharing) queuing model to analyze the workload serving process. Tenant i needs to ensure that the average delay for its workload can still meet the service level agreement (SLA) after turning off m

i
 servers. Therefore,  (8.3)
where  is the response time requirement as prescribed by the SLA for tenant i. The total power consumption of the data center is  when tenants coordinate their energy consumption.
The objective of the operator is to induce tenants' load curtailment in a way that minimizes the social cost defined as the sum of the total tenant costs due to load curtailment and the operator's electricity cost. Hence, the operator aims to solve:  (8.4a)
 (8.4b)
where the upper bound in (8.4b) is obtained by rearranging (8.3). Note that m

i
 is assumed not to be integer-valued, which is acceptable since the number of servers in a typical data center is large. Thus, both the objective function and the feasible set in (8.4) are convex, and hence the operator can efficiently compute the optimal solution using the interior-point method [164]. However, it requires the operator to know all the tenant cost functions and all the constraints, which may be impractical since they may contain some private information. Furthermore, scalability is a concern if the number of tenants is very large.



8.1.3 Maximizing the Social Welfare [2]

 (8.5a)
 (8.5b)
with the following assumption. For each tenant , the inconvenience cost function h

i
(Δe

i
) is convex, strictly increasing, and differentiable over the domain 0 ≤ Δe

i
 ≤ Δe

i

max, with h

i
(Δe

i
) = 0 when Δe

i
 = 0. Hence, the social welfare maximization problem (8.5) has a unique solution in . Let the first-order derivative of the cost function h

i
(Δe

i
) be h

i


′
(Δe

i
) whose inverse function is denoted as h

i


′−1(Δe

i
).


8.1.4 Maximizing the Social Cost Savings [3]
Let  represent the total amount of required energy reduction throughout the EDR event for a multi-tenant data center, i.e., , where s

t
 is the amount of energy reduction signaled by the utility provider at t. The overall cost of the operator is the sum of the rewards to the tenants and the overall cost due to diesel generation to cover the shortage in energy reduction, i.e.,  (8.6)
where ɛ

i
 is the per unit reward to tenant i and α is the per-unit cost of on-site diesel generation. The net cost of a tenant i is the cost due to energy reduction minus the reward received from the operator,  (8.7)
where ω

i
 is the claimed per-unit cost of energy reduction at tenant i (assuming ω

i
 = h

i
, which is the true unit cost of energy reduction). The overall social cost is the sum of the costs of the operator and its tenants, i.e.,  (8.8)

If no tenant participates in EDR through server energy reduction, the social cost would be the cost in using diesel generators to completely fulfill all the required energy reduction, which is . Hence, the social cost saving is  (8.9)
Maximizing this social cost saving is essentially equivalent to minimizing the social cost,  (8.10a)
 (8.10b)



8.1.5 Thermal-Aware Minimization via Backup Energy Storage [4]
This formulation considers EDR for a multi-tenant data center as an auction design with thermal-awareness. Unlike other formulations, the energy consumption of non-IT services, in particular cooling, is not characterized by PUE. Instead, the energy consumption of cooling is characterized by heat recirculation model [60]. Consider a set  of participating tenants and a set  of M servers.

8.1.5.1 Temperature and Heat Recirculation Model
Generally, the cooling energy consumption E
cool depends on the cooling load (which equals to the servers' energy consumption E
IT) and the coefficient of performance factor (CoP) denoted by C [183]:  (8.11)
where C(⋅ ) is a function of the temperature of the supplied cooling air, indicating the ratio between cooling load and the cooling energy. Different cooling systems (e.g., air-side economizer and chiller-based cooling) have different CoPs. The CoP of a mechanical Computer Room Air Conditioner (CRAC) unit in HP's Utility data center [60] is given as:  (8.12)
hence, the data center's total energy can be expressed as:  (8.13)

As shown in Fig. 8.1, the data center is often laid out with a hot-aisle/cold-aisle arrangement by installing the racks and perforated floor tiles on the raised floor. CRACs deliver cooling air to the front side of each server through the floor of cold aisles. Then, the air flows through the servers, gets heated, goes into the hot aisles, and finally gets extracted by air conditioner intakes to the outside. Server overheating can put the equipment in jeopardy and results in unplanned data center downtime incidents. Hence, CRAC needs to constantly provide cold air to ensure that each server's inlet temperature does not exceed a certain red-line threshold θ
red, referred to as "temperature constraint." Ideally, the temperature of supplied cooling air θ
sup can be set as θ
red. However, due to airflows, some of the server heat recirculates to the inlets of the other servers before being exhausted by air conditioners, and this is known as "heat recirculation." As a consequence, if θ
sup is set as θ
red, the actual inlet temperature of servers will be higher than θ
red.
Fig. 8.1System diagram of TECH


Hence, the operator needs to set a lower cooling air temperature than the red-line threshold to avoid the risk of overheating. To capture the heat recirculation inside a data center, a heat recirculation model is constructed based on Computational Fluids Dynamics [183]. Across-interference matrix  is introduced to describe the heat recirculation impact between each pair of servers. Each element b

ij
 denotes the impact of server i's heat on the inlet temperature increase of server j. Hence, the inlet temperature can be written as:  (8.14)
where z

j
 ∈ {0, 1} indicates whether server j is chosen for energy shedding (i.e., z

j
 = 1) or not (i.e., z

j
 = 0).


8.1.5.2 Auction Model
As tenants are rewarded to cut energy, the operator can set a higher θ
sup based on the heat recirculation model. C
0 and C
∗ denote the CoP before and after reconfiguring θ
sup, respectively. Hence, IT and cooling energy reductions are given by  (8.15)
 (8.16)

The auction composed of two major parts, i.e., winner selection and payment determination. Backup energy storage (BES) is considered to be expensive and environmentally unfriendly. Hence, the objective is to minimize the usage of BES in a cost efficient way, i.e., maximizing the amount of energy reduction by tenants as formulated below:  (8.17a)
 (8.17b)
 (8.17c)
 (8.17d)




8.1.6 Contract Design Formulation [5]
EDR scenario between the operator and its tenants is formulated as a contract between the seller and its buyers. Consider a data center with a set of N tenants. Different from earlier formulations, tenants are categorized to different types based on their energy reduction cost (a.k.a. "inconvenience cost") in contract design formulation. Tenants with same inconvenience cost are grouped in the same type. The types are denoted by θ

i
, where each tenant is included in one of the types, and Θ = { θ
1, θ
2, ..., θ

I
} denotes set consisting of all the tenant types. The number of tenants in type θ

i
 is denoted by .
When reducing energy, tenants will experience some costs, which can be interpreted as, e.g., revenue loss due to performance degradation. Denote the cost incurred by tenant of type θ

i
 as function of energy reduction as:  (8.18)
where  denotes cost of energy reduction, which is private information to tenants, and h(Δe(θ

i
)) represents cost as a general function of energy reduction of tenant of type θ

i
. Then, the utility of each tenant of type θ

i
 is defined as:  (8.19)
where v(θ

i
, 0) = 0 and r(θ

i
) denotes reward awarded to tenant of type θ

i
.
Then, the problem is formulated as minimizing the operator cost which is given as:  (8.20a)
 (8.20b)
 (8.20c)
 (8.20d)
where  denotes energy reduction constraint for EDR set by utility and denotes power usage effectiveness (PUE) of the data center that converts the IT energy reduction to the facility level energy reduction. Equation (8.20b) is the individual rationality constraint which ensures that participants in contract mechanism achieve non-negative payoff. Equation (8.20c) is the incentive compatibility constraint that ensures any tenant chooses its own type θ

i
 and not any other type θ

i


′
 to maximize its utility.


8.1.7 Stackelberg Game Formulation [6, 7]
The economic demand response of multi-tenant data centers is formulated a two-stage Stackelberg game between the operator (leaders) and its tenants (followers) [6, 7]. Economic demand response programs generally indicate how customers can actively respond to price signals [175] and are not mandatory. The observed hierarchical structure between the operator and its tenants can be modeled using a Stackelberg game approach. The strategies of players in each stage of this game are presented sequentially.

Tenants' Formulation at Stage-II: Since the operator is the leader with a first-move advantage, it will first announce a reward rate ɛ (in $/kWh) that it is willing to pay tenants for turning off their servers. Given ɛ, at Stage-II, each rational tenant i's strategy is to choose a number of turned-off servers m

i
 that will maximize its net utility as follows:  (8.21a)
 (8.21b)
Since the number of servers can be very large, e.g., thousands, m

i
 is relaxed as a continuous variable [56], and  (8.22)
which means h

i
(m

i
) is a strictly convex function when tenant i's server workload is less than its service rate, i.e., h

i


″
(m

i
) > 0 when . The feasible constraint  to (8.21b), which has no effect on problem (8.21) since its feasible solutions are always strictly less than  (i.e., ). Then, since u

i
(m

i
) is strictly concave, there exists a unique solution , for a given ɛ in Stage-II.

Operator's Formulation at Stage-I: Knowing that each tenant i's strategy will be m

i

∗(ɛ), the operator's strategy is to choose an optimal ɛ of the following profit maximization problem:  (8.23)
where V (⋅ ) is the operator's utility, which represents a financial compensation from the grid or a green certificated achieved for energy reduction, balanced with the cost spent for giving incentives to tenants .


8.1.8 Minimizing Social Cost for Geo-Distributed Multi-Tenant Data Centers [8]
Instead of a single multi-tenant data center, this formulation considers a number of multi-tenant data centers geographically located within the same region. Emergency demand response (EDR) typically occurs over an extended period of time throughout a wide region, over which many multiple data centers can be located. Let  be the set of multi-tenant data centers and  be the set of tenants in data center j. Then, the social cost minimization problem is given as:  (8.24a)
 (8.24b)
 (8.24c)
 (8.24d)
 (8.24e)
 (8.24f)
where, for tenant i in data center j at time t, Δe

i, j

(t) denotes the maximally possible energy reduction amount, f

i, j

(t) denotes workload-to-energy conversion factor, x

i, j

(t) denotes tenant i's reduction percentage, v

i

(t) denotes maximal deferrable workload amount, and w

i
 denotes the maximal deferrable workload amount of tenant i across all data centers during all T time slots.
Constraint (8.24b) specifies that for each tenant, the actual overall workload reduction at all the data centers throughout the entire EDR event cannot exceed the maximum workload reduction constraint w

i
 which is called the time-coupling workload reduction budget constraint. Equation (8.24c) states that the sum of tenants' reduced energy consumption and diesel-generated energy need to fulfill the EDR requirement set by the grid. Equation (8.24d) limits the total workload reduction over all data centers for each tenant i at each time t within the limit v

i

(t) that the tenant specifies. Equation (8.24e) guarantees that the operator will not ask any tenant to reduce more workload than the maximum amount it specifies in its bid. Note that backup diesel generator is designed to support the entire data center's operation for a couple of days and hence the operator can always use diesel generator to fulfill any amount of energy reduction requirement for EDR [127]. In other words, there always exists a feasible solution to the social cost minimization problem (8.24).
Complete future information (including energy reduction signals and tenants' true bids over the T time slots) is needed beforehand to solve the optimal off-line problem (8.24). However, the operator needs to respond to EDR signals in an on-line manner without such future information. Hence, a primal-dual algorithm design framework is used and the dual of the primal social cost minimization problem (8.24) is written as:  (8.25a)
 (8.25b)
 (8.25c)
 (8.25d)
Table 8.1 shows the correspondence between constraints and variables in the primal and dual problems, i.e., (8.24) and (8.25).
Table 8.1Variable-constraint correspondencePrimal(8.24b)
x

i, j

(t)
(8.24c)
y

j

(t)
(8.24d)(8.24e)Dual
β

i

(8.25b)
z

j

(t)
(8.25c)
σ

i

(t)

ν

i, j

(t)





References


1.
Ren, S. & Islam, M. A. (2014, June). Colocation demand response: Why do I turn off my servers? In 11th international conference on autonomic computing (pp. 201-208). Philadelphia, PA: USENIX Association. [Online]. Available: https://​goo.​gl/​DT5tmP.


2.
Niu, L., Guo, Y., Li, H., & Pan, M. (2016, December). A nash bargaining approach to emergency demand response in colocation data centers. In 2016 IEEE global communications conference (GLOBECOM) (pp. 1-6). [Online]. Available: https://​goo.​gl/​okffPu.


3.
Sun, Q., Wu, C., Ren, S., & Li, Z. (2015, June). Fair rewarding in colocation data centers: Truthful mechanism for emergency demand response. In IEEE 23rd international symposium on quality of service (IWQoS) (pp. 359-368). [Online]. Available: https://​goo.​gl/​WesrxS.


4.
Zhao, Z., Wu, F., Ren, S., Gao, X., Chen, G., & Cui, Y. (2016, August). Tech: A thermal-aware and cost efficient mechanism for colocation demand response. In 2016 45th international conference on parallel processing (ICPP) (pp. 464-473. [Online]. Available: https://​goo.​gl/​OUepr1.


5.
Ahmed, K., Islam, M. A., & Ren, S. (2015). A contract design approach for colocation data center demand response. In IEEE/ACM international conference on computer-aided design, ser. ICCAD '15 (pp. 635-640). Piscataway, NJ, USA: IEEE Press. [Online]. Available: http://​goo.​gl/​0ZTul9.


6.
Tran, N. H., Do, C. T., Hong, C. S., Ren, S., & Han, Z. (2015, November). Coordinated colocation datacenters for economic demand responce. SIGMETRICS Performance Evaluation Review, 43(3), 34-37. [Online]. Available: http://​goo.​gl/​WtcQYZ.


7.
Tran, N., Do, C., Ren, S., Han, Z., & Hong, C. (2015, December). Incentive mechanisms for economic and emergency demand responses of colocation datacenters. IEEE Journal on Selected Areas in Communications, 33(12), 2892-2905. [Online]. Available: http://​goo.​gl/​nmU1e8.


8.
Sun, Q., Ren, S., Wu, C., & Li, Z. (2016, June). An online incentive mechanism for emergency demand response in geo-distributed colocation data centers. In International conference on future energy systems, ser. e-Energy '16 (pp. 3:1-3:13). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​3PNA2Q.


56.
Liu, Z., Lin, M., Wierman, A., Low, S. H., & Andrew, L. L. (2011). Greening geographical load balancing. In ACM SIGMETRICS joint international conference on measurement and modeling of computer systems, ser. SIGMETRICS '11 (pp. 233-244). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​DHgS7v.


60.
Moore, J., Chase, J., Ranganathan, P., & Sharma, R. (2005). Making scheduling "Cool": Temperature-aware workload placement in data centers. In USENIX annual technical conference, ser. ATEC '05 (pp. 5-5). Berkeley, CA, USA: USENIX Association. [Online]. Available: http://​goo.​gl/​hMgS5G.


80.
Ghatikar, G., Ganti, V., Matson, N., & Piette, M. A. (2012, August). Demand response opportunities and enabling technologies for data centers: Findings from field studies. Berkeley Lab, Berkeley, CA, Tech. Rep. LBNL-5763E. [Online]. Available: http://​goo.​gl/​Z953FG.


127.
Chen, N., Ren, X., Ren, S., & Wierman, A. (2015, September). Greening multi-tenant data center demand response. SIGMETRICS Performance Evaluation Review, 43(2), 36-38. [Online]. Available: http://​goo.​gl/​HmcRnU.


128.
Zhang, L., Ren, S., Wu, C., & Li, Z. (2015, April). A truthful incentive mechanism for emergency demand response in colocation data centers. In IEEE INFOCOM, Hong Kong, China (pp. 2632-2640). [Online]. Available: http://​goo.​gl/​9KqeBv.


164.
Boyd, S. & Vandenberghe, L. (2004). Convex optimization. New York, NY: Cambridge University Press. [Online]. Available: http://​goo.​gl/​3YTKaJ.


175.
EnerNOC. (2009). Demand response: A multi-purpose resource for utilities and grid operations. Tech. Rep. [Online]. Available: http://​goo.​gl/​atcj5N.


177.
Ghamkhari, M. & Mohsenian-Rad, H. (2013, June). Energy and performance management of green data centers: A profit maximization approach. IEEE Transactions on Smart Grid, 4(2), 1017-1025. [Online]. Available: http://​goo.​gl/​0chcuz.


178.
Liu, Z., Liu, I., Low, S., & Wierman, A. (2014, June). Pricing data center demand response. SIGMETRICS Performance Evaluation Review, 42(1), 111-123. [Online]. Available: http://​goo.​gl/​3K7Nca.


180.
Guo, Y. & Pan, M. (2015, November). Coordinated energy management for colocation data centers in smart grids. In 2015 IEEE international conference on smart grid communications, (SmartGridComm) (pp. 840-845).


183.
Tang, Q., Mukherjee, T., Gupta, S. K. S., & Cayton, P. (2006, October). Sensor-based fast thermal evaluation model for energy efficient high-performance datacenters. In 4th international conference on intelligent sensing and information processing (pp. 203-208).














© Springer International Publishing AG 2018

Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers


https://doi.org/10.1007/978-3-319-66062-2_9





9. Solutions



Thant Zin Oo1 , 
Nguyen H. Tran1, 
Shaolei Ren2 and 

Choong Seon Hong
1




(1)
Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)


(2)
Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, CA, USA

 



Abstract
For smart grid, multi-tenant data centers play a major part in the demand response program due to their large energy demand. Emergency demand response is critical in preserving the electrical infrastructure (i.e., the grid) in emergency situations, such as extreme weather events. Further economic demand response programs can stabilize the energy market by shifting the electricity demand to off-peak durations. This chapter presents the possible solutions to the demand response problem in multi-tenant data centers.


Keywords
Multi-tenant data center
Demand response
Pricing
Randomized auction
Stackelberg game
Nash bargaining
Contract theory
Alternative direction method of multipliers (ADMM)




9.1 Incentivizing Colocation Tenants for Demand Response (iCODE)
Ren et al. [1] were the first to propose multi-tenant data center demand response. They consider problem (8.1) which maximizes the energy demand reduction. The authors use a reverse auction approach to solve (8.1) and propose an on-line algorithm iCODE.
The steps involved in a reverse auction or procurement auction are shown in Fig. 9.1. First, the operator receives a demand response signal from the utility provider or the grid. Second, the operator solicits bids from the tenants. Third, the tenants submit bids containing the amount of energy demand reduction and the reward for the reduction, i.e., . Finally, the operator decides the winning bids and makes payments. The process is voluntary and each tenants decides its bid at its own discretion. If a tenant decides not to participate, it submits (0, 0) as a bid. Tenants may also ask for arbitrarily high payments, but in doing so will make their bids less likely to be accepted.Fig. 9.1Steps involved in demand response: pricing approach (PA) and auction approach (AA)

For tenants to participate in demand response, they need to be given (monetary) rewards or incentives. Tenant i's reward for turning of m

i
 servers and reducing energy demand by Δe

i
 is  (9.1) where ω

i
 ≥ 1 is referred to as greediness of tenant i, ω

i

delay converts delay cost to monetary values, i.e., the larger the value ω

i

delay, the more tenant i cares about its delay performance [43]. Further, κ

i
(m

i
, λ

i
) and h

i
(m

i
) are given in (2.​9) and (2.​10), respectively.
The operator must decide winning bids by solving (8.1) which maximizes the total energy reduction subject to the constraint that the operator does not need to compensate out of its own pocket, i.e., (8.1b). Equation (8.1d) specifies that the operator can only select "energy reduction, payment" pairs out of the bids submitted by tenants to honor their requests.
The objective of energy reduction maximization benefits all parties involved: the utility provider can reduce peak power supply, tenants receive their requested monetary incentives if their bids are accepted, and the operator can reduce its energy bill and/or seek green certifications (e.g., LEED [112]) due to lower energy consumption. iCODE can also be adapted for other purposes (e.g., maximizing the operator's profit by changing the objective function of (8.1a), if permitted by regulations).
Equation (8.1) is NP-hard and can be solved by various approximate solutions [184]. However, the authors used the branch and bound technique, which can yield a sub-optimal solution with a reasonably low complexity [185]. The steps involved in the branch and bound technique are summarized as follows:
1.Relax (8.1) into a convex programming problem and solve it using the various time efficient methods in [164] to obtain the upper bound on the optimal value of energy reduction. 2.Use a greedy-based approach (e.g., select the bids in ascending order of Δe

i
∕r

i
(Δe

i
)) to find the lower bound on the optimal value of energy reduction. 3.
(a)If the obtained upper and lower bounds are sufficiently close, then choose the greedy solution, because its energy reduction is close to the upper bound (and hence optimum, too). (b)Otherwise, (8.1) can be recursively solved by fixing some bids to be selected and solving a smaller-scale sub-problem.
i.To solve the sub-problem, find lower/upper bounds via greedy/relaxation approach. ii.If the bounds are still far apart, further decompose the sub-problem into an even smaller-scale sub-problem. 
 
Repeat this process until the gap between the two bounds is sufficiently small or the maximum iteration number is reached. 

Note that the operator receives demand response signal from utility provider well beforehand and there is no need to solve (8.1) in real-time [177, 178].

9.1.1 Simulations and Results
The authors performed trace-based simulations to evaluate iCODE. The authors considered the scenario in which no tenants participate in demand response as a benchmark. It is called NDR (Non-Demand Response), which is the status quo in the multi-tenant data center.

9.1.1.1 Simulation Setup
The authors considered a multi-tenant data center located in New York, NY, with a PUE of 1.6. The multi-tenant data center participates in hour-ahead demand response program: when needed, the utility provider sends demand response request 1 h ahead, while each demand respond period lasts 15 min. Figure 9.2 shows a snapshot of the utility provider's 1-day compensation rate for energy reduction on February 24, 2014, obtained from [186]. Fig. 9.2Utility provider compensation rate awarded to the operator for energy reduction

Three tenants are considered each of which represents multiple tenants in practice and has 10,000 homogeneous servers with 150 W static and 100 W dynamic power. Tenant #1 and Tenant #2 process delay-sensitive workload, while Tenant #3 processes delay-tolerant workload. The three tenants' workload traces are obtained from [43] ("Hotmail" and "MSR") and [172] ("Wikipedia"). Figure 9.3 illustrates a snapshot of the traces, where the workloads are normalized with respect to the maximum service capacity of each tenant's servers (with an average utilization of 15%). The default settings for tenant models are shown in the following table.
TenantsTenant #1Tenant #2Tenant #3Service rate μ

i
 (jobs/h)360,000180,00030Delay cost ω

i


delay
 (¢/ms/106jobs)30200.4Switching cost ω
0 (¢/server)0.50.50.5Greediness factor111Soft average delay threshold12 ms25 ms175 sAverage delay constraint20 ms40 ms300 s
Fig. 9.3Normalized workload traces of Hotmail, Wikipedia, and MSR. Each time slot is 15 min



9.1.1.2 Comparison Between iCODE and NDR
Figure 9.4 shows the energy reduction by iCODE compared to NDR. It can be seen that more than 4 MWh energy reduction per hour can be achieved, which is a fairly significant energy reduction (equivalent to thousands of households) and demonstrates the big potential of multi-tenant data center demand response. Next, Fig. 9.5 shows the hourly energy consumptions by iCODE and NDR, indicating that more than 50% energy can be reduced in some hours due to the low server utilization in the multi-tenant data center.
Fig. 9.4Energy reduction by iCODE

Fig. 9.5Energy consumption

Figure 9.6 shows the monetary incentive received by different tenants. Note that there is some "residual" incentive paid to the operator by the utility provider, because sometimes tenants do not seek as high incentives as the utility provider gives. Figure 9.7 shows the barely noticeable performance degradation experienced by tenants which are compared to their soft delay thresholds. There is an up to around 1.5 ms increase in average delay beyond the threshold for delay-sensitive Tenant #1 and 0.5 ms for Tenant #2. Tenant #3 has 30 s delay, which is acceptable for delay-tolerant workloads. If tenants cannot tolerate any delay exceeding their thresholds, they can easily remove those bids resulting in intolerable delay performance.
Fig. 9.6Incentives received. No incentives are provided in NDR
Fig. 9.7Average delay exceeding the soft threshold in iCODE




9.1.1.3 Impact of Workload Over-Prediction
To cope with unexpected possible traffic spikes, tenants can either turn on more servers as a backup or deliberately overestimate the workload arrival rate by a certain over-prediction factor. The higher the over-prediction factor, the more a tenant over-predicts. Intuitively, when tenants are more conservative and tend more to over-predict workloads, fewer number of servers will be turned off. However, Figs. 9.8 and 9.9 show that even when tenants overestimate the workloads by 30%, the energy reduction for demand response is not significantly compromised. The authors choose 30% because recent studies have shown that the workload prediction error is typically within 30% [187].
Fig. 9.8Impact of workload over-prediction on energy reduction
Fig. 9.9Impact of workload over-prediction on Tenant #1's delay over soft threshold



9.1.1.4 Impact of Greediness
Tenants may be greedier in the sense that they desire more than their true costs for turning off servers. Here, the authors increase the greediness factor ω

i
 for tenants. This also captures the scenarios that tenants are less willing to participate in demand response unless they are provided sufficiently large incentives. Figures 9.10 and 9.11 show that as tenants are becoming more greedy, the performance becomes better and the energy reduction decreases. Nonetheless, asking for higher payments than actual costs may not be of tenants' interests, because doing so will reduce tenants' financial rewards yet without improving their delay performances as seen by comparing Figs. 9.7 and 9.11.Fig. 9.10Impact of greediness over-prediction on energy reduction
Fig. 9.11Impact of greediness over-prediction on Tenant #1's delay over soft threshold





9.2 Truthful Incentive Mechanism (Truth-DR)
Zhang et al. consider multi-tenant data center demand response as a social cost minimization (a.k.a. winner determination) problem, i.e., (8.2) [128]. The authors proposed a randomized truthful auction called Truth-DR to solve (8.2) and the basic steps involved in a reverse auction are shown in Fig. 9.1. The utility of tenant i is defined as the payment it receives minus its true cost, i.e., r

i
(Δe

i
) − h

i
(Δe

i
). Social cost is a commonly studied metric in mechanism design and data center demand response [178].

9.2.1 2-Approximation Algorithm
The social cost minimization problem (8.2) belongs to minimum knapsack problems and is NP-hard [165]. Hence, direct application of the Vickrey-Clarke-Groves (VCG) mechanism is computationally infeasible, since VCG requires exactly solving the underlying winner determination problem multiple times. Thus, the authors design a randomized auction that is truthful in expectation and also computationally efficient [128].
First, the authors design an efficient primal-dual algorithm to provide a feasible solution to (8.2). Let  be a subset of bids in . Define , denoting how much energy reduction the operator still needs to achieve the target , when all bids in  are accepted. Let  denote the contribution of an additional bid i in making up the discrepancy. The enhanced linear program relaxation is  (9.2a)  (9.2b)  (9.2c) where the authors only consider battery backup systems, i.e., y = E
4 and E
3 = E
4 = 0. Constraint (9.2b) can be considered as an enumeration of all possible solutions to achieve the energy reduction target. Equation (9.2b) assumes that all bids in subset , are accepted, and limit the solution space to decisions on other bids in , to make up for the gap  to the energy reduction target. Clearly any feasible mixed integer solution (9.2) is feasible to the original problem (8.2), and vice versa. Next, the dual of (9.2) by introducing a dual variable  corresponding to each constraint in (9.2b).  (9.3a)  (9.3b)  (9.3c)  (9.3d) Algorithm 6 shows the approximation algorithm, based on the linear program (9.2) and its dual (9.3), to derive a feasible, 2-approximate solution to social cost minimization problem in (8.2). The idea of the algorithm is to construct a mixed integer solution to (9.2) and a feasible solution to its dual (9.3) iteratively by increasing the dual variable corresponding to the current set of bids to accept, , until the aggregate power from accepted bids in  reaches the energy reduction target .

Algorithm 6 Primal-dual 2-approximation algorithm for (8.2)





Lemma 9.1

Algorithm 

6
 computes a feasible solution to (8.2) and its relaxed linear program (9.2), as well as a feasible solution to dual (9.3).



Proof
The proof of Lemma 9.1 is found in the technical report [188]. ■



Theorem 9.1

Algorithm 

6
 is a 2-approximation algorithm to the problem in (8.2); it achieves a social cost that is at most two times the optimal social cost of (8.2).



Proof
The proof of Theorem 9.1 is found in the technical report [188]. ■



Algorithm 7 Truth-DR: Truthful randomized auction






9.2.2 The Randomized Auction
Next, the idea of Truth-DR is explained as follows: The optimal fractional solution to linear programming relaxation in (9.2) is computed. Next, the fractional solution is decomposed into a convex combination of feasible, mixed integer solutions to (8.2) using a linear program duality-based decomposition technique. The decomposition exploits the covering structure of (8.2) [167, 168, 189]. Then, one of the mixed integer solutions is randomly picked as the outcome of the auction, using their weights in the convex combination as probabilities. Next the payments to the winners are computed which satisfy the sufficient and necessary condition for truthfulness. The auction mechanism is given in Algorithm 7.

(1) Optimal Fractional Solution
The optimal fractional solution  can be computed by solving (9.2), using an efficient linear programming solution technique such as the primal-dual interior-point method.


(2) Convex Decomposition
The goal of the decomposition is to find ν

k
 ∈ [0, 1] and a set of mixed integer solutions  to (8.2), such that , , and .
Hence, to enable a feasible decomposition, the optimal fractional solution is multiplied by a scaling factor β [167]. In addition,  is used to replace . The linear program for this convex decomposition is  (9.5a)  (9.5b)  (9.5c)  (9.5d)  (9.5e) Since  has an exponential number of elements, (9.5) has an exponential number of variables which make directly (9.5) difficult. Hence, the dual problem of (9.5), which has an exponential number of constraints, is considered.  (9.6a)  (9.6b)  (9.6c) where , ξ, and η are dual variables. The ellipsoid method [168] can solve the dual problem (9.6) efficiently in polynomial time, though it has exponentially many constraints.


Lemma 9.2

The decomposition method correctly obtains a polynomial number of mixed integer solutions x

k

's to the social cost minimization problem (8.2), and convex combination weights ν

k

's which achieve the optimal objective value  for (9.5), in polynomial time.



Proof
The proof of Lemma 9.2 is found in the technical report [188]. ■



(3) Winner Determination and Payment
The payments are computed according to the following sufficient and necessary condition of truthfulness. Let P

i
(h

i
) be the probability that tenant i wins the bidding and receives reward h

i
. Let  be all the bids except (h

i
, Δe

i
).


Lemma 9.3

Given fixed bids  from all other tenants, the probability that tenant i wins, P

i
(h

i
), is monotonically non-increasing in h

i
 with Truth-DR. Moreover, 
.



Proof
The proof of Lemma 9.3 is found in the technical report [188]. ■


Then, the sufficient and necessary conditions to obtain truthfulness in Truth-DR are given as:

Theorem 9.2

[
169
, 170
], a randomized auction with bids  and payment  is truthful in expectation if and only if for any bidder i, 
P

i
(h

i
) is monotonically non-increasing in 
;


;

The expected payment satisfies:

.



Hence, the payments of winning tenants are  (9.7) where  is the optimal solution of variable x

i
 to (9.2), when tenant i's cost is h

i
, and others are .
Since P

i
(h

i
) can be obtained by solving (9.2) given h

i
, the payment r

i
 can be calculated numerically.

Theorem 9.3
Truth-DR in Algorithm 

7
 runs in polynomial time, is truthful in expectation, individually rational, and achieves 2-approximation in data center-wide social cost.



Proof
The proof of Theorem 9.3 is found in the technical report [188]. ■


Thus, Truth-DR enables EDR for multi-tenant data center at minimum data center-wide (social) cost, which transforms the data center's formidable power demand into an asset.


9.2.3 Simulations and Results
The authors performed trace-based simulations to evaluate Truth-DR.

9.2.3.1 Simulation Setup
The authors consider a multi-tenant data center, with six participating tenants located at Ashburn, VA, which is a major data center market served by PJM [118]. Each tenant has 10,000 homogeneous servers with idle/static and computing powers of 100 and 150 W each, respectively [1]. The PUE of the multi-tenant data center is set to 1.6, and the default average cost for using backup energy storage, α, is considered 150 $/MWh [1, 68]. The peak power demand of the data center is 24 MW.
The authors scale down the total energy reduction by PJM's EDR on January 7, 2014 (when there was severe weather condition) [190], to levels around 15% of the data center's maximum power, to produce the experimental energy reduction targets [80].
Figure 9.12 shows the total EDRs energy reduction by PJM. There were 11 EDR events, starting from 5 a.m. to 11 a.m. and 16 p.m. to 19 p.m., respectively, and each event lasted 1 h. Figure 9.13 shows the workload traces which are collected from [43] ("Hotmail" and "MSR") and [172] ("Wikipedia"). Due to limited traces, they are duplicated with randomness of up to 20% to generate the six tenants' workloads. All workloads are normalized with respect to each tenant's maximum service capacity.
Fig. 9.12Total EDR by PJM on January 7, 2014
Fig. 9.13Normalized workload traces



9.2.3.2 Close-to-Minimum Social Cost
First, the authors compare the social costs achieved by Truth-DR, the optimal integer solution to (8.2), as well as the optimal fractional solution to (9.2), as illustrated in Fig. 9.14. The average social cost of Truth-DR is obtained from 10 simulation runs. Truth-DR provides almost the optimal performance at most time slots. The results show a close-to-optimum performance in practice, much better than the theoretical performance bound of a competitive ratio of 2.Fig. 9.14Total EDR by PJM on January 7, 2014



9.2.3.3 Satisfying Energy Reduction Target
Figure 9.15 plots the energy reduction achieved by Truth-DR at each time period, showing that Truth-DR for EDR reaches all energy reduction targets exactly at most time slots except t = 11, where Truth-DR produces even more reduction than requested. Figure 9.16 shows the detail the energy reduction provided by each tenant and backup energy storage.Fig. 9.15Normalized workload traces
Fig. 9.16Total EDR by PJM on January 7, 2014



9.2.3.4 Tenants' Non-Negative Utilities
Figure 9.17 illustrates the payments paid by the operator to all tenants. It can be seen that tenant i receives no payment when it does not reduce its energy consumption. Figure 9.18 shows that all tenants receive non-negative utilities by reducing server energy and participating in EDR, confirming the individual rationality.Fig. 9.17Normalized workload traces
Fig. 9.18Total EDR by PJM on January 7, 2014



9.2.3.5 Social Cost Reduction Compared to "Backup Energy Storage Only"
The authors show that Truth-DR reduces the data center-wide social cost compared to using only backup energy storage. The cost of backup energy storage α differs from 150 to 350 $/MWh, where 350 $/MWh is the cost for using diesel generators based on typical diesel efficiency. Figure 9.19 shows that there is a trend that the social cost saving is more significant as the backup energy storage usage gets costlier. Even when α = 150 $/MWh, there is still a significant saving. Hence, it is shown that Truth-DR enables multi-tenant data center EDR at a low social cost by providing incentives to tenants for participation.Fig. 9.19Normalized workload traces





9.3 Greening Multi-Tenant Data Center Demand Response (ColoEDR)
Chen et al. consider a common type of demand response program is mandatory EDR [127]. The DR participants typically sign contracts with a utility provider in advance (e.g., 3 years ahead in PJM [118]) and receive financial rebates for their committed load reduction even if no EDR signals are triggered. However, non-compliance (i.e., failure to cut load as required during EDR) incurs heavy penalty [118].
When the operator receives an EDR signal from the utility provider, it has two options for satisfying the load reduction. First, without involving the tenants, the operator can use its on-site backup diesel generator. The amount of energy reduction by diesel generation is denoted by y and the cost per kWh of diesel generation (e.g., for fuels) is denoted by α. Since only on-site diesel generation is considered, y = E
3, E
2 = 0, E
4 = 0.
Alternatively, the operator could try to extract energy reductions from its tenants. When shedding energy consumption, a tenant i will incur some costs denoted by function h

i
(Δe

i
). These costs could be due to wear-and-tear, performance degradation, workload shifting, etc. It is a standard assumption that the cost functions are continuous, convex, and strictly increasing. The authors proposed a simple and practical mechanism ColoEDR that is discussed below:
1.The data center operator receives an EDR reduction target  and broadcasts to tenants a parameterized supply function  (9.8) where ɛ is the offered reward for each kWh of energy reduction and r

i
 is the bidding values that can be chosen by tenant i. 2.The participating tenants respond by placing their bids r

i
. 3.The operator decides the amount of local generation and market clearing price ɛ to minimize its cost. Given any y, the market clearing price has to satisfy ,1 thus  (9.9) To determine the amount of local generation y, the operator minimizes the cost of the two load-reduction options, i.e.,  (9.10)
 4.EDR is performed. , tenant i sheds Δe

i
(r

i
, ɛ) amount of energy consumption and receives ɛ Δe

i
(r

i
, ɛ) reward. 

From an operational perspective, ColoEDR has several advantages: First, the overhead is marginal since the tenants only need to communicate one number. Second, the data center operator collects the amount of reduction by each tenant, while each tenant's private cost function is hidden by the supply function and hence not solicited. Third, ColoEDR guarantees that the data center operator will not incur a higher cost than the case using only diesel generators. Moreover, ColoEDR pays a uniform price to all participating tenants and hence ensures fairness. While ColoEDR may not be truthful, it is near optimal despite tenants' strategic behavior.

ColoEDR is mostly related to [191], which considers an inelastic demand  that must be satisfied via N suppliers using supply function mechanism and proves efficient bounds on the resulting equilibrium. In contrast, ColoEDR assumes that the market operator has an outside option (diesel) that can be used to satisfy the inelastic demand. This leads to a multistage game between the tenants and the profit maximizing operator.
VCG-based mechanisms can be considered as natural alternatives to ColoEDR. While these mechanisms are truthful, they violate all the four properties discussed above. Under such approaches, tenants must submit complex bids revealing their true costs; payment made to tenants may be unbounded, and prices to tenants are differentiated, raising unfairness issues. On the other hand, while ColoEDR may not be truthful, it is near optimal despite tenants' strategic behavior.
To evaluate the efficiency of ColoEDR, the (socially) optimal outcome is a benchmark. This outcome relies on the operator having full knowledge of tenants' costs and full control over tenants' energy reduction, and tries to minimize the social cost by solving (8.2). The objective (8.2a) can be interpreted as the tenants' cost plus the operator's cost. Note that the internal payment transfer between the operator and tenants cancels, and does not impact the social cost. Moreover, the Lagrange multiplier of (8.2c) can be interpreted as the social optimal price p, i.e., given this price as reward for energy reduction, each tenant will individually reduce their energy by Δe

i
 that corresponds to the social cost minimization solution in (8.2).
Note that the operator has no control over either the utility provider (i.e., supplier) or the tenants (i.e., customer). The demand reduction target sent by the utility provider is completely independent of any action taken by the operator. However, this is not the case for the actions taken by tenants, i.e., the bids they submitted. Hence, the authors performed analyses for two scenarios involving tenants: price-taking tenants and price-anticipating tenants. In the price-taking scenario, the multi-tenant data center can be seen as a market with many small-scale tenants of similar sizes, who each have little power to impact the market clearing price. In the price-anticipating scenario, the multi-tenant data center hosts a few large-scale tenants who can impact the market price through their bids, i.e., oligopoly setting.

9.3.1 Price-Taking Tenants
When tenants are price-taking, they maximize their net utility, which is the difference between the payment they receive and the cost of energy reduction, given!by:  (9.11)


Definition 9.1
A triple  is a (price-taking) market equilibrium if , and the market is cleared by setting price ɛ according to (9.9), and the amount of on-site generation is decided by (9.10).


Theorem 9.4

When tenants are price-taking, there is a unique market equilibrium  for ColoEDR, and the resulting allocation  can be characterized by the optimal solution of the following problem:  (9.12a)  (9.12b)  (9.12c)




9.3.2 Price-Anticipating Tenants
Price-anticipating tenants realize that they can change the market price by their bids, and adjust their bids accordingly. In particular, they realize that the local generation and market price are set by (9.10) and (9.9), and by first order optimality,  (9.13) Given bids from the other tenants , each price-anticipating tenant i optimizes the following cost over bidding value b

i
:  (9.14) The price-anticipating equilibrium is defined as follows:

Definition 9.2
A triple  is a (price-anticipating) market equilibrium if , and the market is cleared by setting price ɛ according to (9.9), and the amount of on-site generation is decided by (9.10).


Theorem 9.5

When tenants are price-anticipating, there is a unique market equilibrium  for ColoEDR, and the resulting allocation  can be characterized by the optimal solution of the following problem:  (9.15a)  (9.15b)  (9.15c) where, for Δe

i
 ≥ 0,  (9.16) and for Δe

i
 < 0, 
.


Although the form of  in (9.16) looks complicated, this simple linear approximation gives useful intuition.

Lemma 9.4

For all modified cost

, for any

,

.


Lemma 9.4 shows that the difference between the modified cost function and the true cost diminishes as the number of tenants N in the data center increases.
From Theorems 9.4 and 9.5, the efficiency bound on ColoEDR can be characterized. The results for the price-taking and price-anticipating analyses are summarized in Tables 9.1 and 9.2, where price ratio compares the market price, operator saving compares operator's cost of EDR, and welfare loss compares the social cost of market equilibrium with the optimal allocation. In Table 9.2, price markup shows the increase in price when tenants are price-anticipating compared to when they are price-taking.Table 9.1Performance guarantee of ColoEDR compared to the social optimal allocationTenantsPrice ratioOperator savingWelfare lossPricing-taking





Pricing-anticipating






Table 9.2Comparison between price-anticipating against price-taking equilibria of ColoEDR
Price markupExtra dieselOperator saving







In summary, firstly, ColoEDR always benefits the operator, since the operator saving is always positive. Secondly, regardless of tenants being price-taking or price-anticipating, ColoEDR is approximately socially cost-minimizing as the number of tenants grows. Thirdly, ColoEDR also gives the tenants approximately the social optimal payment, since both the operator's additional benefit and welfare loss are bounded above by . The loss in payment for tenants compared to the social optimal is at most , which approaches 0 as the number of tenants N grows. Lastly, Table 9.2 shows that while price-anticipating tenants drive up the market price and increase the cost of the operator, ColoEDR is robust towards this behavior and the loss approaches 0 as the number of tenants N grows.




9.4 Fair Rewarding in EDR (FairDR)
Sun et al. consider the EDR of a single multi-tenant data center as a social cost savings maximization problem and use an auction mechanism to achieve fair rewarding of tenants [3]. The authors study a bidding model where the operator solicits bids from the (voluntarily participating) tenants only once through the whole course of the EDR, upon the start of the EDR. The bid from tenant i is a three-tuple (Δd

i
, Δc

i
, ω

i
) where Δd

i
 denotes the agreed maximum overall energy reduction by tenant i throughout the entire course of the EDR, Δc

i
 is the maximal amount of energy that tenant i is willing to cut per time slot, and ω

i
 is the cost per-unit energy reduction claimed by tenant i. h

i
 is used to represent the true unit cost of tenant i.

Definition 9.3 (Truthfulness)
The auction mechanism is truthful if each tenant  achieves the largest utility u

i
 throughout the EDR event by reporting its true cost for each unit of power reduction, i.e., ω

i
 = h

i
, regardless of the bids of other tenants.


9.4.1 Auction Algorithm (FairDR)
Before an EDR event is anticipated to occur, the auction algorithm chooses some tenants as eligible tenants, i.e., those which will receive an opportunity to reduce energy consumption and get rewarded. The algorithm also decides the reward to be offered to each selected eligible tenant. Then, as the EDR event proceeds, whenever an energy reduction signal arrives, the algorithm selects the actual tenant(s) among the eligible tenants and decides the amount of energy reduction each selected tenant should cut.

9.4.1.1 Eligible Tenant Initialization
Let ΔD denote the sum of maximum amounts of energy reduction of all tenants through the entire course of the EDR, i.e., . The eligible tenant selection steps proceed as follows:
1.Pick q among the set of numbers {21, 22, ..., 2
i
, ..., ΔD} uniformly at random, which represents the maximal, total amount of energy that the operator will ask tenants to cut through the entire course of the EDR. 2.Sort all tenants by the per-unit claimed cost in non-decreasing order. 3.From the start of the ordered sequence, find the minimal continuous sub-sequence where the sum of tenants' energy reduction capacity (Δd

i
) is not less than q. The tenants in this sub-sequence, denoted by , are the eligible tenants. 4.Obtain a random permutation of the sequence , and denote the permutation by . 

Intuitively, tenants with low claimed costs (per-unit energy reduction) should be selected as eligible tenants, to maximize social cost saving. A randomization step is used to avoid tenants under-claiming their costs to get selected (truthfulness guarantee) and make the order of tenant selection independent of their claimed costs. Note that only the subset of eligible tenants, not the entire sequence of N tenants, is randomized to ensure that mostly tenants with low costs are allocated power reduction. To decide the set of eligible tenants, the authors need to "guess" the total amount of energy reduction from all future signals that may arrive, q. By making a guess in this way, the guessed total amount of energy reduction is not less than half, nor more than twice of the actual amount.
Hence, the algorithm does not rely on any future information for this purpose, but only make a rough random guess of q between 2 and ΔD—overall possible energy cut from all tenants. On the one hand, q may be larger than the actual total amount of energy reduction requests from the power grid (∑

t = 1

T

s

t
), in which case, not all the eligible tenants in the permutation sequence  will be called on. On the other hand, q may also be possibly smaller than the actual total energy reduction request, in which case, q − ∑

t = 1

T

s

t
 will be covered by energy produced by the diesel generator.


9.4.1.2 Tenant Rewarding
The per-unit-energy-reduction reward for each eligible tenant is calculated at the beginning of the EDR event as:  (9.17) where f

j
 denotes the maximally possible amount of energy reduction that a tenant j can be allocated, and f

j

−i
 is the maximally possible amount of energy reduction that a tenant j can be allocated if tenant i does not participate in the auction. Both terms are calculated according to q and Δd

i
 without considering per-time-slot energy reduction capacity Δc

i
 of each tenant i. Intuitively, the reward computed in (9.17) is a VCG price computed using f

i
 s, the maximal possible amount of energy reduction. For an ineligible tenant j, define f

j
 = 0.
When tenant i does not participate in the auction, the reward ɛ

j
 is set to the per-unit-energy-reduction externality of tenant i, as the overall cost difference of all tenants other than i. When tenant i participates in the auction, the cost difference is divided by the maximally possible amount of tenant i's energy reduction.


9.4.1.3 Winner Determination and Energy Reduction Allocation
When an energy reduction signal arrives, the operator chooses top-ranked tenants in the permutation sequence . Then, the operator maximally allocates the energy reduction amount s

t
 > 0 to the tenants according to their sequence in  as long as Δd

i
 and Δc

i
 of a tenant are not exceeded.
The complete auction algorithm FairDR is given in Algorithm 8.

Algorithm 8 FairDR: Demand response auction with on-line reduction signal
arrivals







9.4.2 Theoretical Analysis

Theorem 9.6

With FairDR, the winning tenants receive similar per-unit rewards, and the difference between ɛ

i
 and ɛ

j
 of any two winners is upper bounded by 
, where 
, 
, and Δω

max
 = max
i ∈ [1, N−1] | ω

i
 −ω

i+1 | , with {ω
1, ω
2, ..., ω

N
} being a sorted sequence of per-unit claimed costs of tenants in non-decreasing order.


Here, V represents the maximal ratio of overall reduction capacities of any two tenants, Δd
min is the minimal energy reduction capacity among all tenants, and ω
max denotes the maximal difference of adjacent per-unit claimed costs in the sorted sequence.

Lemma 9.5
FairDR achieves individual rationality, i.e., no winning tenant's per-unit reward is less than its per-unit cost: ɛ

i
 ≥ ω

i
 or 
.


Consider the case where the total amount of energy reduction requests in all the reduction signals (∑

t = 1

T

s

t
) is large enough, such that all eligible tenants would be asked to reduce energy consumption during the EDR event. In this case, the total amount of energy reduction by all eligible tenants except the last picked eligible tenant is Δe

i
 = f

i
 = Δd

i
, that by the last picked eligible tenant is Δe

i
 = f

i
 ≤ Δd

i
, and that by an ineligible tenants is Δe

i
 = f

i
 = 0.

Lemma 9.6

An eligible tenant i which reduces energy consumption to its full capacity, i.e., Δe

i
 = f

i
 = Δd

i

, during the EDR event cannot increase its utility by misreporting its claimed per-unit cost.



Lemma 9.7

An eligible tenant whose energy reduction is less than its full capacity, i.e., Δe

i
 = f

i
 < Δd

i

, during the EDR event cannot increase its utility by misreporting its claimed per-unit cost.



Lemma 9.8

An ineligible tenant cannot increase its utility by misreporting its claimed per-unit cost.



Lemma 9.9

In the case that not all eligible tenants are called on for reducing energy consumption during the EDR event, a tenant cannot manipulate its claimed per-unit cost to increase its utility.



Theorem 9.7
FairDR is a truthful mechanism.



Lemma 9.10

In the ideal case that 
, i.e., per-time-slot energy reduction of each tenant is only limited by its full capacity, the expected competitive ratio of FairDR is  in social cost saving, where  representing the overall energy reduction capacity of all tenants, and  denoting the maximal ratio of overall energy reduction capacities of any two tenants.



Lemma 9.11

In each time slot, the ratio of the cost saving in the general case to that in the ideal case is greater than β, where

represents the minimal ratio of per-time-slot energy reduction capacity to the overall energy reduction capacity among all tenants.



Theorem 9.8

FairDR achieves an expected competitive ratio of

in social cost saving, where

,

and

.



Proof
The proofs of Lemmas 9.5-9.11 and Theorems 9.6-9.8 can be found in [3, Sect. III].



9.4.3 Simulations and Results
The authors performed trace-based simulations to evaluate FaidDR. A multi-tenant data center located in Ashburn, VA, which is a major data center market served by PJM [192]. The data center includes five participating tenants, housing 600, 650, 700, 750, and 800 homogeneous servers, respectively. Each server has a peak power of 250 W when busy and a static power of 150 W when idle. Hence, the tenants' peak server power ranges between 150 and 200 kW. The diesel generator cost α is 150 $/MWh based on typical power generation efficiency [193].

9.4.3.1 Simulation Setups
Energy reduction target is set based on the PJM's EDR report [190] on January 7, 2014 (due to the severity of the weather condition on that day). Figure 9.20 shows the hourly energy reduction requests for the considered data center throughout an 8-h EDR event on January 7, 2014 (5 a.m.-12 p.m.).Fig. 9.20Total EDR energy reduction by PJM on January 7, 2014

Figure 9.21 shows the workload trace (measuring hourly server utilization) collected from [43, 172]. The tenants are assigned these traces. Based on the server power model [43], tenants' total energy consumption is within 1200-1600 kWh during the hours spanned by the EDR event, varying according to the workload. The overall energy reduction capacity (Δd

i
) and the maximum energy reduction during each hour (Δc

i
) are 15% of the overall energy consumption during the EDR event at the peak power rate of the respective tenant, and 50% of the per-hour peak power consumption of the respective tenant.Fig. 9.21Normalized workload

The claimed cost of each tenant is set between 1 and 2 cents/server (equivalently, 0.067-0.133 $/kWh), [43]. Additionally, for computation efficiency of FairDR, a minimal energy reduction unit is set as 10 kWh (the typical energy usage of one server rack in 1 h), i.e., tenants will migrate the workloads and turn off servers rack-by-rack (subject to performance requirements) when reducing energy consumption.
The authors compare FairDR with the optimal mechanism and Truth-DR [128]. The optimal mechanism, denoted by OPT, achieves the maximal social cost saving by deciding the global optimal allocation with information of all reduction signals.


9.4.3.2 Fairness in rewarding
Figure 9.22 compares the Coefficients of Variation (CVs) of rewards to winning tenants among OPT, Truth-DR and FairDR, when the EDR event lasts for different numbers of time slots. A data point at a specific T represents the CV computed when the respective mechanism runs for T time slots to allocate energy reduction upon arrivals of the first T reduction signals as shown in Fig. 9.20. Coefficient of variation is a statistical measure of the dispersion of data points in a data series around the mean, and it is defined as the ratio of the standard deviation σ to the mean μ, i.e., . As can be seen, despite of the increase of total number of time slots that the EDR event lasts, FairDR always achieves a CV close to 0, implying that in comparison to OPT and Truth-DR, FairDR indeed provides the most fair rewarding to tenants.Fig. 9.22Comparison of coefficient of variation among different mechanisms



9.4.3.3 Social Cost and Social Cost Savings

FairDR with randomization steps obtains the expected social cost and social cost saving achieved using all possible values of q. Figures 9.23 and 9.24 show that FairDR experiences a small increase of social cost and a small loss of social cost saving, as compared to other mechanisms, a trade-off for our mechanism to provide truthfulness and fairness guarantee in the long-term auction, which the other mechanisms do not provide. Fig. 9.23Comparison of social cost among different mechanisms
Fig. 9.24Comparison of cost saving among different mechanisms



9.4.3.4 Competitive Ratio in Social Cost Savings
Figures 9.25, 9.26, 9.27, 9.28 show the competitive ratio achieved by FairDR in social cost saving by varying different parameters. In Fig. 9.28, the capacity ratio represents the ratio of Δc

i
 of a tenant to the peak energy consumption of the tenant in one time slot (this ratio is set to be the same for all tenants), where the peak energy consumption is computed assuming all servers of the tenant are running at peak power usage. In Fig. 9.28, energy ratio represents the ratio of Δd

i
 of a tenant to peak energy consumption of the tenant throughout the EDR (this ratio is also set to be the same for all tenants). With the increase of the total duration of the EDR event, T, the competitive ratio increases but becomes stable starting from T = 5. Figure 9.25 shows that the competitive ratio only increases slightly with the increase of the cost of the diesel generator. Figures 9.26, 9.27, 9.28 reveal that the ratio does not change much with different number of participating tenants, and different values of Δc

i
 and Δd

i
.
Fig. 9.25Competitive ratio in social cost saving: different T, different α

Fig. 9.26Competitive ration in social cost saving: different T, different N

Fig. 9.27Competitive ratio in social cost saving: different T, different ratios of Δc

i
 to peak per-time-slot power of tenant i

Fig. 9.28Competitive ratio in social cost saving: different T, different ratios Δd

i
 to peak overall power of tenant i






9.5 Thermal-Aware Cost Efficient Mechanism for EDR (TECH)
Zhao et al. explicitly consider the thermal affects in a multi-tenant data center for EDR [4]. Then, the authors design an auction mechanism for winner selection and payment calculation. First, they explore the solutions concepts related to auction mechanism.

Definition 9.4 (Dominant Strategy [194])
Strategy a

i
 is player i's dominant strategy, if for any strategy a

i


′
 ≠ a

i
 and any other player's strategy profile a
−i
: u

i
(a

i
, a
−i
) ≥ u

i
(a

i


′
, a
−i
)


Definition 9.5 (Incentive-Compatible)
The reverse-auction-based mechanism is incentive-compatible, if for any agent i, revealing its true cost h

i
 is its dominant strategy, if for any cost h

i


′
 ≤ c

i
 and any other player's strategy profile h
−i
: u

i
(h

i
, h
−i
) ≥ u

i
(h

i


′
, h
−i
).


Definition 9.6 (Individual-Rationality)
Individual-rationality means each agent i in game expects to gain no less utility than staying outside, which means u

i
 ≥ 0.


Definition 9.7 (Strategy-Proof Mechanism [195])
A mechanism is strategy-proof when it satisfies both incentive-compatibility and individual-rationality.


9.5.1 Reverse Auction Mechanism (TECH)
The EDR auction has significant differences from classic reverse auctions in two aspects, which make the design of EDR auction much more challenging. Firstly, the amount of energy reduction declared by each of the tenants is not necessarily equal to the total effective reduction can be achieved by the tenant. Secondly, the authors consider that their data center has an on-site Backup Energy Storage (BES), which can be used to generate energy with a certain per-unit cost in case of EDR. Hence, the cost efficiency of each selected winning tenant should be higher than that of the BES. TECH works in three major modules: (i) winner selection, (ii) BES energy calculation, and (iii) payment determination.

9.5.1.1 Winner Selection
The intuition is to select the tenants, who have the highest cost efficiencies defined as the ratio between the tenant's effective energy reduction contribution and declared cost. Hence, each tenant's effective contribution needs to be quantified. However, without knowing the set of auction winners, it is computationally intractable to determine a tenant's effective contribution due to the complexity of CoP. Thus, the authors introduce a new notion of conservative contribution, which is the sum of a tenant's declared energy reduction and the cooling system's energy saving on removing only the heat generated by the considered tenant's servers.
The conservative contribution v

i
 of a tenant  is defined as follows:  (9.18) where θ
sup
0 and θ
sup
∗ are original and adjusted temperatures of supplied cooling air before and after the auction, respectively, if only tenant i is selected as the winner.
To satisfy the cost efficiency constraint, BES is treated as an additional bidder with a truthful bid and unlimited power supply. The cost efficiency of BES is 1∕α, where α is the cost of producing a unit energy from BES. Then, the tenants are sorted along with the BES in a non-increasing order according to their cost efficiencies. Suppose that there are l tenants with higher cost efficiencies than the BES. The sorted list Γ
1 is as follows: 

Next, the winners are iteratively selected following the sorted list Γ
1. In the k-th iteration, if adding the k-th tenant from the sorted list Γ
1 still keeps the winner set more cost efficient than the BES, i.e.,  it is added to the set  of winners, and set its chosen flag x

k
 = 1.  is used to denote the winner set. The process of winner selection stops whenever the winner set is not cost efficient enough or the "bid" of BES is reached. Algorithm 9 shows the pseudo-code of the winner determination procedure.

Algorithm 9 Winner Selection






9.5.1.2 BES Energy Calculation
If the total effective energy reduction achieved by the set of winners does not reach the reduction target, the BES has to fill the gap. The energy supply needed from the BES can be calculated as follows:  where  is the optimal temperature of supplied cooling air when the set W of tenants are selected as winners.


9.5.1.3 Payment Determination
The authors adopt the critical bid to determine each winner's payment. Intuitively, the critical bid of a bidder in a reversed auction is the maximum cost that the bidder can declare, such that she can still win the auction. Assume that b

k
 is the last bid to be selected. To determine the payment of r

i
 to a winning tenant , calculate the maximum cost for b

i
 to make him still winning. Therefore, b

i
 should be located before b

k+1, and cost efficient enough. In order to locate before b

k+1, b

i
's efficiency should be at least higher than b

k+1, which means  (9.19) Further, to keep the winner set efficient, b

i
 should satisfy  (9.20)

The payment r

i
 for b

i
 should be the maximum cost to enable those two constraint (9.19) and (9.20) simultaneously,  (9.21) When tenant i encounters the BES's bid, the payment for each tenant i is  (9.22) The tenants, who are not selected as winners, do not receive any payment, i.e., .

Theorem 9.9
TECH is a strategy-proof auction mechanism.



Theorem 9.10
TECH satisfies all constraints, including temperature constraint, reduction target constraint, and cost-efficiency constraint.



Proof
The proofs of Theorems 9.9 and 9.10 are given in [4, Sect. III]. ■





9.5.2 
TECH-EH

In TECH, each tenant's bid can only be accepted as a whole or not. The authors extend TECH to adapt to partially winning bids, while keeping compatibility with binary auction outcomes. In order to do so, two new problems have to be addressed. The first problem is how to split a tenant's claimed cost over its servers considering the profile of per server energy reductions without changing the form of bids. The authors adopt proportional division, i.e., splitting the claimed cost among a tenants' servers proportional to the energy reductions of them.
The second problem is how to determine payment for each tenant. Since different winning servers (if any) belonging to the same tenant may have distinct critical bids, a single critical bid can no longer be used to determine the payments for them without breaching strategy-proof property. Hence, the critical bid for each winning servers sharing the same tenant should be submitted. The authors propose an incremental way to determine the critical bids for (and payments to) the winning servers of each partially/fully winning tenant. Note that BES energy calculation module of TECH-EH remains the same as that of TECH.

9.5.2.1 Winner Selection
First, build the set of server bids for each tenant by splitting the tenant's claimed cost proportional to each server's possible energy reduction. Given tenant i's bid b

i
 = (L

i
, h

i
), build the set of server bids  for tenant i as,  (9.23) where Δe

ij
 is the amount of energy reduction on server s

ij
 specified by tenant i,  is the portion of cost on server s

ij
.  is used to denote the set of all server bids, i.e., .
Next, quantify the conservative contribution of each server based on its split bid. A server bid can be regarded as a tenant bid containing only a single server. The conservative contribution  of a server bid b

ij
 is  (9.24)

Then, sort all the servers along with the BES in a non-increasing order with respect to their cost efficiencies. For clarity, the servers' indexes from 1 to M are used. 

Next, the winners (i.e., servers) are iteratively selected from the sorted list Γ
2. In the k-th iteration, if adding the k-th bid from the sorted list Γ
2 still keeps the winner set more cost efficient than the BES, i.e.,  it is added to the set  of winning server, and set its chosen flag x

k
 = 1. Here,  is used to denote the set of winning servers. The stopping rule is the same as that of TECH.


9.5.2.2 Payment Determination
In TECH-EH, the critical bids for the winning servers belonging to the same tenant are calculated in an incremental way. Servers belonging to a tenant i can also be sorted by their cost efficiencies in a non-increasing order,  where . If server s

ij
 is selected as a winner in the auction outcome, then all the servers from s

i1 to s

i(j−1) in the sorted list  must also be selected as winner(s). Based on this observation, the payment determination module can be improved.
For each winning server  belonging to tenant i, pick the servers s

i1, s

i2, ..., s

i(j−1) from the sorted list  and the other tenants' servers, and sort them together with the BES by their cost efficiencies in a non-increasing order,  where . Let s

k
 be the last server selected by Algorithm 9 given sorted list Γ
2

Δ
. The two possible cases for tenant payment are
1.If s

k+1 is a server with a higher cost efficiency than BES in list Γ
2

Δ
, then the payment r

ij
 to server s

ij
 is 
 2.If s

k+1 is the BES in the list Γ
2

Δ
, then the payment r

ij
 to server s

ij
 is . 

After determining the payment to each of the winning servers of tenant i, the total payment r

i
 to tenant i can be calculated as:  Same as TECH, the tenants, who are not selected, do not receive any payments.

Theorem 9.11
TECH-EH is a strategy-proof auction mechanism.



Theorem 9.12
TECH-EH satisfies the three constraints, including temperature constraints, reduction target constraints, and cost efficiency constraints.



Proof
The proofs of Theorems 9.11 and 9.12 are given in [4, Sect. IV]. ■





9.5.3 Simulations and Results
The authors performed trace-based simulations to evaluate TECH and TECH-EH.

9.5.3.1 Simulation Setup
The authors consider a multi-tenant data center, which contains four rows of racks. Each row consists of eight 40U racks. All servers are 1U servers with 100 W idle power and 150 W computing power. Therefore, there are totally 1280 servers. The cost of backup energy is 35 cents/kWh. The peak IT power consumption of data center is 320 kW.
The reduction target data for EDR is obtained from PJM (a regional transmission organization which manages the wholesale electricity market of 13 states in the USA). The data is collected on January 7, 2014 [118]. The reduction target trace is scaled down to levels around 25%-30% of the data center's maximum computing power. The normalized EDR trace is shown in Fig. 9.29.Fig. 9.29Normalized EDR reduction target

For tenants' workload traces, real workload traces are collected from "Google Search," "Youtube," "Wikipedia," "MSR," "MSN," and "Hotmail." All traces are normalized to ensure that the utilization of each tenant's servers is around 50%. The normalized traces are shown in Fig. 9.30. For evaluation, each tenant cost is proportional with its total power reduction of servers, and evaluated at 6.7-80 cents/kWh [127].Fig. 9.30Normalized workloads

In Figs. 9.31, 9.32,9.33, 9.34, results for four different mechanisms are shown in the following sequence: (i) TECH-EH, (ii) TECH, (iii) TECH without cooling reconfiguration (i.e., θ
sup is set as 18 ∘C), and (iv) BES only. Different colors are used to denote the sources of energy reduction, including BES, cooling energy reduction, and server energy reduction.Fig. 9.31Energy reduction for 30% reduction target and six tenants
Fig. 9.32Energy reduction for 25% reduction target and six tenants
Fig. 9.33Energy reduction for 30% reduction target and 12 tenants
Fig. 9.34Energy reduction for 25% reduction target and 12 tenants



9.5.3.2 Energy Reduction
Figures 9.31 and 9.32 show the energy reduction components for six tenants with 30% and 25% reduction targets, respectively. Similarly, Figs. 9.33 and 9.34 show the energy reduction components for 12 tenants with 30% and 25% reduction targets, respectively. From Figs. 9.31, 9.32, 9.33, 9.34, it can be seen that TECH-EH uses the minimum amount of BES, while both TECH-EH and TECH can significantly reduce BES usage compared to the thermal-oblivious mechanism. Further, Figs. 9.31, 9.32, 9.33, 9.34 show that the energy reduction target is fulfilled in all EDR periods. Moreover, TECH-EH and TECH can even provide more energy reduction than required during some periods (due to the active participation of tenants).



9.5.3.3 Cost Efficiency
Figures 9.35, 9.36, 9.37, 9.38 show the costs incurred. From Figs. 9.35, 9.36, 9.37, 9.38, it can be observed that by using TECH-EH and TECH, the operator always spends no more than the BES-only method during all EDR periods.
Fig. 9.35Cost for 30% reduction target and six tenants
Fig. 9.36Cost for 25% reduction target and six tenants
Fig. 9.37Cost for 30% reduction target and 12 tenants
Fig. 9.38Cost for 25% reduction target and 12 tenants



9.5.3.4 Temperature of Supplied Cooling Air
Figures 9.39 and 9.40 show the trajectory of the temperature of supplied air θ
sup for three mechanisms: (i) TECH, (ii) TECH-EH, and (iii) TECH without cooling reconfiguration (i.e., setting the T
sup as a ineffective, safe, and flat temperature 18 ∘C). TECH and TECH-EH can reconfigure the T
sup to the range from 20 to 22 ∘C, which can save 16% to 29% cooling energy, compared to TECH without cooling reconfiguration.
Fig. 9.39The temperature of cooling air for 30% reduction target
Fig. 9.40The temperature of cooling air for 25% reduction target



9.5.3.5 Tenant's Energy Reduction
Figures 9.41 and 9.42 show the energy reduction caused by tenants with three different mechanisms for six tenants. It can be seen that TECH and TECH-EH can enable at least 20% more tenants' energy reduction than TECH without cooling reconfiguring. Furthermore, TECH-EH can reduce 14% more energy than TECH on average under both 30% and 25% reduction targets.
Fig. 9.41Energy reduction of tenants for 30% reduction target
Fig. 9.42Energy reduction of tenants for 25% reduction target



9.5.3.6 Number of Chosen Servers
Figures 9.43 and 9.44 show the number of chosen servers in three different mechanisms with six tenants. The figures show that TECH-EH can choose more servers as winners than TECH in some periods.
Fig. 9.43Number of chosen servers for 30% reduction target
Fig. 9.44Number of chosen servers for 25% reduction target





9.6 Nash Bargaining Solution
Niu et al. studied how the operator should give incentives to tenants to reduce their electricity consumption during an emergency demand response period [2]. In particular, the authors focused on how to share the social welfare generated between the operator and its tenants under concurrent bargaining protocol. They formulated the problem as social welfare maximization problem (8.5). The objective or social welfare is defined as the total energy reduction minus the total inconvenience cost.
The goal of Nash bargaining is to arrive at a mutually beneficial amount of energy reduction and rewards between the operator and its tenants. Although the tenants can reduce their power consumption at lower cost than that of starting up the on-site generator, they have no incentive to reduce their power consumption, which will incur inconvenience cost. To compensate the tenants to participate in EDR, the operator will initiate the bargaining with the tenants, expecting to determine the energy reductions from tenants  and the rewards the operator should offer . Intuitively, the tenant reducing more power consumption should receive a higher reward. The bargaining addresses the conflict of the interests between the operator and its tenants. On the one hand, the operator desires maximum amount of energy reduction with minimum rewards given to its tenants. On the other hand, the tenants desire minimum amount of energy reduction with maximum rewards received from the operator. If the operator and a tenant i determine a mutually beneficial solution (r

i

∗, Δe

i

∗) where the individual rationalities of both the operator and the tenant are guaranteed, we say the operator and tenant i reach an agreement. Note that the agreement cannot be imposed to either the operator or the tenant without its approval. On the contrary, if the operator is not willing to offer any reward to tenant i or tenant i is not willing to reduce its energy consumption, we say the operator and tenant i reach a disagreement, i.e., (r

i
, Δe

i
) = (0, 0).

9.6.1 One-to-One Bargaining
One-to-one bargaining case is considered where the tenant set N = {i}. To give the tenant incentives for participation into EDR, the operator bargains with the tenant to determine the energy reduction amount of the tenant and its corresponding reward. First, consider that the bargaining ends at the disagreement point (r

i

0, Δe

i

0) = (0, 0). The utilities of the operator and the tenant i at the disagreement point are denoted as V
0 = 0 and u

i

0 = 0, respectively. Next, consider the operator and the tenant reach an agreement. Then the payoffs obtained by the tenant and the operator are calculated as  (9.25)  (9.26) respectively. The Nash bargaining solution (NBS) of the one-to-one bargaining between the operator and tenant i can be obtained by solving the following optimization problem [194, 196, 197]:  (9.27a)  (9.27b)  (9.27c)  (9.27d)


Lemma 9.12

The optimal power reduction of tenant i under the one-to-one bargaining is
 (9.28)
The corresponding optimal reward of tenant i under the one-to-one bargaining is
 (9.29)



Proof
Taking logarithm of the objective function, it can be seen that the one-to-one bargaining problem has a unique solution due to its concavity. Define an auxiliary variable . Then, using the auxiliary variable, the one-to-one bargaining problem (9.27) is rewritten as follows:  (9.30a)  (9.30b)  (9.30c)  (9.30d)  (9.30e) Then, the solution is verified by checking the Karush-Kuhn-Tucker (KKT) conditions of the optimization problem above under the following three cases:
1.If the optimization problem is unconstrained, calculate Δe

i

∗ = h

i


′−1(α) using the first order optimality condition. 2.If , then the utilities of the operator and the tenant increase over the domain . Therefore, the optimal power reduction is . 3.If , the utilities of the operator and the tenant increase over the domain Δe

i
 ∈ [0, Δe

i

max]. Therefore, the optimal power reduction is Δe

i

∗ = Δe

i

max. 

Next, given any optimal power reduction Δe

i
, (9.29) can be proven using the first-order optimality conditions with respect to r

i
.



9.6.2 Concurrent Bargaining
Based on the one-to-one bargaining, the authors derive the general one-to-many NBS under the concurrent bargaining, and analyze the connection between the NBS and the social welfare maximization problem. In this case, all tenants bargain with the operator concurrently. The insight of the concurrent bargaining is that N one-to-one bargains happen simultaneously.
As in one-to-one bargaining, start the analysis of the solution under disagreement. For a tenant , if the operator and the tenant cannot reach an agreement, the tenant will not turn off any server for energy reduction and thus receive no payment from the operator, i.e., r

i

0 = 0, and Δe

i

0 = 0. Then the utility of the tenant under the disagreement is zero, i.e., u

i

0 = 0. For the operator, its utility under the disagreement at the worst-case scenario (i.e., no agreement is reached between the operator and any tenant, and the operator has to use its on-site generator to satisfy the EDR target ) is also zero.
Next consider the case that a tenant  and the operator reach an agreement (r

i

∗, Δe

i

∗). Then the utility of tenant i is given in (9.25). The utility of the operator can be obtained by considering the case that it finishes the bargaining with all tenants given in (9.26). Since the utilities of the operator and tenants under the disagreement are zero, (9.25) and (9.26) also represent the utility gains of the tenants and the operator, respectively. Therefore, the NBS under the concurrent bargaining can be obtained by solving the following optimization problem:  (9.31a)  (9.31b)  (9.31c)  (9.31d)  (9.31e)


Lemma 9.13

Given the energy reduction of the other N − 1 tenants 
, the energy reduction of tenant i is  (9.32) The corresponding reward issued to tenant i for reducing its energy consumption is  (9.33) where N′ denotes the number of tenants that participate into EDR.



Proof
First, note that the concurrent bargaining problem (9.31) is concave, and thus, has a unique solution. Similar to the proof of Lemma 9.12, an auxiliary variable  is introduced to prove (9.32) holds. Next, the concurrent bargaining problem (9.31) is rewritten, and the KKT conditions are checked. Next, we take logarithm of the objective function (9.31a) as  (9.34) Given the power reduction profile , solve the set of equations obtained using the first-order optimality conditions with respect to :  (9.35) Substituting (9.35) into (9.31) yields (9.33).

The properties of the Nash bargaining solutions are briefly discussed below:

Individual Rationality From (9.33), the reward should compensate the inconvenience cost incurred by the tenant during the EDR event. Therefore, the tenant should receive non-negative utility, implying that individual rationality is satisfied.

Max-Min Fairness From (9.33), the utility of each tenant is 1∕(N + 1) fraction of the social welfare, which equals to the utility of the operator. Therefore, the operator and all tenants have equitable utility gains under the concurrent bargaining, and thus NBS satisfies the max-min fairness property.

Theorem 9.13 (Social welfare maximization)

The NBS under the concurrent bargaining maximizes the social welfare given in (8.5a).



Pareto Efficiency Based on Lemma 9.13 and Theorem 9.13, the social welfare is shared by the operator and tenants in a Pareto efficient manner, i.e., no player including the operator and all tenants can improve its utility without impairing other players' utilities.



9.7 Contract Design Approach (Contract-DR)
Ahmed et al. studied emergency demand response for a multi-tenant data center to maintain the transmission stability in power grid [5]. The authors formulated the emergency demand response as (8.20) and proposed a contract design approach called Contract-DR to solve it. Their main idea is to group tenants according to inconvenience cost θ

i
 given in (8.​18). There are Θ = { θ
1,  θ
2,  ...,  θ

I
} types of tenants depending on inconvenience cost. At the worst case, the total number of tenants is equal to the number of types (i.e., I = N), and the contract approach is the same as other auction approaches. Contract-DR focuses on two constraints: individual rationality and incentive compatibility for all participating tenants to ensure their profitability. Note that the authors only considered energy storage devices (i.e., batteries), hence y = E
4, E
2 = 0, E
3 = 0.

9.7.1 Contract Design with Complete Information
First, assume that the operator has complete knowledge of type of each tenant to establish a theoretical baseline case. Since the operator knows the tenants' types, it can design a contract such that each tenant chooses contract element only specific for its own type. There are contract types in the list that are finite and discrete. Then, the optimization problem for the operator now becomes to choose contract item consisting of the following pair:  to minimize its operating cost:  (9.36) Further, the individual rationality constraint (8.20b) is tight at the optimality. Hence, the operator will leave zero utility to the tenants. Thus, reward received by type-θ

i
 user is r
∗(θ

i
) = v(θ

i
, Δe(θ

i
)). Next, the operator needs to decide the optimal energy reduction for each tenant type θ

i
, i.e.,  (9.37) Equation (9.37) is convex and can be efficiently solved.


9.7.2 Contract Design with Incomplete Information
Next, consider the case where the operator lacks information of tenant type, which is private information to the tenant. Based on prior knowledge of tenants' type distribution, the operator maximizes its own expected utility. Denote tenants' numbers of all types as , which are random variables and follow a discrete binomial distribution [198]. Hence, the optimization problem can be written as:  (9.38)  (9.39) Note that, incentive compatibility 8.20c and individual rationality 8.20b constraints bind at the optimal solution [199]. Therefore,  (9.40) And the optimization problem (9.38) becomes  (9.41)  (9.42) where r
∗(θ

i
) is defined in (9.40). As in [200], the exhaustive search is used to solve the optimization problem (9.41).


9.7.3 Feasibility and Optimality Proofs
The following two conditions ensure feasibility and optimality of the designed contracts.

Conditions for feasibility: Let the set of contracts be  with tenant costs . Then the contract is feasible if and only if: 


Conditions for optimality: For the optimal solution, individual rationality condition for the lowest type and adjacent incentive compatibility constraints are binding. All other conditions can be ignored. Then, we can state (9.40) is optimal.

Theorem 9.14

The simplified contract designs in (9.37) and (9.41) minimize the operator's cost while satisfying both individual rational and incentive compatibility constraints.


The proof of 9.14 can be found in [5].


9.7.4 Simulations and Results
The authors performed trace-based simulations to evaluate Contract-DR.

9.7.4.1 Simulation Settings
The authors consider a data center, with four tenants located at Council Bluffs, Iowa which is served by PJM Interconnection (a Regional Transmission Organization in the United States) [192]. They consider demand response program offered by PJM for the simulation settings. The number of tenants is later increased to 10 and 30 and distributes the tenants to four different types as given in Table 9.3. The authors collected workload traces from four different sources: web service traces (e.g., Hotmail, Wikipedia), I/O log (Microsoft Research)), and a university data center from May 1-7, 2012. The workloads are normalized with respect to the maximum capacity of each tenant's servers, and the average utilization of 30% is maintained. Figures 9.45 and 9.46 show a snapshot of the traces.Fig. 9.45Normalized workload traces of Tenants #1 & #2
Fig. 9.46Normalized workload traces of Tenants #3 & #4
Table 9.3Simulation parameters for Contract-DR
TenantsTenant #1Tenant #2Tenant #3Tenant #4Energy reduction cost (¢/server)2.7533.253.5Service rates (jobs/h)360 × 103
180 × 103
30270 × 103
Maximum delay threshold50 ms100 ms600 s60 msTypesType #1Type #2Type #3Type #410 tenants| θ
1 | = 1| θ
2 | = 4| θ
3 | = 4| θ
4 | = 130 tenants| θ
1 | = 5| θ
2 | = 10| θ
3 | = 10| θ
4 | = 5

The demand response signal trace is obtained from PJM Interconnection on January 7, 2014 [190]. Figure 9.47 shows emergency energy reduction target set by PJM and Fig. 9.48 shows the normalized EDR target which is scaled to 30% of the data center's peak power. The value of PUE of data center was set to 1.5. Cost of using energy storage devices (ESDs) is considered to be 300 $/MWh. Idle and peak power of each server was set to 150 and 250 W, respectively. Other simulation parameters are given in Table 9.3. The authors considered two benchmarks for comparison: Non-DR (EDR participation is not considered) and ESD-only (where target energy reduction is achieved through stored energy by energy storage device).
Fig. 9.47Energy reduction target at PJM
Fig. 9.48Scaled EDR target for the data center



9.7.4.2 Comparison of Different Contract Designs
Figures 9.49, 9.50, 9.51, 9.52 show comparison of Discrete-Complete and Discrete-Incomplete contract designs. Figures 9.49 and 9.50 display energy reduction and reward for 10 tenants during emergency hours, while Figs. 9.51, 9.52 show energy reduction and reward for 30 tenants. In Figs. 9.49 and 9.51, two bars represent Discrete-Complete and Discrete-Incomplete contract designs, respectively. In Figs. 9.50 and 9.52, three bars represent Discrete-Complete, Discrete-Incomplete contract designs and ESD-only, respectively. Figures 9.49 and 9.51 show the operator achieves target energy reduction through tenants' and ESD's participation in EDR during emergency hours for both Discrete-Complete and Discrete-Incomplete. Also as evident in Figs. 9.50 and 9.52, Discrete-Complete incurs lower cost than Discrete-Incomplete, while ESD-only incurs the highest cost among the three throughout the emergency hours.
Fig. 9.49Energy reduction by Contract-DR: Discrete-Complete and Discrete-Incomplete with 10 tenants
Fig. 9.50Cost by Contract-DR: Discrete-Complete and Discrete-Incomplete with 10 tenants
Fig. 9.51Energy reduction by Contract-DR: Discrete-Complete and Discrete-Incomplete with 30 tenants
Fig. 9.52Cost by Contract-DR: Discrete-Complete and Discrete-Incomplete with 30 tenants

Figures 9.53 and 9.54 compare the three schemes, Discrete-Complete, Discrete-Incomplete, and ESD-only, in terms of total energy reduction and total cost during EDR. Figure 9.53 shows that both Discrete-Complete and Discrete-Incomplete achieve target energy reduction. Tenants' participation in Discrete-Complete is higher than that of Discrete-Incomplete. Note also that the difference between tenants' participation in these two schemes gradually decreases with the increase in the number of tenants. Figure 9.54 shows cost comparison for different schemes and a similar trend to Fig. 9.53 can be seen. ESD-only incurs significantly higher cost than both Discrete-Complete and Discrete-Incomplete.Fig. 9.53Energy reduction comparison between Discrete-Complete and Discrete-Incomplete
Fig. 9.54Cost comparison between Discrete-Complete, Discrete-Incomplete, and ESD-only



9.7.4.3 Comparison with Non-demand Response Approach
Figure 9.55 shows energy reduction achieved by different participants throughout the EDR periods. Tenants participate in energy reduction, whenever the operator sets energy reduction target determined by utility. Moreover, ESD is also used to offset the remaining energy reduction shortage, whenever tenants are unable to achieve the required energy reduction objective. Figure 9.56 shows distribution of reward amount among different tenants. It is evident that different tenants win different reward amounts from the operator in proportion to their respective energy reduction amounts. Figure 9.57 compares Contract-DR with Non-DR in terms of energy consumption at each time period, and shows that Contract-DR significantly reduces energy during emergency time period, as compared to Non-DR. Figure 9.58 compares the total cost incurred by Contract-DR with that of ESD-only. Contract-DR incurs lower cost than ESD-only during each emergency hour.
Fig. 9.55Comparison of energy reduction by each tenant
Fig. 9.56Comparison of reward received by each tenant
Fig. 9.57Comparison of energy consumption between Contract-DR and Non-DR
Fig. 9.58Comparison of cost incurred between Contract-DR and ESD-only



9.7.4.4 Impact of Energy Storage Device Cost
Figures 9.59 and 9.60 show the impact of energy storage device (ESD) cost on the energy reduction and total cost incurred. ESD cost parameter is varied from 150 to 300 $/MWh. Figure 9.59 shows contribution of energy reduction by tenants and ESD for different values of ESD costs. With a lower ESD cost, ESD contributes more to energy reduction. Tenants, on the other hand, participate more on energy reduction when the ESD cost is relatively higher. Figure 9.60 shows the total cost incurred by the operator for different ESD cost values. Higher ESD value means increased participation of tenants and correspondingly higher reward being awarded to the tenants.
Fig. 9.59Impact of ESD price on energy reduction
Fig. 9.60Impact of ESD price on the operator's cost



9.7.4.5 Workload Over-Prediction of Tenants
In practice, tenants may not perfectly know the amount of workloads they will receive in the upcoming time slot. Hence, to avoid server overloading, tenants may intentionally leave a margin by overestimating the workloads. Figures 9.61 and 9.62 show the effect of workload over-prediction, where workload is over-predicted from 0% to 40% with an increment of 10%. Figure 9.61 shows the percentage of energy reduction by tenants compared to energy reduction through EDR. With the increase of workload over-prediction, the tenants become more conservative, and it becomes increasingly difficult for tenants to participate in energy reduction. Therefore, to achieve target energy reduction, ESD has to take on an increasing portion of energy reduction. Figure 9.62 shows cost incurred by the operator during EDR hours, where it can be seen that ESD cost increases with more workload over-prediction due to increased participation of ESD in EDR.Fig. 9.61Impact of workload over-prediction on energy reduction
Fig. 9.62Impact of workload over-prediction on the operator's cost





9.8 Stackelberg Game Approach
Nguyen et al. study economic demand response using a Stackelberg game approach [6] [7, Sect. IV]. Different from emergency demand response, economic demand response programs generally indicate how customers can exploit opportunities presented by price signals [175]. For example, during peak times with high wholesale prices, the customers (i.e., the multi-tenant data center), who receive signals from the utility provider, can reduce their consumption to receive some economic benefits corresponding to the amount of energy reduction. Since the electricity consumption reduction volume is not necessarily fixed, many customers find this program appealing due to its flexibility.
In economic demand response, a multi-tenant data center can freely determine the desired reduction volume, but its operator cannot directly control the tenants' servers to proceed the demand response. Hence, the operator's purpose is to induce its tenants via incentives to reduce their energy to a level that can maximize the operator's benefit. Consequently, upon receiving the announced reward from the operator, rational tenants will individually maximize their own profits by solving (8.21) at Stage-II. Next, knowing that each tenant strategy, the operator will solve (8.​23) to choose an optimal compensation rate ɛ
∗ at Stage-I.
The Stackelberg game involves two stages, Stage-I for the operator (i.e., the leader) and Stage-II for its tenants (i.e., the followers). The solution concept of Stackelberg game is defined as:

Definition 9.8 (Stackelberg Equilibrium)
(r
∗, {m

i

∗}) is a Stackelberg equilibrium if it satisfies the following conditions for any values of r and {m

i
}:  (9.43)  (9.44)


The authors use backward induction, i.e., first analyze and solve the strategy for the tenants, and second analyze and solve the strategy for the operator [6, 7].

9.8.1 Stackelberg Equilibrium: Analysis and Algorithm
By the first-order condition , the unique solution m

i

∗ of tenant i for a given ɛ is  (9.45) where [x]+ = max {x, 0} and .
Then, (9.45) is substituted into (8.​23) and the operator's problem becomes  (9.46a)  (9.46b) Equation (9.46) is non-convex due to the operator [⋅ ]+. Define a new variable  (9.47) where  (9.48) then m

i

∗(ɛ) > 0 when z

i
 = 1, and m

i

∗(ɛ) = 0 when z

i
 = 0. Hence, (9.46) can be rewritten as:  (9.49a)  (9.49b) Equation (9.49) is a mixed integer programming, which may require an exponential-complexity effort (i.e., 2
I
 configurations of ) to solve by the exhaustive search. However, due to its special structure, the authors propose an algorithm given in Algorithm 10 that can find the solutions of (9.49) with linear complexity.

Algorithm 10 Operator's revenue maximizer





 (9.50)


Proposition 9.1

Algorithm 

10
 can solve the Stage-I equivalent problem (9.49) with linear complexity.


Denoting the Algorithm 10's outputs as ɛ
∗ (which can be multiple values) and m

i

∗ = m

i

∗(ɛ
∗), the following result is achieved.

Theorem 9.15

The Stackelberg equilibria of the multi-tenant data center's economic demand response are the set of pairs (ɛ
∗, {m

i

∗}).


The procedure for economic demand response of the data center is implemented as follows:
1.Each self-optimized tenant submits its best response (9.45) to the operator, i.e., m

i

∗(ɛ). 2.After collecting all of these best responses, the data center operator performs profit maximization (8.​23) using Algorithm 10 to achieve ɛ
∗ and broadcasts this ɛ
∗ to all tenants. 3.Each tenant will correspondingly turn off m

i
 servers based on this ɛ
∗. 

Note that a uniform reward rate is applied to all tenants, which is meaningful in terms of fairness. The incentive mechanism requires all information of the tenants, which is not available in practice.
Since the operator usually has a fixed budget, there must be some restriction on total rewards paid to the tenants in economic demand response. Thus, Stage-I operator problem (8.​23) can be modified by including a reward budget, denoted by  as follows:

 (9.51a)  (9.51b)  (9.51c) By assuming a fixed configuration of , (9.51) is reduced to  (9.52a)  (9.52b) Then, (9.51) can be solved in a similar way as with Algorithm 10, replacing unconstrained problem (9.50) at line 4 by its constrained version (9.52).


9.8.2 Simulations and Results
The authors performed trace-based simulations to evaluate Algorithm 10.

9.8.2.1 Simulation Settings
The authors consider a data center with random number of tenants for performance evaluation, where each tenant i has a number of maximum servers  that varies uniformly between 3000 and 10,000, representing heterogeneous tenant business. To capture a wide range of tenant cost sensitivity, the wear-and-tear and delay cost weights, ω

i

0 and ω

i

delay, respectively, also are uniformly distributed on [0.1, 3]. The total energy reduction requested by the operator is scaled to a ratio such that  kWh for every considered 1-h period. Two basic workload traces "MSR" and "FIU" are used to generate synthetic workload λ

i
 for all tenants [179]. Each tenant's workload is normalized with respect to its service rate μ

i
, which is set to 1000 jobs/s [1].
The authors compare the performance of Algorithm 10 with two benchmarks. The first benchmark, named OPT, is the optimal solutions of problem (9.46) using the exhaustive search. The second benchmark, called RAND, is a random price ɛ
rand uniformly distributed in  to enable feasible solutions, which represents a simple but inefficient scheme.



9.8.2.2 Impact of Utility Functions
First, the operator's utility is chosen to be , where ω
3 is set to be uniformly distributed on [0.2, 50] and log term reflects the diminishing return on the amount of reduced load. Figures 9.63 and 9.64 show the values of the reward rates of different schemes and the corresponding operator's profit, respectively. Next, the operator's utility is set to be affine , where ω
4 and ω
5 are uniformly distributed on [1, 2] and [5, 10], respectively. Figures 9.65 and 9.66 show the operator's reward rate and profit of three schemes, respectively. Since the operator can have a wide range of possible utility values depending on many factors such as utility provider's reimbursement, peak or non-peak demand response period, and the data center characteristics, we have the freedom to choose the weight parameters in order to achieve feasible solutions.Fig. 9.63Comparison of reward rate among three schemes in economic demand response with utility U as a log function
Fig. 9.64Comparison of operator profit among three schemes in economic demand response with utility U as a log function
Fig. 9.65Comparison of reward rate among three schemes in economic demand response with utility U as a linear function
Fig. 9.66Comparison of operator profit among three schemes in economic demand response with utility U as a linear function

Also, Figs. 9.67 and 9.68 compare the operator profit and reward rates of the three schemes with a budget constraint of problem (9.51), respectively. In all scenarios, while Algorithm 10 and OPT achieve the same performance, the scheme RAND is not as efficient as the others.Fig. 9.67Comparison of reward rate among three schemes in economic demand response with a budget constraint
Fig. 9.68Comparison of operator profit among three schemes in economic demand response with a budget constraint



9.8.2.3 Impact of ω
3

Next, the effect of ω
3 is examined in the case of log utility function in Figs. 9.69 and 9.70 which shows that ω
3 has an impact on the operator profit. Specifically, the optimal operator profit increases linearly when ω
3 increases, while the optimal reward rates remain unchanged. We observe a similar behavior in the case of linear utility function with varying parameters ω
4 and ω
5.Fig. 9.69Comparison of reward rate among three schemes in economic demand response with varying ω
3

Fig. 9.70Comparison of operator profit among three schemes in economic demand response with varying ω
3






9.9 Alternating Direction Method of Multipliers
Guo and Pan consider the emergency demand response as a social cost minimization problem (8.4) [180]. The authors develop a decentralized algorithm based on the alternating direction method of multiplier (ADMM) to solve the formulated problem.

ADMM Algorithm

The problem (8.4) cannot be readily solved by ADMM since the variables are coupled together in the objective function. To solve it using ADMM, the problem is first reformulated into the following form:  (9.53a)  (9.53b)  (9.53c) The objective of this new equivalent problem (9.53) is now separable over two sets of variables m and Δe which are coupled as given in (9.53c). This matches the ADMM form and by relaxing the coupling constraints (9.53c), the augmented Lagrangian of (9.53) can be formulated as:  (9.54) where η > 0 is the augmented Lagrangian parameter and  are the dual variables corresponding to constraints (9.53c).
The problem is then solved by updating  , and  sequentially. Specifically, at the (k + 1)-th iteration, the -minimization step involves solving the following problem:  (9.55) where  and . This problem is decomposable over tenants as both the objective function and the constraints are separable over i.
After obtaining  from the -minimization step, the -minimization step involves solving the following problem:  (9.56) Then, with the optimal  and , the final step is to update the dual variables:  (9.57) Both the -minimization step and the dual update step can be carried out independently in parallel for each . The -minimization step needs to solve an optimization problem with N variables. Equation (9.56) can be simplified by solving an optimization problem with a single variable. First, let  denote the average of Δe

i
 across all . Then, problem (9.56) can be rewritten as:  (9.58a)  (9.58b) Minimizing over  with  fixed has the solution  (9.59) Hence, problem (9.58) can be computed by solving the following unconstrained optimization problem:  (9.60) and then applying (9.59). Equation (9.60) can easily be solved since it only contains a single variable.
Further, substituting (9.59) for Δe

i


k+1 in the dual update equation (9.57) gives  (9.61) which is independent of i. Thus, the dual variables  are all equal and can be replaced by a single dual variable ν

k+1.
To summarize, by substituting ν and (9.59) in the -minimization problem (9.55), -minimization (9.60), and the dual variable update (9.61), the final ADMM algorithm consists of the following iterations:  (9.62)  (9.63)  (9.64) The entire procedure is described in Algorithm 11.

Algorithm 11 Decentralized ADMM algorithm to solve (8.4)




Intuitively, Algorithm 11 works in the following way. The dual variable ν

k
 acts as the reward price [164] the operator offers to its tenants for load curtailment. Algorithm 11 first optimizes load curtailment  for tenants given the reward price ν

k
. It then optimizes the average load curtailment  from all tenants given the previously computed curtailment . The dual update chooses the reward price ν

k+1 to ensure that these two sets of variables converge to the same optimal load curtailment decision.

9.9.1 Case Study
Data centers use the demand-responsive electricity cost function [145, 201]. In other words, the electricity price charged to a data center is given as  (9.65) where a
2 > a
1 ≥ 0, b
1, b
2, E
0 are parameters for demand-responsive pricing, E denotes the energy consumed by the data center, and E
others denotes the energy usage of all other consumers in the local electricity market. Also, this piecewise function is smooth, i.e., a
1
E
0 + b
1 = a
2
E
0 + b
2. When the total demand in this local market exceeds a threshold E
0, the electricity price would increase much faster with respect to the total demand. With this cost function, the -minimization problem (9.63) can be transformed into the following form:  (9.66a)  (9.66b)  (9.66c) where θ is an auxiliary variable. Problem (9.66) can be solved by software such as CVX package in MATLAB [202].
When only considering the switching cost, the load curtailment cost function h

i
(⋅ ) takes the following linear form [43]:  (9.67) where ω

i

0 > 0 is a cost parameter ($/server) to model the wear-and-tear cost of turning off servers. With this linear cost function, the -minimization step (9.63) becomes a quadratic program, and its optimal solution can be derived in an analytical form through KKT conditions as  (9.68) where  denotes the projection onto the set  as specified by the constraints (9.53b).



9.10 EDR in Geo-Distributed Multi-Tenant Data Centers (BatchEDR)
Sun et al. consider EDR for multiple geo-distributed multi-tenant data centers [8]. The authors consider and formulate the geo-distributed EDR problem as a social cost minimization problem (8.24) and its corresponding dual problem is given in (8.25). The authors then design and propose an auction mechanism call BatchEDR to solve the formulated problem (8.24) and its dual (8.25).

9.10.1 On-Line Algorithm Framework
In a time slot t, the time-coupling workload constraint is removed and the primal problem (8.24) becomes  (9.69a)  (9.69b)  (9.69c)  (9.69d)  (9.69e) where h

i, j

(t) ≥ b

i, j

(t) replaces tenant i's cost of per-unit energy reduction b

i, j

(t) Thus, given tenants' bids and EDR requirement in time slot t, the one-round optimization gives the optimal solution  and  at t for problem (9.69). For time slot t, the one-round dual problem of (9.69) can be written as:  (9.70a)  (9.70b)  (9.70c)  (9.70d)

The solution to the one-round problem (9.69) should be as close as possible to the solution to the off-line problem (8.24), in order to achieve a good competitive ratio. The competitive ratio is defined as the maximum ratio between the off-line optimal social cost derived by solving (8.24) exactly and the social cost produced by solving the one-round problem (9.69) in each time slot. The challenge lies in the time-coupling workload reduction budget constraint at each user. For each tenant, the maximum amount of batch workload reduction over all the T time slots is limited by w

i
. Hence, how current decisions affect the future ones must be explicitly consider when executing auctions in an on-line manner. That is the overall social cost varies with how the total workload reduction budget w

i
 is split across T times. Consider the scenario where a tenant reduces too much batch workload in the early stage of the EDR event and exhausts its budget w

i
 prior to the end of EDR. Since the operator can no longer ask this tenant to reduce batch workload and instead may need to produce more energy using diesel generator for EDR, the social cost can rise rapidly later on.
The ideal scenario is for all tenants' workload reduction budgets to last for all T rounds of auctions, such that the operator can explore the best energy reduction strategy among all the tenants over the entire span for minimizing the social cost. This intuition suggests that the operator should avoid exhausting tenants' workload reduction budgets early by not too greedily asking tenants to reduce energy at the beginning of the EDR event. Towards this end, an auxiliary variable β

i
 is introduced for each tenant . Initially, β

i
 = 0, and its value increases with the decrease of tenant i's workload reduction budget.
Precisely, during the execution of the on-line algorithm, if β

i
 has not reached , the workload reduction budget of tenant i will not be exhausted. Instead of the actual cost b

i, j

(t) for energy reduction,  (9.71) is used in the one-round social cost minimization problem (9.69), where  (9.72) to be solved in , if β

i
 has not reached Γ
[i]. In this way, the cost of a tenant with a smaller remaining workload reduction budget will be evaluated higher at the operator. As a consequence, when minimizing the one-round social cost on-line, the operator will ask for less energy reduction from tenants with a smaller remaining workload reduction budget, and the tenants' total workload reduction budget w

i
 can last longer throughout the T time slots.

Algorithm 12 On-line algorithm framework 





The increment of β

i

(t) can be understood as the adjustment for dual solution, to approach the optimal solution of the off-line dual problem (8.25). The complete procedures are given in Algorithm 12.

Theorem 9.16

If there is a one-round auction mechanism  which produces the optimal solutions of (9.69) and (9.70),  given in Algorithm 

12
 achieves 
-competitive for optimization (8.24). Here, 



Proof
The proof of Theorem 9.16 can be found in [8]. ■




9.10.2 Auction Mechanism
The auction mechanism in each round optimally computes the amount of batch workload reduction that each tenant should reduce as well as diesel usage according to the one-round problem in (9.69), and decides the rewards for winning tenants. The Vickrey-Clarke-Groves (VCG) mechanism is applied for one-round auction, as it achieves the desired properties: concurrent truthfulness and social welfare maximization (equivalent to social cost minimization), if the underlying resource allocation problem can be optimally solved [203]. The one-round social cost minimization problem in (9.69) belongs to linear programs, whose optimal solution can be computed in polynomial time using algorithms such as interior-point methods [204].
In the one-round auction, the operator solves (9.69) to decide the amounts of batch workload reduction for each participating tenant and the amount of diesel usage. Let f

i, j

(t)
Δe

i, j

(t)
x

i, j

∗(t) be the optimal energy reduction of tenant i in data center  in t, and y

j

∗(t) denote the optimal diesel energy production in data center j in , computed by (9.69). Let  be the optimal social cost of (9.69) computed when tenant i is absent. The VCG reward to a winning tenant i is  (9.73) Intuitively, the reward that a winning tenant i receives is the decrease in social cost attributed to i's presence. The one-round auction mechanism is summarized in Algorithm 13.

Algorithm 13 One-round auction  in time slot t





The utility function u

i

(t) of tenant i in the VCG auction is typically defined as the difference between its reward received and its cost. In this on-line framework, a tenant's utility in each round should be related not only to its cost of energy reduction, but also to its remaining workload reduction budget in that round. Intuitively, a smaller utility is obtained if a tenant wins in a one-round auction and reduces its workload when its remaining workload reduction budget is small, and larger otherwise. Hence, the utility function is characterized as: . Such form of utility function is consistent with the social cost calculation in the one-round problem (9.69). Thus, a tenant's workload reduction budget can last for a longer time and the operator can have a larger solution space to better schedule tenants' workload reduction for future EDR signals, efficiently reducing social cost over all T rounds of auctions. Furthermore, each tenant gains a non-negative utility, based on the VCG auction theory [203]. By plugging the one-round VCG mechanism into the on- line algorithm framework  (line 4) in Algorithm 12, on-line auction mechanism BatchEDR is obtained.

Theorem 9.17

The one-round VCG auction in Algorithm 

13

which produces percentages of tenants' workload reduction

, diesel energy production

, and rewards to winning tenants

, is truthful in

and v

i

(t)
, and individually rational.



Theorem 9.18


in Algorithm 

12

combining with

in Algorithm 

13

constitutes a truthful, individually rational, and

-competitive on-line auction.



Theorem 9.19


in Algorithm 

12

runs in polynomial time in each round.



Proof
The proof of Theorems 9.17, 9.18, and 9.19 can be found in [8]. ■





References


1.
Ren, S. & Islam, M. A. (2014, June). Colocation demand response: Why do I turn off my servers? In 11th international conference on autonomic computing (pp. 201-208). Philadelphia, PA: USENIX Association. [Online]. Available: https://​goo.​gl/​DT5tmP.


2.
Niu, L., Guo, Y., Li, H., & Pan, M. (2016, December). A nash bargaining approach to emergency demand response in colocation data centers. In 2016 IEEE global communications conference (GLOBECOM) (pp. 1-6). [Online]. Available: https://​goo.​gl/​okffPu.


3.
Sun, Q., Wu, C., Ren, S., & Li, Z. (2015, June). Fair rewarding in colocation data centers: Truthful mechanism for emergency demand response. In IEEE 23rd international symposium on quality of service (IWQoS) (pp. 359-368). [Online]. Available: https://​goo.​gl/​WesrxS.


4.
Zhao, Z., Wu, F., Ren, S., Gao, X., Chen, G., & Cui, Y. (2016, August). Tech: A thermal-aware and cost efficient mechanism for colocation demand response. In 2016 45th international conference on parallel processing (ICPP) (pp. 464-473. [Online]. Available: https://​goo.​gl/​OUepr1.


5.
Ahmed, K., Islam, M. A., & Ren, S. (2015). A contract design approach for colocation data center demand response. In IEEE/ACM international conference on computer-aided design, ser. ICCAD '15 (pp. 635-640). Piscataway, NJ, USA: IEEE Press. [Online]. Available: http://​goo.​gl/​0ZTul9.


6.
Tran, N. H., Do, C. T., Hong, C. S., Ren, S., & Han, Z. (2015, November). Coordinated colocation datacenters for economic demand responce. SIGMETRICS Performance Evaluation Review, 43(3), 34-37. [Online]. Available: http://​goo.​gl/​WtcQYZ.


7.
Tran, N., Do, C., Ren, S., Han, Z., & Hong, C. (2015, December). Incentive mechanisms for economic and emergency demand responses of colocation datacenters. IEEE Journal on Selected Areas in Communications, 33(12), 2892-2905. [Online]. Available: http://​goo.​gl/​nmU1e8.


8.
Sun, Q., Ren, S., Wu, C., & Li, Z. (2016, June). An online incentive mechanism for emergency demand response in geo-distributed colocation data centers. In International conference on future energy systems, ser. e-Energy '16 (pp. 3:1-3:13). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​3PNA2Q.


43.
Lin, M., Wierman, A., Andrew, L., & Thereska, E. (2011, April). Dynamic right-sizing for power-proportional data centers. In IEEE INFOCOM (pp. 1098-1106). [Online]. Available: http://​goo.​gl/​QoqujE.


68.
Urgaonkar, R., Urgaonkar, B., Neely, M. J., & Sivasubramaniam, A. (2011). Optimal power cost management using stored energy in data centers. In ACM SIGMETRICS joint international conference on measurement and modeling of computer systems, ser. SIGMETRICS '11 (pp. 221-232). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​HKg8vj.


80.
Ghatikar, G., Ganti, V., Matson, N., & Piette, M. A. (2012, August). Demand response opportunities and enabling technologies for data centers: Findings from field studies. Berkeley Lab, Berkeley, CA, Tech. Rep. LBNL-5763E. [Online]. Available: http://​goo.​gl/​Z953FG.


112.
U.S. Green Building Council Std. Leadership in energy & environmental design. [Online]. Available: http://​goo.​gl/​jqGiox.


118.

Demand response. PJM Website. [Online]. Available: https://​goo.​gl/​GtU2sR.


127.
Chen, N., Ren, X., Ren, S., & Wierman, A. (2015, September). Greening multi-tenant data center demand response. SIGMETRICS Performance Evaluation Review, 43(2), 36-38. [Online]. Available: http://​goo.​gl/​HmcRnU.


128.
Zhang, L., Ren, S., Wu, C., & Li, Z. (2015, April). A truthful incentive mechanism for emergency demand response in colocation data centers. In IEEE INFOCOM, Hong Kong, China (pp. 2632-2640). [Online]. Available: http://​goo.​gl/​9KqeBv.


145.
Mahmud, A. H. & Ren, S. (2013, August). Online capacity provisioning for carbon-neutral data center with demand-responsive electricity prices. SIGMETRICS Performance Evaluation Review, 41(2), 26-37. [Online]. Available: https://​goo.​gl/​V1TCAc.


164.
Boyd, S. & Vandenberghe, L. (2004). Convex optimization. New York, NY: Cambridge University Press. [Online]. Available: http://​goo.​gl/​3YTKaJ.


165.
Carr, R. D., Fleischer, L. K., Leung, V. J., & Phillips, C. A. (2000). Strengthening integrality gaps for capacitated network design and covering problems. In Proceedings of the eleventh annual ACM-SIAM symposium on discrete algorithms, ser. SODA '00 (pp. 106-115). Philadelphia, PA, USA: Society for Industrial and Applied Mathematics. [Online]. Available: http://​goo.​gl/​1ohyvw.


167.
Lavi, R. & Swamy, C. (2005, October). Truthful and near-optimal mechanism design via linear programming. In 46th annual IEEE symposium on foundations of computer science (pp. 595-604). [Online]. Available: http://​goo.​gl/​aY0rB4.


168.
Carr, R. & Vempala, S. (May 2002). Randomized metarounding. Random Structures & Algorithms, 20(3), 343-352. [Online]. Available: http://​goo.​gl/​VAEqaa.


169.
Archer, A. & Tardos, E. (2001). Truthful mechanisms for one-parameter agents. In 42nd IEEE symposium on foundations of computer science, ser. FOCS '01 (pp. 482-491). Washington, DC, USA: IEEE Computer Society. [Online]. Available: http://​dl.​acm.​org/​citation.​cfm?​id=​874063.​875583.


170.
Myerson, R. B. (1981, February). Optimal auction design. Mathematics of Operations Research, 6(1), 58-73. [Online]. Available: http://​dx.​doi.​org/​10.​1287/​moor.​6.​1.​58.


172.
Vasudevan, V., Phanishayee, A., Shah, H., Krevat, E., Andersen, D. G., Ganger, G. R., et al. (2009, August). Safe and effective fine-grained TCP retransmissions for datacenter communication. SIGCOMM Computer Communication Review, 39(4), 303-314. [Online]. Available: http://​doi.​acm.​org/​10.​1145/​1594977.​1592604.


175.
EnerNOC. (2009). Demand response: A multi-purpose resource for utilities and grid operations. Tech. Rep. [Online]. Available: http://​goo.​gl/​atcj5N.


177.
Ghamkhari, M. & Mohsenian-Rad, H. (2013, June). Energy and performance management of green data centers: A profit maximization approach. IEEE Transactions on Smart Grid, 4(2), 1017-1025. [Online]. Available: http://​goo.​gl/​0chcuz.


178.
Liu, Z., Liu, I., Low, S., & Wierman, A. (2014, June). Pricing data center demand response. SIGMETRICS Performance Evaluation Review, 42(1), 111-123. [Online]. Available: http://​goo.​gl/​3K7Nca.


179.
Tran, N., Ren, S., Han, Z., Jang, S. M., Moon, S. I., & Hong, C. S. (2014, June). Demand response of data centers: A real-time pricing game between utilities in smart grid. In 9th international workshop on feedback computing, (Feedback Computing 14). Philadelphia, PA: USENIX Association. [Online]. Available: https://​goo.​gl/​5MOj4x.


180.
Guo, Y. & Pan, M. (2015, November). Coordinated energy management for colocation data centers in smart grids. In 2015 IEEE international conference on smart grid communications, (SmartGridComm) (pp. 840-845).


184.
Martello, S. & Toth, P. (1990). Knapsack problems: Algorithms and computer implementations. New York, NY, USA: Wiley. [Online]. Available: http://​goo.​gl/​TSYZz3.


185.
Boyd, S., Ghosh, A., & Magnani, A. (2003). Branch and bound methods. Standford University, Tech. Rep. [Online]. Available: https://​goo.​gl/​hoOnGp.


186.
New York ISO. New York ISO Website. [Online]. Available: http://​www.​nyiso.​com/​.


187.
Liu, Z., Chen, Y., Bash, C., Wierman, A., Gmach, D., Wang, Z., et al. (2012, June). Renewable and cooling aware workload management for sustainable data centers. SIGMETRICS Performance Evaluation Review, 40(1), 175-186. [Online]. Available: https://​goo.​gl/​hyKpDM.


188.
Zhang, L., Ren, S., Wu, C., & Li, Z. A truthful incentive mechanism for emergency demand response in colocation data centers. CS, University of Calgary, Tech. Rep. [Online]. Available: https://​goo.​gl/​uhsDB6.


189.
Minooei, H. (2014). Mechanism design for covering problems. Ph.D. dissertation, University of Waterloo.


190.
PJM. (2014, April). Emergency Demand Response (Load Management) Performance Report - 2013/2014. Tech. Rep. [Online]. Available: https://​goo.​gl/​yIXGib.


191.
Johari, R. & Tsitsiklis, J. N. (2011). Parameterized supply function bidding: Equilibrium and efficiency. Operations Research, 59(5), 1079-1089. [Online]. Available: http://​goo.​gl/​gFxpGF.


192.
Curtailment service providers. PJM Website. [Online]. Available: https://​goo.​gl/​NqRARl.


193.
Diesel generator. Wikipedia Website. [Online]. Available: https://​goo.​gl/​OoqTB5.


194.
Osborne, M. J. & Rubinstein, A. (1994). A course in game theory. Cambridge, USA: The MIT Press, electronic edition.


195.
Mas-Colell, A., Whinston, M. D., & Green, J. R. (1995). Microeconomic theory. New York: Oxford Press.


196.
Nash, J. F. J. (1950, April). The bargaining problem. Econometrica: Journal of the Econometric Society, 18(2), 155-162. [Online]. Available: https://​goo.​gl/​g3E7EU.


197.
Nash, J. F. J. (1953, January). Two-person cooperative games. Econometrica: Journal of the Econometric Society, 21(1), 128-140. [Online]. Available: https://​goo.​gl/​JiIcwd.


198.
Duan, L., Kubo, T., Sugiyama, K., Huang, J., Hasegawa, T., & Walrand, J. (2012, March). Incentive mechanisms for smartphone collaboration in data acquisition and distributed computing. In IEEE INFOCOM (pp. 1701-1709).


199.
Bolton, P. & Dewatripont, M. (2005). Contract theory. Cambridge: MIT Press.


200.
Duan, L., Gao, L., & Huang, J. (2011, May). Contract-based cooperative spectrum sharing. In IEEE symposium on new frontiers in dynamic spectrum access networks, (DySPAN) (pp. 399-407).


201.
Wang, P., Rao, L., Liu, X., & Qi, Y. (2012, December). D-Pro: Dynamic data center operations with demand-responsive electricity prices in smart grid. IEEE Transactions on Smart Grid, 3(4), 1743-1754. [Online]. Available: http://​goo.​gl/​xM8pwv.


202.
Grant, M. & Boyd, S. (2014, March). CVX: Matlab software for disciplined convex programming, version 2.1. http://​cvxr.​com/​cvx.


203.
Vickrey, W. (1961, March). Counterspeculation, auction, and competitive sealed tenders. Journal of Finance, 16(1), 8-37. [Online]. Available: https://​goo.​gl/​GM6F8G.


204.
Wright, S. (1997). Primal-dual interior-point methods. Society for Industrial and Applied Mathematics. [Online]. Available: http://​epubs.​siam.​org/​doi/​abs/​10.​1137/​1.​9781611971453.




Footnotes


1


For ease of presentation, the power usage effectiveness (PUE) is set to 1, i.e., γ = 1. Otherwise, one can simply scale y, α, and ΔE with PUE accordingly.

 













© Springer International Publishing AG 2018

Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers


https://doi.org/10.1007/978-3-319-66062-2_10





10. Summary



Thant Zin Oo1 , 
Nguyen H. Tran1, 
Shaolei Ren2 and 

Choong Seon Hong
1




(1)
Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)


(2)
Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, CA, USA

 



Abstract
For smart grid, multi-tenant data centers play a major part in the demand response program due to their large energy demand. Emergency demand response is critical in preserving the electrical infrastructure (i.e., the grid) in emergency situations, such as extreme weather events. Further economic demand response programs can stabilize the energy market by shifting the electricity demand to off-peak durations. This part of the book examines the motivations, issues, and challenges involved in multi-tenant data center demand response. Further, it summarizes the formulated problems and the possible solutions.


Keywords
Multi-tenant data center
Demand response
Pricing
Randomized auction
Stackelberg game
Nash bargaining
Contract theory
Alternative direction method of multipliers (ADMM)



We have studied demand response for multi-tenant data center in this chapter. We have identified the following components of the problem of demand response for multi-tenant data centers: Stakeholders: the utility provider, the operator, and tenants;Major challenges: split incentives and on-line decision making;Objectives: maximize energy demand reductionminimize social costmaximize social welfaremaximize social cost savings.


This chapter surveys and compiles the solutions from [1-8, 127, 128, 180] which address the above items.
To achieve the multi-tenant data center demand response, the authors use Reverse auction (procurement auction) approaches [1, 3, 4, 8, 128],Pricing approach [5, 127],Game theory approaches [2, 6, 7], andConvex optimization approaches [180].

The operator (financially) reward tenants who voluntarily reduce their electricity consumption to meet the demand response target set by the utility provider. Further, to solve the formulated problems in Sect. 8.​1, the following on-line optimization approaches are applied: Branch and bound technique [185]Randomized convex decomposition [167, 168].Primal-dual decomposition [164]Alternating direction method of multipliers [205]Nash bargaining solution [196, 197]2-stage Stackelberg game [6, 7].

The authors then designed the on-line algorithms that let the operator dynamically selects the winning bids and rewards its tenants who, in turn, reduce their electricity consumption. Their respective simulations and results show that it is indeed possible to achieve the demand response goal for both emergency demand response (EDR) and economic demand response. In doing so, they have also shown the economic benefits for all parties involved: the utility provider, the data center operator, and its tenants.

References


1.
Ren, S. & Islam, M. A. (2014, June). Colocation demand response: Why do I turn off my servers? In 11th international conference on autonomic computing (pp. 201-208). Philadelphia, PA: USENIX Association. [Online]. Available: https://​goo.​gl/​DT5tmP.


2.
Niu, L., Guo, Y., Li, H., & Pan, M. (2016, December). A nash bargaining approach to emergency demand response in colocation data centers. In 2016 IEEE global communications conference (GLOBECOM) (pp. 1-6). [Online]. Available: https://​goo.​gl/​okffPu.


3.
Sun, Q., Wu, C., Ren, S., & Li, Z. (2015, June). Fair rewarding in colocation data centers: Truthful mechanism for emergency demand response. In IEEE 23rd international symposium on quality of service (IWQoS) (pp. 359-368). [Online]. Available: https://​goo.​gl/​WesrxS.


4.
Zhao, Z., Wu, F., Ren, S., Gao, X., Chen, G., & Cui, Y. (2016, August). Tech: A thermal-aware and cost efficient mechanism for colocation demand response. In 2016 45th international conference on parallel processing (ICPP) (pp. 464-473. [Online]. Available: https://​goo.​gl/​OUepr1.


5.
Ahmed, K., Islam, M. A., & Ren, S. (2015). A contract design approach for colocation data center demand response. In IEEE/ACM international conference on computer-aided design, ser. ICCAD '15 (pp. 635-640). Piscataway, NJ, USA: IEEE Press. [Online]. Available: http://​goo.​gl/​0ZTul9.


6.
Tran, N. H., Do, C. T., Hong, C. S., Ren, S., & Han, Z. (2015, November). Coordinated colocation datacenters for economic demand responce. SIGMETRICS Performance Evaluation Review, 43(3), 34-37. [Online]. Available: http://​goo.​gl/​WtcQYZ.


7.
Tran, N., Do, C., Ren, S., Han, Z., & Hong, C. (2015, December). Incentive mechanisms for economic and emergency demand responses of colocation datacenters. IEEE Journal on Selected Areas in Communications, 33(12), 2892-2905. [Online]. Available: http://​goo.​gl/​nmU1e8.


8.
Sun, Q., Ren, S., Wu, C., & Li, Z. (2016, June). An online incentive mechanism for emergency demand response in geo-distributed colocation data centers. In International conference on future energy systems, ser. e-Energy '16 (pp. 3:1-3:13). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​3PNA2Q.


127.
Chen, N., Ren, X., Ren, S., & Wierman, A. (2015, September). Greening multi-tenant data center demand response. SIGMETRICS Performance Evaluation Review, 43(2), 36-38. [Online]. Available: http://​goo.​gl/​HmcRnU.


128.
Zhang, L., Ren, S., Wu, C., & Li, Z. (2015, April). A truthful incentive mechanism for emergency demand response in colocation data centers. In IEEE INFOCOM, Hong Kong, China (pp. 2632-2640). [Online]. Available: http://​goo.​gl/​9KqeBv.


164.
Boyd, S. & Vandenberghe, L. (2004). Convex optimization. New York, NY: Cambridge University Press. [Online]. Available: http://​goo.​gl/​3YTKaJ.


167.
Lavi, R. & Swamy, C. (2005, October). Truthful and near-optimal mechanism design via linear programming. In 46th annual IEEE symposium on foundations of computer science (pp. 595-604). [Online]. Available: http://​goo.​gl/​aY0rB4.


168.
Carr, R. & Vempala, S. (May 2002). Randomized metarounding. Random Structures & Algorithms, 20(3), 343-352. [Online]. Available: http://​goo.​gl/​VAEqaa.


180.
Guo, Y. & Pan, M. (2015, November). Coordinated energy management for colocation data centers in smart grids. In 2015 IEEE international conference on smart grid communications, (SmartGridComm) (pp. 840-845).


185.
Boyd, S., Ghosh, A., & Magnani, A. (2003). Branch and bound methods. Standford University, Tech. Rep. [Online]. Available: https://​goo.​gl/​hoOnGp.


196.
Nash, J. F. J. (1950, April). The bargaining problem. Econometrica: Journal of the Econometric Society, 18(2), 155-162. [Online]. Available: https://​goo.​gl/​g3E7EU.


197.
Nash, J. F. J. (1953, January). Two-person cooperative games. Econometrica: Journal of the Econometric Society, 21(1), 128-140. [Online]. Available: https://​goo.​gl/​JiIcwd.


205.
Boyd, S., Parikh, N., Chu, E., Peleato, B., & Eckstein, J. (2011, January). Distributed optimization and statistical learning via the alternating direction method of multipliers. Foundation and Trends in Machine Learning, 3(1), 1-122. [Online]. Available: http://​dx.​doi.​org/​10.​1561/​2200000016.














© Springer International Publishing AG 2018

Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers


https://doi.org/10.1007/978-3-319-66062-2_11





11. Concluding Remarks



Thant Zin Oo1 , 
Nguyen H. Tran1, 
Shaolei Ren2 and 

Choong Seon Hong
1




(1)
Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)


(2)
Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, CA, USA

 



Abstract
This chapter describes the open issues for future research and conclusions. Most of the survey research works made two assumptions. First, using the on-site "green" energy from renewables and energy storage devices (e.g., batteries) costs more than the "brown" energy from the grid. Second, the majority of the energy consumed by the data centers comes from the grid. These two assumptions are no longer true due to recent advances in technology and economy of scale. The future of coordinated power management lies in data center micro-grids where the data centers are both the energy suppliers and consumers.


Keywords
Multi-tenant data centers
Coordinated power management
Data center micro-grids



We have compiled research works on coordinated power management for multi-tenant data centers from the perspectives of sustainability [124-126] and demand response [1, 2, 4-8, 127, 128, 180, 181].

11.1 Open Issues

11.1.1 Making the Multi-Tenant Data Center Efficient and Green
The surveyed works [124-126] touched on making the multi-tenant data center efficient and green, i.e., sustainable. However, they investigated the reduction of "brown" electricity consumption, which is one side of the coin. The other side of the coin is increasing the on-site "green" electricity generation, which was largely overlooked. The costs of renewables and batteries have been falling, and "green energy" is projected to be cheaper than "brown energy" in the near future [98-106]. For example, on-site energy generation has been recently investigated to partially or fully power data centers for capital savings and/or sustainability [206, 207], but optimal control of on-site energy generation naturally depends on power consumption. Moreover, leveraging energy storage devices (i.e., batteries) for power management has become a proven technique for electricity cost reduction and peak power shaving [68, 208]. Therefore, the goal is for the multi-tenant data centers to gradually increase on-site "green" electricity generation and finally become fully sustainable, i.e., self-sufficient power generation. This requires coordinated power management of renewable sources and cycling (i.e., charging/discharging) of energy storage devices. The implications are very profound and will greatly impact the economy and environment.
Another direction in this category is coordinated power management across geo-distributed multi-tenant data centers. Most works [124-126] considered only a single multi-tenant data center. For greenness and sustainability, geo-distributed data centers should coordinate their workloads such that the brown energy consumption is minimized. This involves tracking the workload and the green electricity supply at a number of geo-distributed multi-tenant data centers. Identifying and coordinating uncertainties across multiple data centers will add additional challenges to the already existing challenges of coordinated power management in a single multi-tenant data center.


11.1.2 Multi-Tenant Data Center Demand Response
In the emerging smart grid [156], electricity prices are varying over time and also over locations, exhibiting spatio-temporal diversity and presenting huge opportunities for electricity cost saving for data centers [40, 46, 56]. However, most of the surveyed works [1, 5, 7, 127, 128] focus on emergency demand response and largely overlook the economic demand response. One important open issue is how to coordinate power management for cost saving in multiple multi-tenant data centers. Answers to this question have the potential to greatly reduce operational cost.
Most of the research works discussed in this book overlooked incorporation of on-site generation from renewables (e.g., solar and wind) and energy storage devices (e.g., batteries) as an effective and efficient power management method. Moreover, the costs of renewables and batteries have been falling steadily [98-106]. Furthermore, the electrical grid is expected to suffer more outages due to an increase in intensity and frequency of natural disasters [209]. Hence, the economic and reliability factors contribute to the novel idea of data center micro-grids [210]. Some states in the USA have already begun development, for example, Arizona's largest utility has begun the development of a 63 MW project, and a massive 300 MW micro-grid park has been underway in Colorado [210]. Such data center micro-grid projects will require coordinated power management of multiple electricity sources, matching time-varying demand with supply across spatio-temporal diversities, and time-varying market dynamics between the stakeholders (i.e., utility providers, data center operators, and tenants). These are only a handful of future research areas on smart grid and data center power management.



11.2 Conclusion
This book compiles the research works for multi-tenant data center power management. The research works focus on two important topics: (i) improving efficiency and greenness [124-126], (ii) enabling multi-tenant data center demand response [1-8, 127, 128, 180]. To present a full view of the problem, we first introduce the basic background on the multi-tenant data centers, their power infrastructure, and energy usages. We then discuss the research works, their motivation, issues, challenges, and solutions. Furthermore, we present some open issues for the future research and their potential. Research on multi-tenant data center power management is still in its early stage. This book will help researchers and engineers from both academia and industry better understand the current works and contribute more to this area.


References


1.
Ren, S. & Islam, M. A. (2014, June). Colocation demand response: Why do I turn off my servers? In 11th international conference on autonomic computing (pp. 201-208). Philadelphia, PA: USENIX Association. [Online]. Available: https://​goo.​gl/​DT5tmP.


2.
Niu, L., Guo, Y., Li, H., & Pan, M. (2016, December). A nash bargaining approach to emergency demand response in colocation data centers. In 2016 IEEE global communications conference (GLOBECOM) (pp. 1-6). [Online]. Available: https://​goo.​gl/​okffPu.


4.
Zhao, Z., Wu, F., Ren, S., Gao, X., Chen, G., & Cui, Y. (2016, August). Tech: A thermal-aware and cost efficient mechanism for colocation demand response. In 2016 45th international conference on parallel processing (ICPP) (pp. 464-473. [Online]. Available: https://​goo.​gl/​OUepr1.


5.
Ahmed, K., Islam, M. A., & Ren, S. (2015). A contract design approach for colocation data center demand response. In IEEE/ACM international conference on computer-aided design, ser. ICCAD '15 (pp. 635-640). Piscataway, NJ, USA: IEEE Press. [Online]. Available: http://​goo.​gl/​0ZTul9.


7.
Tran, N., Do, C., Ren, S., Han, Z., & Hong, C. (2015, December). Incentive mechanisms for economic and emergency demand responses of colocation datacenters. IEEE Journal on Selected Areas in Communications, 33(12), 2892-2905. [Online]. Available: http://​goo.​gl/​nmU1e8.


8.
Sun, Q., Ren, S., Wu, C., & Li, Z. (2016, June). An online incentive mechanism for emergency demand response in geo-distributed colocation data centers. In International conference on future energy systems, ser. e-Energy '16 (pp. 3:1-3:13). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​3PNA2Q.


40.
Gandhi, A., Harchol-Balter, M., Raghunathan, R., & Kozuch, M. A. (2012, November). AutoScale: Dynamic, robust capacity management for multi-tier data centers. ACM Transactions on Computer Systems, 30(4), 14:1-14:26. [Online]. Available: http://​goo.​gl/​lxamQz.


46.
Qureshi, A., Weber, R., Balakrishnan, H., Guttag, J., & Maggs, B. (2009). Cutting the electric bill for internet-scale systems. In ACM SIGCOMM Conference on Data Communication, ser. SIGCOMM '09 (pp. 123-134). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​aV7dMs.


56.
Liu, Z., Lin, M., Wierman, A., Low, S. H., & Andrew, L. L. (2011). Greening geographical load balancing. In ACM SIGMETRICS joint international conference on measurement and modeling of computer systems, ser. SIGMETRICS '11 (pp. 233-244). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​DHgS7v.


68.
Urgaonkar, R., Urgaonkar, B., Neely, M. J., & Sivasubramaniam, A. (2011). Optimal power cost management using stored energy in data centers. In ACM SIGMETRICS joint international conference on measurement and modeling of computer systems, ser. SIGMETRICS '11 (pp. 221-232). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​HKg8vj.


98.
International Renewable Energy Agency. (2012, June). Renewable energy cost analysis - solar photovoltaics. Tech. Rep. [Online]. Available: http://​goo.​gl/​NNNJCw.


106.
Muenzel, V., Mareels, I., de Hoog, J., Vishwanath, A., Kalyanaraman, S., & Gort, A. (2015, February). PV generation and demand mismatch: Evaluating the potential of Residential Storage. In Innovative smart grid technologies conference (ISGT), 2015 IEEE Power Energy Society (pp. 1-5). [Online]. Available: http://​goo.​gl/​CymZ50.


124.
Islam, M., Ren, S., & Wang, X. (2014, November). GreenColo: A novel incentive mechanism for minimizing carbon footprint in colocation data center. In International green computing conference, (IGCC) (pp. 1-8). [Online]. Available: http://​goo.​gl/​f9nr8F.


126.
Zhang, L., Li, Z., Wu, C., & Ren, S. (2015, December). Online electricity cost saving algorithms for co-location data centers. IEEE Journal on Selected Areas in Communications, 33(12), 2906-2919. [Online]. Available: http://​goo.​gl/​45QUdf.


127.
Chen, N., Ren, X., Ren, S., & Wierman, A. (2015, September). Greening multi-tenant data center demand response. SIGMETRICS Performance Evaluation Review, 43(2), 36-38. [Online]. Available: http://​goo.​gl/​HmcRnU.


128.
Zhang, L., Ren, S., Wu, C., & Li, Z. (2015, April). A truthful incentive mechanism for emergency demand response in colocation data centers. In IEEE INFOCOM, Hong Kong, China (pp. 2632-2640). [Online]. Available: http://​goo.​gl/​9KqeBv.


156.
Mohsenian-Rad, A.-H., Wong, V., Jatskevich, J., Schober, R., & Leon-Garcia, A. (2010, December). Autonomous demand-side management based on game-theoretic energy consumption scheduling for the future smart grid. IEEE Transactions on Smart Grid, 1(3), 320-331. [Online]. Available: http://​goo.​gl/​rqjo6k.


180.
Guo, Y. & Pan, M. (2015, November). Coordinated energy management for colocation data centers in smart grids. In 2015 IEEE international conference on smart grid communications, (SmartGridComm) (pp. 840-845).


181.
Wang, C., Nasiriani, N., Kesidis, G., Urgaonkar, B., Wang, Q., Chen, L. Y., et al. (2015). Recouping energy costs from cloud tenants: Tenant demand response aware pricing design. In ACM 6th international conference on future energy systems, ser. e-Energy '15 (pp. 141-150). New York, NY, USA: ACM. [Online]. Available: https://​goo.​gl/​x5dktv.


206.
Riekstin, A. C., James, S., Kansal, A., Liu, J., & Peterson, E. (2014, May). No more electrical infrastructure: Towards fuel cell powered data centers. SIGOPS Operating Systems Review, 48(1), 39-43. [Online]. Available: http://​goo.​gl/​nb1IVG.


207.
Tu, J., Lu, L., Chen, M., & Sitaraman, R. K. (2013). Dynamic provisioning in next-generation data centers with on-site power production. In Proceedings of the fourth international conference on future energy systems, ser. e-Energy '13 (pp. 137-148). New York, NY, USA: ACM. [Online]. Available: http://​goo.​gl/​KynpDv.


208.
Wang, D., Ren, C., Sivasubramaniam, A., Urgaonkar, B., & Fathy, H. (2012, June). Energy storage in data centers: What, where, and how much? SIGMETRICS Performance Evaluation Review, 40(1), 187-198. [Online]. Available: http://​goo.​gl/​ZsB5Tv.


209.
NASA. The impact of climate change on natural disasters. NASA Earth Observatory Website. [Online]. Available: https://​goo.​gl/​78MZBx.


210.
Jones Lang Lasalle IP, Inc. (2016). North America Data Center Outlook - 2016. Tech. Rep. [Online]. Available: https://​goo.​gl/​mn2O9y.























Index



A


Alternative direction method of multipliers (ADMM)




C


Carbon footprint


Contract theory


Coordinated power management




D


Data center micro-grids


Demand response




E


Energy pricing




M


Multi-tenant data centers




N


Nash bargaining




P


Power usage effectiveness (PUE)


Pricing



                PUE.
                See
                Power usage effectiveness (PUE)
              




R


Randomized auction


Resource allocation




S


Stackelberg game


Stakeholders


Sustainability















Thant Zin Oo, 
Nguyen H. Tran, 
Shaolei Ren and 

Choong Seon Hong



A Survey on Coordinated Power Management in Multi-Tenant Data Centers













Thant Zin Oo

Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)



Nguyen H. Tran

Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)



Shaolei Ren

Department of Electrical & Computer Engineering, University of California, Riverside, Riverside, California, USA



Choong Seon Hong

Department of Computer Science & Engineering, Kyung Hee University, Yongin, Gyeonggi, Korea (Republic of)






					ISBN 978-3-319-66061-5
e-ISBN 978-3-319-66062-2


https://doi.org/10.1007/978-3-319-66062-2

Library of Congress Control Number: 2017949702
© Springer International Publishing AG 2018
This work is subject to copyright. All rights are reserved by the Publisher, whether the whole or part of the material is concerned, specifically the rights of translation, reprinting, reuse of illustrations, recitation, broadcasting, reproduction on microfilms or in any other physical way, and transmission or information storage and retrieval, electronic adaptation, computer software, or by similar or dissimilar methodology now known or hereafter developed.
The use of general descriptive names, registered names, trademarks, service marks, etc. in this publication does not imply, even in the absence of a specific statement, that such names are exempt from the relevant protective laws and regulations and therefore free for general use.
The publisher, the authors and the editors are safe to assume that the advice and information in this book are believed to be true and accurate at the date of publication. Neither the publisher nor the authors or the editors give a warranty, express or implied, with respect to the material contained herein or for any errors or omissions that may have been made. The publisher remains neutral with regard to jurisdictional claims in published maps and institutional affiliations.
Printed on acid-free paper

This Springer imprint is published by Springer Nature
The registered company is Springer International Publishing AG
The registered company address is: Gewerbestrasse 11, 6330 Cham, Switzerland



Preface


              Electrical generation and distribution systems have remained essentially unchanged almost for a century since their inception. The recent increase in fluctuating renewable energy generation is making the electricity supply highly dynamic in addition to the already highly dynamic demand. Some countries, such as the United States, have adopted dynamic pricing to bring market economics to stabilize the fluctuations in electricity supply and demand. Moreover, the significantly improved energy storage devices such as batteries will further stabilize the grid. However, the control and management of the electrical grid remains highly centralized and remains as a bottleneck in the recent
              energy revolution
              .
            

              Data centers are key infrastructures of the
              digital revolution
              as factories are key infrastructures of the industrial revolution. Data centers enable various cloud services, such as storage, for private and commercial uses. Furthermore, data centers enable the massive distributed parallel computing power necessary for recent advances in artificial intelligence, particularly, "deep learning." Large multi-tenant data centers located near population centers house tens of thousands of servers for tenants such as Google and Amazon. Hence, they are at the forefront of the
              digital revolution
              .
            

              The coordinated power management of multi-tenant data centers lie in the crossroad of
              energy and digital revolutions
              . This work surveys the latest power management techniques in multi-tenant data centers based on mathematical analysis, trace-based simulations, and test beds. We hope this survey provides an overview on the subject and a direction for future research.
            


Thant Zin Oo


Nguyen H. Tran


Shaolei Ren


Choong Seon Hong


Giheung, Gyeonggi, Republic of Korea
Giheung, Gyeonggi, Republic of Korea
Riverside, CA, USA
Giheung, Gyeonggi, Republic of Korea

July 2017


Acknowledgement

This work was supported by Basic Science Research Program through the National Research Foundation of Korea (NRF) funded by the Ministry of Education (NRF-2016R1D1A1B01015320), and in part by the U.S. NSF under grants CNS-1551661, CNS-1565474, and ECCS-1610471. Dr. Choong Seon Hong is the corresponding author.




Contents




Part I Introduction





1 Overview

3




1.​1 Importance of Multi-Tenant Data Centers

5




1.​1.​1 Operator's Perspective

5





1.​1.​2 Tenants' Perspective

5






1.​2 State-of-the-Art Research on Data Centers

7





1.​3 Potential of Coordinated Power Management

8




1.​3.​1 Importance of Coordinated Power Management

8





1.​3.​2 Coordinated Power Management in Multi-Tenant Data Centers

9






1.​4 Research Directions for Multi-Tenant Data Centers

9





1.​5 Sustainable Multi-Tenant Data Centers

9





1.​6 Multi-Tenant Data Center Demand Response

10




1.​6.​1 What is Data Center Demand Response?​

10





1.​6.​2 Why Multi-Tenant Data Center Demand Response?​

11







2 Preliminaries

13




2.​1 Multi-Tenant Data Center

13





2.​2 Electrical Systems

14




2.​2.​1 Power Usage Effectiveness

15





2.​2.​2 Electricity Supply

15





2.​2.​3 Electricity Demand

16





2.​2.​4 Electricity Bill

16






2.​3 Carbon Footprint

17





2.​4 Inconvenience to Tenants

19




2.​4.​1 Delay Performance Cost

19





2.​4.​2 Other Costs

19







Part II Sustainable Multi-Tenant Data Center





3 Background

23




3.​1 Motivation

23





3.​2 Issues

24





3.​3 Challenges

24





3.​4 Uncertainty

25





3.​5 On-line Coordination

25






4 System Model

27




4.​1 Problem Formulation

27




4.​1.​1 Minimizing the Operating Cost

27





4.​1.​2 Minimizing the Energy Consumption

28







5 Solutions

31




5.​1 Reducing Cost via Rewards

32




5.​1.​1 Feedback-Based On-Line Optimization

33





5.​1.​2 Simulation and Results

34





5.​1.​3 Experiment

39






5.​2 Minimizing Carbon Footprint in Colocation Data Center (GreenColo)

43




5.​2.​1 Simulation and Results

45






5.​3 Randomization for Pricing and Auction

50




5.​3.​1 Randomized Pricing Approach

50





5.​3.​2 Randomized Auction Approach

52





5.​3.​3 Randomized Truthful Auction Mechanism

54





5.​3.​4 Simulation and Results

58







6 Summary

67





Part III Multi-Tenant Data Center Demand Response





7 Background

71




7.​1 Motivation

71





7.​2 Issues

72





7.​3 Challenges

73






8 System Model

75




8.​1 Problem Formulations

75




8.​1.​1 Maximizing the Total Energy Demand Reduction

75





8.​1.​2 Minimizing the Social Cost of a Multi-Tenant Data Center

76





8.​1.​3 Maximizing the Social Welfare

77





8.​1.​4 Maximizing the Social Cost Savings

78





8.​1.​5 Thermal-Aware Minimization via Backup Energy Storage

79





8.​1.​6 Contract Design Formulation

81





8.​1.​7 Stackelberg Game Formulation

82





8.​1.​8 Minimizing Social Cost for Geo-Distributed Multi-Tenant Data Centers

83







9 Solutions

85




9.​1 Incentivizing Colocation Tenants for Demand Response (iCODE)

85




9.​1.​1 Simulations and Results

87






9.​2 Truthful Incentive Mechanism (Truth-DR)

91




9.​2.​1 2-Approximation Algorithm

92





9.​2.​2 The Randomized Auction

94





9.​2.​3 Simulations and Results

97






9.​3 Greening Multi-Tenant Data Center Demand Response (ColoEDR)

101




9.​3.​1 Price-Taking Tenants

103





9.​3.​2 Price-Anticipating Tenants

104






9.​4 Fair Rewarding in EDR (FairDR)

106




9.​4.​1 Auction Algorithm (FairDR)

106





9.​4.​2 Theoretical Analysis

109





9.​4.​3 Simulations and Results

110






9.​5 Thermal-Aware Cost Efficient Mechanism for EDR (TECH)

113





                        9.5.1 Reverse Auction Mechanism (
                        TECH
                        )
                      

115






                        9.5.2
                        TECH-EH


118





9.​5.​3 Simulations and Results

120






9.​6 Nash Bargaining Solution

125




9.​6.​1 One-to-One Bargaining

128





9.​6.​2 Concurrent Bargaining

130






9.​7 Contract Design Approach (Contract-DR)

132




9.​7.​1 Contract Design with Complete Information

132





9.​7.​2 Contract Design with Incomplete Information

133





9.​7.​3 Feasibility and Optimality Proofs

134





9.​7.​4 Simulations and Results

134






9.​8 Stackelberg Game Approach

142




9.​8.​1 Stackelberg Equilibrium:​ Analysis and Algorithm

142





9.​8.​2 Simulations and Results

145






9.​9 Alternating Direction Method of Multipliers

148




9.​9.​1 Case Study

151







                      9.10 EDR in Geo-Distributed Multi-Tenant Data Centers (
                      BatchEDR
                      )
                    

152




9.​10.​1 On-Line Algorithm Framework

152





9.​10.​2 Auction Mechanism

155







10 Summary

157





11 Concluding Remarks

159




11.​1 Open Issues

159




11.​1.​1 Making the Multi-Tenant Data Center Efficient and Green

159





11.​1.​2 Multi-Tenant Data Center Demand Response

160






11.​2 Conclusion

161





References
163


Index
175







