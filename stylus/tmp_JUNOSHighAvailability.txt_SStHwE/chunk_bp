  description description;
  feb slot-number (backup | primary);
  no-auto-failover;
}



Hierarchy level


[edit chassis redundancy feb (Creating a Redundancy
          Group)]





Description
On M120 routers only, configure an FEB redundancy group.



Option




group-name



The unique name for the redundancy group. The maximum
              length is 39 alphanumeric characters.



Other statements are explained separately.














Name
routing-engine




routing-engine slot-number (backup | disabled | master);



Hierarchy level


[edit chassis redundancy]





Description
Configure RE redundancy.



Default
By default, the RE in slot 0 is the master RE and the RE in slot
        1 is the backup RE.



Option




slot-number



Specify the slot number (0 or 1).



Set the function of the RE for the specified slot:




master



RE in the specified slot is the master.



backup



RE in the specified slot is the backup.



disabled



RE in the specified slot is disabled.

















Name
sfm




sfm slot-number (always | preferred);



Hierarchy level


[edit chassis redundancy]





Description
On M40e and M160 routers, configure which Switching and
        Forwarding Module (SFM) is the master and which is the backup.



Default
By default, the SFM in slot 0 is the master and the SFM in slot
        1 is the backup.



Options




slot-number



Specify which slot is the master and which is the backup.
              On the M40e router, slot-number can be 0 or 1. On the M160
              router, slot-number can be 0
              through 3.



always



Define this SFM as the sole device.



preferred



Define this SFM as the preferred device of at least
              two.

















Name
ssb




ssb slot-number (always | preferred);



Hierarchy level


[edit chassis redundancy]





Description
On M20 routers, configure which System and Switch Board (SSB)
        is the master and which is the backup.



Default
By default, the SSB in slot 0 is the master and the SSB in slot
        1 is the backup.



Options




slot-number



Specify which slot is the master and which is the
              backup.



always



Define this SSB as the sole device.



preferred



Define this SSB as the preferred device of at least
              two.

















Graceful Routing Engine Switchover
















Name
graceful-switchover




graceful-switchover;



Hierarchy level


[edit chassis redundancy]





Description
For routing platforms with two REs, configure a master RE to
        switch over gracefully to a backup RE without interruption to packet
        forwarding.














Nonstop Bridging Statements
















Name
nonstop-bridging




nonstop-bridging;



Hierarchy level


[edit protocols layer2-control]





Description
For routing platforms with two REs, configure a master RE to switch over gracefully to a
        backup RE and preserve Layer 2 Control Protocol (L2CP)
        information.














Nonstop Active Routing
















Name
commit synchronize




commit synchronize;



Hierarchy level


[edit system]





Description
Configure the commit command to
        automatically result in a commit synchronize action between dual REs
        within the same chassis. The RE on which you execute the commit command (the
        requesting RE) copies and loads its candidate configuration to the
        other (responding) RE. Each RE then performs a syntax check on the
        candidate configuration file being committed. If no errors are found,
        the configuration is activated and becomes the current operational
        configuration on both REs. Synchronization occurs only between the REs
        within the same chassis.
On the TX Matrix platform, when synchronization is complete the
        new configuration is then distributed to the REs on the T640 routing
        nodes. That is, the master RE on the TX Matrix platform distributes
        the configuration to the master RE on each T640 routing node.
        Likewise, the backup RE on the TX Matrix platform distributes the
        configuration to the backup RE on each T640 routing node.

Note
When you configure Non-Stop Active Routing (NSR), you must
          include the commit synchronize
          statement. Otherwise, the commit fails.




Options




and-quit



(Optional) Quit configuration mode if the commit
              synchronization succeeds.



comment



(Optional) Write a message to the commit log.



and-force



(Optional) Force a commit synchronization on the other RE
              (ignore warnings).

















Name
nonstop-routing




nonstop-routing;



Hierarchy level


[edit routing-options]





Description
For routing platforms with two REs, configure a master RE to
        switch over gracefully to a backup RE and preserve routing protocol
        information.














Name
traceoptions




traceoptions {
  file name <size size> <files number> > <(world-readable | no-world-
  readable)>;
  flag flag <flag-modifier> <disable>;
}



Hierarchy level


[edit protocols bfd]


[edit protocols bgp]


[edit protocols isis]


[edit protocols ldp]


[edit protocols ospf]


[edit protocols ospf3]


[edit protocols pim]


[edit protocols rip]


[edit protocols ripng]


[edit routing-options]





Description
Define tracing operations that track NSR functionality in the
        router. To specify more than one tracing operation, include multiple
        flag statements.



Default
If you do not include this statement, no global tracing
        operations are performed.



Options




disable



(Optional) Disable the tracing operation. You can use this
              option to disable a single operation when you have defined a
              broad group of tracing operations, such as all.



file name



Name of the file to receive the output of the tracing
              operation. Enclose the name within quotation marks. All files
              are placed in the directory /var/log. We recommend that you place
              global routing protocol tracing output in the file routing-log.



files number



(Optional) Maximum number of trace files. When a trace
              file named trace-file
              reaches its maximum size, it is renamed trace-file.0, then trace-file.1, and so on, until the
              maximum number of trace files is reached. Then the oldest trace
              file is overwritten. Range: 2-1,000 files. Default: two
              files.




Note
If you specify a maximum number of files, you also must
          specify a maximum file size with the size option.





flag flag



Tracing operation to perform. To specify more than one
              tracing operation, include multiple flag statements. The NSR
              tracing options are:




nsr-packet



Detailed trace information for Bidirectional
                    Forwarding Detection (BFD) NSR only.



nsr-synchronization



Tracing operations for NSR.






flag-modifier



(Optional) Modifier for the tracing flag. Except for BFD
              sessions, you can specify one or more of these modifiers:




detail



Detailed trace information.



receive



Packets being received.



send



Packets being transmitted.






size size



(Optional) Maximum size of each trace file, in kilobytes
              (KB), megabytes (MB), or gigabytes (GB). When a trace file
              named trace-file reaches
              this size, it is renamed trace-file.0. When the trace-file again reaches its maximum
              size, trace-file.0 is
              renamed trace-file.1 and trace-file is renamed trace-file.0. This renaming scheme
              continues until the maximum number of trace files is reached.
              Then the oldest trace file is overwritten. Syntax: xk to specify KB, xm to specify MB, or xg to specify GB. Range: 10 KB through
              the maximum file size supported on your system. Default: 128
              KB.




Note
If you specify a maximum file size, you also must specify a
          maximum number of trace files with the files option.















Graceful Restart
















Name
disable




disable;



Hierarchy level


[edit logical-systems logical-system-name protocols (bgp |
          isis | ldp | ospf | ospf3 | pim | rip | ripng | rsvp)
          graceful-restart]


[edit logical-systems logical-system-name routing-instances
          routing-instance-name protocols (bgp | ldp | ospf | ospf3 | pim)
          graceful-restart]


[edit protocols (bgp | esis | isis | ospf | ospf3 | ldp |
          pim | rip | ripng | rsvp) graceful-restart]


[edit protocols bgp group group-name
          graceful-restart]


[edit protocols bgp group group-name neighbor ip-address
          graceful-restart]


[edit routing-instances routing-instance-name protocols (bgp
          | ldp | ospf | ospf3 | pim) graceful-restart]


[edit routing-instances routing-instance-name
          routing-Options: graceful-restart]



[edit routing-Options:
          graceful-restart]






Description
Disable Graceful Restart.














Name
graceful-restart




graceful-restart {
  disable;
  helper-disable;
  maximum-helper-recovery-time seconds;
  maximum-helper-restart-time seconds;
  notify-duration seconds;
  recovery-time seconds;
  restart-duration seconds;
  stale-routes-time seconds;
}



Hierarchy level


[edit logical-systems logical-system-name protocols (bgp |
          isis | ldp | ospf | ospf3 | pim | rip | ripng | rsvp)]


[edit logical-systems logical-system-name routing-instances
          routing-instance-name protocols (bgp | ldp | ospf | ospf3 |
          pim)]


[edit logical-systems logical-system-name routing-instances
          routing-instance-name routing-options]


[edit protocols (bgp | esis | isis | ldp | ospf | ospf3 |
          pim | rip | ripng | rsvp)]


[edit protocols bgp group group-name]


[edit protocols bgp group group-name neighbor
          ip-address]


[edit routing-instances routing-instance-name protocols (bgp
          | ldp | ospf | ospf3 | pim)]


[edit routing-options]





Description
Enable Graceful Restart.














Name
helper-disable




helper-disable;



Hierarchy level


[edit logical-systems logical-system-name protocols (isis |
          ldp | ospf | ospf3 | rsvp) graceful-restart]


[edit logical-systems logical-system-name routing-instances
          routing-instance-name protocols (ldp | ospf | ospf3)]
          graceful-restart]


[edit protocols (isis | ldp | ospf | ospf3 | rsvp)
          graceful-restart]


[edit routing-instances routing-instance-name protocols (ldp
          | ospf | ospf3) graceful-restart]





Description
Disable helper mode for Graceful Restart. When helper mode is
        disabled, a router cannot help a neighboring router that is attempting
        to restart.



Default
Helper mode is enabled by default for these supported protocols:
        IS-IS, LDP, OSPF/OSPFv3, and RSVP.














Name
maximum-helper-recovery-time




maximum-helper-recovery-time seconds;



Hierarchy level


[edit protocols rsvp graceful-restart]


[edit logical-systems logical-system-name protocols rsvp
          graceful-restart]





Description
Specify the amount of time the router retains the state of its
        Resource Reservation Protocol (RSVP) neighbors while they undergo a
        Graceful Restart.


